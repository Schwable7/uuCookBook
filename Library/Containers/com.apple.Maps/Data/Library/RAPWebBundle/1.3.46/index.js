(()=>{"use strict";const e=e=>{if("string"==typeof e){const t=Array.from(e.match(/[#.][^#.]*/g)||[]);(e={}).classList=[];for(const i of t)"."===i.charAt(0)?e.classList?.push(i.substr(1)):"#"===i.charAt(0)&&(e.id=i.substr(1))}return e||{}},t={ariaLabel:"aria-label",ariaHidden:"aria-hidden",ariaChecked:"aria-checked",htmlFor:"for"},i=(i,n,a=[])=>{const o=document.createElement(i);(n instanceof Array||n instanceof Element)&&(a=a||n,n=null),n=e(n);for(const e in n){const i=n[e];if(e.startsWith("on")&&i)o.addEventListener(e.slice(2),i);else if("style"===e&&n.style)Object.assign(o.style,n.style);else if("classList"===e&&n.classList)for(const e of n.classList)e&&o.classList.add(e);else if("dataset"===e&&n.dataset)for(const e in n.dataset)o.setAttribute("data-"+e,n.dataset[e]);else"className"===e&&i?o.className=String(i):e in t&&i?o.setAttribute(t[e],String(i)):e&&(i||""===i)&&o.setAttribute(e,String(i))}return(a instanceof Array?a:[a]).map((e=>"string"==typeof e?document.createTextNode(e):e)).forEach((e=>e?o.appendChild(e):null)),o},n=e=>{let t=e?{x:e.offsetLeft,y:e.offsetTop}:{x:0,y:0};for(;e&&e.offsetParent;)e=e.offsetParent instanceof HTMLElement?e.offsetParent:null,t.x+=e?e.offsetLeft:0,t.y+=e?e.offsetTop:0;return t},a=(e,t,i=[])=>{const n=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.entries(t).forEach((([e,t])=>{n.setAttribute(e,String(t))})),"string"==typeof i?n.textContent=i:i.forEach((e=>n.appendChild(e))),n},o=e=>Array.isArray(e)?e:null!=e?[e]:[],s=(e,t,i)=>Math.max(t??e,Math.min(i??e,e));let l=new Set,r=new Set,d=!1;function p(){d=!1;let e=new Set(l);l.clear();for(const t of e)"function"==typeof t?t():t.performScheduledUpdate();let t=new Set(r);r.clear();for(const e of t)"function"==typeof e?e():e.performScheduledDraw()}const u=e=>{r.add(e),d||(window.requestAnimationFrame(p),d=!0)},E=["ar-SA","ca-ES","cs-CZ","da-DK","de-DE","el-GR","en-AU","en-GB","en-US","es-ES","es-MX","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","ms-MY","nb-NO","nl-NL","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-HK","zh-TW"],h={"ar-SA":6,"ca-ES":1,"cs-CZ":1,"da-DK":1,"de-DE":1,"el-GR":1,"en-AU":1,"en-GB":1,"en-US":0,"en-ZA":0,"es-ES":1,"es-MX":0,"fi-FI":1,"fr-CA":1,"fr-FR":1,"he-IL":0,"hi-IN":0,"hr-HR":1,"hu-HU":1,"id-ID":1,"it-IT":1,"ja-JP":0,"ko-KR":0,"ms-MY":1,"nb-NO":1,"nl-NL":1,"pl-PL":1,"pt-BR":0,"pt-PT":1,"ro-RO":1,"ru-RU":1,"sk-SK":1,"sv-SE":1,"th-TH":0,"tr-TR":1,"uk-UA":1,"vi-VN":1,"zh-CN":1,"zh-HK":0,"zh-TW":0},c=(t,n)=>{const a=n?.locale??"en-US",o=n?.useHour12??function(){const e=new Date(Date.UTC(2001,0,1,0,0,75600));return new Intl.DateTimeFormat(a,{hour:"numeric",timeZone:"UTC"}).format(e).indexOf("9")>=0}(),s=new Intl.DateTimeFormat(a,{hour:"numeric",minute:"numeric",timeZone:"UTC",hour12:o}),l={EVERYDAY:"hours.everyday",SUNDAY:"hours.sunday",MONDAY:"hours.monday",TUESDAY:"hours.tuesday",WEDNESDAY:"hours.wednesday",THURSDAY:"hours.thursday",FRIDAY:"hours.friday",SATURDAY:"hours.saturday"},r=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],d=h[a]??0,p=[];for(var u=0;u<r.length;++u)p.push(r[(u+d)%r.length]);const E=(e,i)=>{const{currentMap:n,defaultMap:a}=t;return(i?.defaultLocale?a:n)[e]??a[e]??e},c=(e,t)=>"lowercase"===e?t.toLocaleLowerCase(a):"uppercase"===e?t.toLocaleUpperCase(a):t,m=(e,t,i,n,a=[])=>{n=n||new Set;let o=0;const s=t?.replace?e.matchAll(/{{(\w+)}}/g):[];for(const l of s){const{index:s,0:r,1:d}=l;if("number"!=typeof s||!r||!d||n.has(d))continue;const p=e.substring(o,s);a.push(c(t?.transform,p));const u=t?.replace?.[d]??null,h="string"==typeof u,_=h?null:u,g=(h?u:null)??_?.text??E(_?.key??"",t)??`[[Error - No replacement for: ${d}]]`,I=i(_?.wrap??null);if(n.add(d),I){const e=m(g,t,i,n);a.push(I(e))}else m(g,t,i,n,a);n.delete(d),o=s+r.length}const l=0===a.length?e:e.substring(o);return a.push(c(t?.transform,l)),a},g=(e,t,i,n)=>{window.rapDebug&&(n[`debug-${i}Key`]=e,n[`debug-${i}Value`]=t)},I={hasKey:(e,i=!1)=>e in t.currentMap||i&&e in t.defaultMap,key:(e,t)=>{const i=E(e,t);return m(i,t,(()=>null)).join("")},h:(n,a,o=[],s)=>{if((a=e(a)).dataset=a.dataset||{},s&&s.localizePlaceholder){const e=s.localizePlaceholder;a.placeholder=I.key(e,s),g(e,a.placeholder,"placeholder",a.dataset)}if(s&&s.localizeAriaLabel){const e=s.localizeAriaLabel;a.ariaLabel=I.key(e,s),g(e,a.ariaLabel,"ariaLabel",a.dataset)}if("string"==typeof o){const e=o,i=E(e,s);if(o=m(i,s,(e=>e)),a.dir=t.dir,window.rapDebug){const t=I.key(e,s);a.dataset["debug-textKey"]=e,a.dataset["debug-textValue"]=t}}return i(n,a,o)},number:e=>e.toLocaleString(a),hour:(e,t=!1)=>{const i=new Date(Date.UTC(2001,0,1,0,0,e)),n=s.format(i);if(t){const e=n.match(/\p{Nd}+\p{P}\p{Nd}+/u);if(e)return e[0]}return n},weekDay:e=>I.key(l[e]),weekDayShort:e=>I.key(l[e]+".short"),weekDayInitial:e=>I.key(l[e]+".initial"),dayRange:e=>1===e.length?I.weekDay(e[0]):7===e.length?I.key("hours.everyday"):I.key("hours.dayrange",{replace:{from:I.weekDayShort(e[0]),to:I.weekDayShort(e[e.length-1])}}),date:e=>new Intl.DateTimeFormat(a).format(e),days:p,hour12:o,timeInfo:_(a)};return I};function _(e){const t=new Date(Date.UTC(2001,0,1,9)),i=new Date(Date.UTC(2021,0,1,21)),n=(e,t)=>t.format(e).replace(/\p{Nd}+\p{P}\p{Nd}+/u,"").trim(),a=new Intl.DateTimeFormat(e,{hour:"numeric",minute:"numeric",timeZone:"UTC",hour12:!0}),o=a.format(t),s=o.match(/\p{P}(?=\p{Nd})/u),l=o.match(/0/),r=n(t,a);return{am:r,pm:n(i,a),separator:s?.[0]??":",before:0===o.indexOf(r),zero:l?"0":"٠"}}const m=e=>["ar-SA","he-IL"].includes(e)?"rtl":"ltr";let g=!1;const I=(e,t)=>e.templates["string"==typeof t?t:t?.name??""]||null,y=e=>{const t=e.groups.some((e=>e.isEdited()));return{isEdited:t,isValid:t&&e.groups.every((e=>e.isValid()))}},D=e=>{const{isValid:t}=y(e);if(t!==!!e.isValid){e.isValid=t;for(const i of e.didValidate)i(t);e.bridge({name:"setValid",isValid:t})}return t},T=(e,t)=>{const i=t?[...t.formFields]:[],n=window.mapsProtoDefinitions;for(const t of e.groups)t.encode(i);const a=n.FeedbackDynamicForm.create({version:e.version,formFields:i}),o=n.FeedbackDynamicForm.encode(a).finish();return btoa(String.fromCharCode(...o))},N=(e,t=!0)=>{const i=Array.isArray(e)?e:e.groups;for(const e of i){const i=t&&e.isVisible();for(const t of e.children)N(t.getChildren?.(!0)??[],i),t.setVisible?.(i)}},v=e=>{const t=Array.isArray(e)?e:e.groups;for(const e of t)if(e.isVisible())for(const t of e.children){const e=t.getFocusable?.()??v(t.getChildren?.(!1)??[]);if(e)return e}return null},O={EVERYDAY:"EVERYDAY",SUNDAY:"MONDAY",MONDAY:"TUESDAY",TUESDAY:"WEDNESDAY",WEDNESDAY:"THURSDAY",THURSDAY:"FRIDAY",FRIDAY:"SATURDAY",SATURDAY:"SUNDAY"},F=Object.values(O);class A{constructor(e,t,i,n){this.visible=e,this.className=t,this.duration=i,this.element=n??null,n&&this.setElement(n),this.timerId=void 0,this.state="done"}setElement(e){this.element&&this.element.removeEventListener("transitionEnd",this),this.element=e,e.className=this.getClass()}updateState(e,t){return this.visible=e??this.visible,this.state=t??this.state,this.getClass()}getClass(){const e=this.visible?"show":"hide";return`${this.className} ${e} ${this.state}`}setVisible(e){const t=this.element;if(t){if(e!==this.visible){t.className=this.updateState(e,"start"),u((()=>{"start"===this.state&&(t.className=this.updateState(e,"running"),t.addEventListener("transitionEnd",this))}));const i=this.duration+100;window.clearTimeout(this.timerId),this.timerId=window.setTimeout((()=>this.end()),i)}}else this.updateState(e,"done")}end(){this.element&&(this.element.removeEventListener("transitionEnd",this),this.element.className=this.updateState(null,"done"),window.clearTimeout(this.timerId),this.timerId=void 0)}handleEvent(e){e.target===this.element&&this.end()}}class b{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.value=-1,this.element=null,this.domList=null;const i="function"==typeof t.options?t.options(e.place):t.options;this.options=i.map(((t,i)=>{const n=L(t,e.place);return this.value=n?i:this.value,{option:t,groups:be(e,t.next,!n),inputDom:null,labelDom:null,itemDom:null}})),this.nextIfNoneChosen=be(e,t.nextIfNoneChosen,-1!==this.value),this.originalValue=this.value}view(e,t){const{globals:n}=this,a=this.globals.localize;t.push(...this.nextIfNoneChosen.map((e=>e.view())));for(const[e,o]of this.options.entries()){const{option:s,groups:l}=o;o.inputDom=i("input",{type:"checkbox",value:e.toString(),checked:-1===this.value?L(s,n.place):e===this.value,onchange:()=>{this.setChosen(e)}},[]),o.labelDom=i("label",{role:"checkbox",ariaChecked:"false"},[o.inputDom,a.h("span",".check-label",s.label),i("span",".check-glyph","")]),o.itemDom=i("li",{role:"listitem",className:"check"},[o.labelDom]),window.rapDebug&&o.itemDom.setAttribute("data-debug-value",s.value??""),t.push(...l.map((e=>e.view())))}const o=this.options.map((({itemDom:e})=>e));this.domList=i("ul",{role:"list"},o);const s=i("li",".input-radios.checks",[this.domList]);return this.element=s,s}setChosen(e){e=this.value===e?-1:e;const t=this.options[this.value],i=this.options[e];t?.inputDom&&(t.inputDom.checked=!1),i?.inputDom&&(i.inputDom.checked=!0),t?.labelDom?.setAttribute("aria-checked","false"),i?.labelDom?.setAttribute("aria-checked","true"),this.value=e;const n=f(this.globals.groups);this.globals.bridge({name:"sendAnalyticsEvent",values:n});const a=[];for(let t=-1;t<this.options.length;t+=1){const i=-1===t?this.nextIfNoneChosen:this.options[t].groups;for(const n of i)a.push({isVisible:t===e,group:n})}const o=this.options[e]?.option.scroll??!0;fe(a,this.element,o),D(this.globals)}isEdited(){return this.value>=0&&(this.value!==this.originalValue||!!this.template.submit)&&Le(this.getChildren())}isValid(){const e=this.optional||!!this.template.submit,t=this.getChildren(),i=t.length>0&&!!this.options[this.value]?.option.requireEditInNext,n="allExceptLast"===this.options[this.value]?.option.requireEditInNext?t.slice(0,t.length-1):t,a=!i||n.some((e=>e.isEdited()));return e||this.value>=0&&this.value!==this.originalValue&&a&&(0===t.length||t.every((e=>e.isValid())))}encode(e,t){const{template:{key:i,submit:n},options:a,value:o}=this,s=this.globals.localize,l=window.mapsProtoDefinitions,r=l.FeedbackFieldKey,d=l.FeedbackFieldOptionKey,p=l.FeedbackDynamicFieldValueType;if(o>=0||n){const l=e=>({key:e.value?d[e.value]:void 0,localizedText:s.key(e.label??""),defaultText:s.key(e.label??"",{defaultLocale:!0})}),u=n?l(n):null,E=a.map((e=>l(e.option)));e.push({formId:t,parentFieldId:this.globals.parentId,name:i?r[i]:void 0,value:{fieldValueType:p.FIELD_SINGLE_SELECT,singleSelectField:{options:E,selected:u??E[o]}}})}for(const t of this.getChildren())t.encode(e)}decode(e,t){const i=e.value?.singleSelectField?.options,n=e.value?.singleSelectField?.selected;if(n&&i){const e=i.findIndex((e=>e.key===n.key&&e.localizedText===n.localizedText&&e.defaultText===n.defaultText));this.setChosen(e)}for(const e of this.options)for(const i of e.groups)i.decode(t)}getChildren(e){const t=-1===this.value?this.nextIfNoneChosen:this.options[this.value]?.groups??[];return e?this.nextIfNoneChosen.concat(this.options.flatMap((e=>e.groups))):t}dump(e){const t=this.globals.localize,i=this.options[this.value]?.option,n=this.isEdited()?"*":"",a=this.template.optional?"?":"",o=i?.label??"",s=this.getChildren().map((t=>t.dump(e+"    "))).join("\n");return`${e}${n}Radios${a}<${t.key(o)??o}>${s?"\n"+s:""}`}}const f=(e,t=[])=>{for(const i of e)for(const e of i.children)e instanceof b&&e.value>-1&&t.push(e.options[e.value]?.option.value??""),f(e.getChildren?.(!1)??[],t);return t},L=(e,t)=>{const i=e.checked,n=t?.entranceType;return"entranceBoth"===i?"both"===n:"entranceWalking"===i?"walking"===n:"entranceDriving"===i?"driving"===n:"businessHoursTemporaryClosure"===i?!1===t?.businessHoursTemporaryClosureEnd:i?!!t?.[i]:e.checkedLiteral??!1};class C{constructor(e,t,i){this.globals=e,this.template=t,this.optional=!!t.optional,this.label="",this.multilineRows=0,this.label=e.localize.key(i?.textLabel??t.label),this.domInput=null,this.domClear=null,this.domHiddenInput=null;const n=S(e,t.original,(e=>{const t=this.edited===this.original;this.original=e,t&&this.setValue(e)})),a=S(e,t.initial,(e=>{const t=this.edited===this.initial;this.initial=e,t&&this.setValue(e)}));this.original=n??"",this.initial=a??n??"",this.edited=this.initial}view(e,t,n){const a=this.template,{bridge:o,localize:s}=this.globals,{isMultiline:l,isAddress:r}=a,d=this.edited||this.initial,p=l||r,u=[],E=i(p?"textarea":"input",{type:a.type,value:d,dir:"tel"!==a.type?"auto":"ltr",className:r?"address":"",placeholder:this.label},[]);return p&&(this.domHiddenInput=i("p",{className:`${E.className} hidden-textarea`,dir:"auto",ariaHidden:!0},d),u.push(this.domHiddenInput)),E.value=d,this.domInput=E,u.push(E),"tel"===a.type&&E instanceof HTMLInputElement?E.addEventListener("input",(()=>{this.validateAndSetTelValue(E.value)})):E.addEventListener("input",(()=>{this.setValue(E.value,!1)})),p||(this.domClear=i("button",{type:"button",ariaLabel:s.key("text.clear"),className:"clear"+(d?" visible":""),onclick:()=>{const e=E.value===this.initial;this.setValue(e?"":this.initial),E.focus()}}),u.push(this.domClear)),r&&(E.classList.add("address"),u.push(i("button",{type:"button",ariaLabel:s.key("address.search"),className:"search",onclick:async()=>{const e=await o({name:"getAddress"});e&&e.formattedAddress&&this.setValue(e.formattedAddress.join("\n"))}},[i("div",".search-glyph",[])]))),i("li",".input-text"+(p?".multiline"+(r?".address":""):""),u)}getFocusable(){return this.domInput}legendView(e,t,n){const a=this.template;if(!a.legend)return null;const o=this.globals.localize;return[i("p",{},o.key("legend.description",{replace:{description1:{key:n?.photosLegend??"legend.description.1.generic"},description2:{key:a.legend}}}))]}setValue(e,t=!0){this.edited=e,this.domInput&&t&&(this.domInput.value=e),this.domHiddenInput&&(this.domHiddenInput.textContent=e+"​"),this.domClear&&this.domClear.classList.toggle("visible",!!e),D(this.globals)}validateAndSetTelValue(e){const t=e.replace(/[^\s()0-9-+]/g,"").replace(/(\S\s*)\+/g,"$1");if(t!==e&&this.domInput){const e=this.domInput.value.length,i=this.domInput.selectionStart??e,n=this.domInput.selectionEnd??e;this.domInput.value=t;const a=this.domInput.value.length-e;this.domInput.setSelectionRange(i+a,n+a)}this.setValue(t,!1)}isEdited(){return/\S/.test(this.edited)&&this.edited!==this.original}encode(e,t){const{template:{key:i},original:n,edited:a}=this,o=window.mapsProtoDefinitions,s=o.FeedbackFieldKey,l=o.FeedbackDynamicFieldValueType;n!==a&&e.push({formId:t,parentFieldId:this.globals.parentId,name:i?s[i]:void 0,value:{fieldValueType:l.FIELD_TEXT,textField:{original:n,edited:a}}})}decode(e){const t=e.value?.textField;t&&"string"==typeof t.edited&&this.setValue(t.edited)}dump(e){return`${e}${this.isEdited()?"*":""}Text${this.optional?"?":""}<${this.label}>="${this.edited}" ("${this.original}")`}}const S=(e,t,i)=>{if("map-feature-name"===t)e.didSetMapPicker.push((e=>{e.featureName&&i(e.featureName)}));else if("transit-line-name"===t)e.didChooseTransitLine.push((e=>{e.line.name&&i(e.line.name)}));else{if("userEmail"===t)return e[t];if(t){const i=e.place?.[t];return Array.isArray(i)?i.join("\n"):i||""}}return null};class P{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.domPhotoList=null,this.photos=new Map,this.domPhotos=new Map}view(e,t,n){const{bridge:a,localize:o}=this.globals,s=i("button",{className:"add",type:"button",onclick:async()=>{let e=[];try{e=await a({name:"getPhotos"})}catch(e){}for(const t of e)this.addPhoto(t);D(this.globals);for(const e of this.globals.didUpdateLayout)e()}},[o.h("div",{className:"label"},"photo.label")]),l=i("ul",".previews",[i("li",{},s)]);this.domPhotoList=l;for(const e of this.photos.values())this.addPhoto(e);return i("li",".input-photos",[l])}addPhoto(e){if(this.photos.set(e.id,e),this.globals.photoIds.add(e.id),!this.domPhotos.has(e.id)&&this.domPhotoList){const t=this.imageView(e);this.domPhotoList.append(t),this.domPhotos.set(e.id,t)}}removePhoto(e){this.photos.delete(e.id),this.globals.photoIds.delete(e.id),this.domPhotos.get(e.id)?.remove(),this.domPhotos.delete(e.id),this.globals.bridge({name:"removePhoto",id:e.id})}legendView(e,t,n){const a=this.template;if(!a.legend)return null;const o=this.globals.localize;return[i("p",{},o.key("legend.description",{replace:{description1:{key:n?.photosLegend??"legend.description.1.generic"},description2:{key:a.legend}}}))]}imageView(e){return i("li",".photo",[i("img",{src:e.url}),this.globals.localize.h("button",{className:"clear",onclick:()=>{this.removePhoto(e),D(this.globals)}},[],{localizeAriaLabel:"photo.label.remove"})])}isEdited(){return this.photos.size>0}encode(e,t){if(!window.rapDebug)return;const i=this.template.key,n=window.mapsProtoDefinitions,a=n.FeedbackDynamicFieldValueType;e.push({formId:t,parentFieldId:this.globals.parentId,name:n.FeedbackFieldKey[i],value:{fieldValueType:a.FIELD_PHOTOS,photoMetadata:Array.from(this.photos.values()).map((({id:e,url:t})=>({identifier:e,url:t})))}})}decode(e){for(const t of e.value?.photoMetadata??[])this.addPhoto({id:t.identifier??"",url:t.url??""})}dump(e){return`${e}${this.isEdited()?"*":""}Photos${this.optional?"?":""}(${this.photos?this.photos.size:0})`}}let K=0;const w={id:"",x:0,y:0,widthPadding:32,widthPercent:100,height:200,opacity:0};class x{constructor(e,t){const i=K.toString();K+=1,this.globals=e,this.template=t,this.optional=!!t.optional,this.optionalIf=t.optionalIf,this.id=i,this.original=null,this.value=null,this.viewState={...w,id:i},this.element=null,this.features=[],this.children=be(e,t.next,!this.isOpen()),e.didSetMapPicker.push((e=>{e.id===this.id&&this.setValue(e)})),e.didUpdateLayout.push((()=>{const t=this.viewState;if(t.opacity>0&&this.element){const{x:i,y:a}=n(this.element);if(i!==t.x||a!==t.y){const n="updateMapPickerView",o={...t,x:i,y:a};e.bridge({name:n,start:t,end:o,duration:0}),this.viewState=o}}}))}view(e,t){if(this.element)return this.element;for(const e of this.children)t.push(e.view());const n={className:"input-map",dataset:{"map-id":this.id}},a=i("li",n,[i("div")]);return this.element=a,a}legendView(){const{legend:e,legendExpand:t}=this.template,{localize:i,uiIdiom:n}=this.globals,a="mac"!==n&&t?t:e;return[i.h("p",{},a)]}setValue(e,t=null,i=!1){const n=null===this.original&&null===t;this.value=n?null:e,this.original=n?e:t??this.original;const a=this.isOpen(),o=this.children.map((e=>({group:e,isVisible:a})));fe(o,this.element,!!this.value),i&&this.globals.bridge({name:"updateMapPickerValue",original:this.original,value:this.value}),D(this.globals)}isOptional(){const e=!!this.original?.featureHandle?.length;return this.optional||"hasFeatures"===this.optionalIf&&e}isEdited(){return!!this.value&&Le(this.getChildren())}isValid(){return this.isOptional()||this.isEdited()&&(0===this.children.length||this.isOpen()&&this.children.every((e=>e.isValid())))}isOpen(){return"hasFeatures"===this.template.nextShownIf?!!this.value?.featureHandle?.length:!!this.value}encode(e,t){const{key:i,editOriginal:n}=this.template,a=window.mapsProtoDefinitions,o=a.FeedbackFieldKey,s=a.FeedbackDynamicFieldValueType;if(!this.original&&!this.value)return;const l=n&&this.value||this.original,r=n?void 0:this.value;e.push({formId:t,parentFieldId:this.globals.parentId,name:i?o[i]:void 0,value:{fieldValueType:s.FIELD_COORDINATE,locationField:{original:l&&{lat:l.latitude,lng:l.longitude},edited:r&&{lat:r.latitude,lng:r.longitude},originalTile:l&&{featureHandle:l.featureHandle,featureName:l.featureName},editedTile:r&&{featureHandle:r.featureHandle,featureName:r.featureName}}}});for(const t of this.getChildren())t.encode(e)}decode(e,t){const i=e.value?.locationField,n=i?.original&&{id:this.id,latitude:i.original.lat,longitude:i.original.lng,featureHandle:i?.originalTile?.featureHandle??[]},a=i?.edited&&{id:this.id,latitude:i.edited.lat,longitude:i.edited.lng,featureHandle:i?.editedTile?.featureHandle??[]},o=this.template.editOriginal?n:a;(o||n)&&this.setValue(o??null,n??null,!0);for(const e of this.children)e.decode(t)}getChildren(e){return e||this.isOpen()?this.children:[]}setVisible(e){const{element:t,viewState:i}=this,{bridge:a}=this.globals,o=e?1:0;if(o!==i.opacity&&t){const{x:e,y:s}=n(t),l={...i,x:e,y:s,opacity:o};a({name:"updateMapPickerView",start:i,end:l,duration:1e3}),this.viewState=l}}dump(e){const{legend:t,legendExpand:i}=this.template,{localize:n,uiIdiom:a}=this.globals,o=[this.value?.latitude??"",this.value?.longitude??"",this.value?.featureName??"(no feature name)"],s=[this.original?.latitude??"",this.original?.longitude??"",this.original?.featureName??"(no feature name)"],l=this.isEdited()?"*":"",r=(this.isOptional()?"?":"")+(this.optionalIf?`(${this.optionalIf}?)`:""),d=this.getChildren().map((t=>t.dump(e+"    "))).join("\n"),p=d?`\n${d}`:"";return`${e}${l}Map${r}<${n.key(("mac"!==a?i:null)??t)}>=${this.value?o.join(", "):"(no value)"} (${this.original?s.join(", "):"(no original value)"})${p}`}}let k=0;const B=/^(\d+)(?:-(\d\d)(?:-(\d\d)(?:T[0-9Z:.+-]+)?)?)?$/,R=new Date,Y=R.setHours(0,0,0,0)-60*R.getTimezoneOffset()*1e3;class M{constructor(e,t){const i=t.original,n=!!i&&e.place?.[i],a="number"==typeof n?n:NaN;this.globals=e,this.template=t,this.optional=!!t.optional,this.min=t.allowPast?null:Y,this.originalDate=s(a,this.min),this.date=this.originalDate}view(){const e=this.template.label,t=this.globals.localize,n="date-"+k++,a=t.h("input",{id:n,type:window.rapDebugDateFallback?"text":"date"},[],{localizePlaceholder:"calendar.placeholder"});return"date"===a.type?a.oninput=()=>{this.setDate(a.valueAsNumber)}:(a.setAttribute("type","text"),a.onchange=()=>{const e=(a.value||"").match(B),t=e?new Date(parseInt(e[1]),parseInt(e[2])-1,parseInt(e[3])):new Date(a.value),i=t.setHours(0,0,0,0),n=60*t.getTimezoneOffset()*1e3;this.setDate(i-n)}),this.inputDom=a,this.updateDomValue(),i("li",".input-calendar",i("div",{},[t.h("label",{htmlFor:n},e),a]))}isEdited(){return!isNaN(this.date)&&this.date!==this.originalDate}setDate(e){this.date=s(e,this.min),this.updateDomValue(),D(this.globals)}updateDomValue(){if(!this.inputDom)return;const e=isNaN(this.date);if("date"===this.inputDom.type)this.inputDom.valueAsNumber=e?Y:this.date;else if(e)this.inputDom.value="";else{const e=new Date(this.date),t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()).getTime();this.inputDom.value=this.globals.localize.date(t)}}encode(e,t){const i=window.mapsProtoDefinitions,n=i.FeedbackFieldKey,a=i.FeedbackBusinessHours.FeedbackHoursType,o=i.FeedbackDynamicFieldValueType;var s;isNaN(this.date)||this.date===this.originalDate||e.push({formId:t,parentFieldId:this.globals.parentId,name:n[this.template.key],value:{fieldValueType:o.FIELD_HOURS,hoursField:[{hoursType:a.FEEDBACK_HOURS_TEMPORARY_CLOSURE,end:(s=this.date,Math.round(s/1e3-978307200))}]}})}decode(e){for(const t of e.value?.hoursField??[]){const e=t.end??NaN,i="number"==typeof e?e:e.toNumber();this.setDate(1e3*(i+978307200))}}dump(e){return`${e}${this.isEdited()?"*":""}Calendar${this.optional?"?":""}<${isNaN(this.date)?"":this.inputDom?.value}>`}}class U{constructor(e,t){const i=t.original,n=i?e.place?.[i]:t.originalLiteral??null;this.globals=e,this.template=t,this.optional=!!t.optional,this.originals=new Set(n??[]),this.categories=new Set(this.originals),this.domCategoryMap=new Map}view(){const{bridge:e,localize:t}=this.globals;this.domCategories=i("ul",".input-categories-list.empty",[]);for(const e of this.categories)this.setCategory(e,!0);return i("li",".input-categories",[this.domCategories,i("div",".add",[t.h("button",{type:"button",onclick:async()=>{const t=await e({name:"getCategories",categories:Array.from(this.categories)});this.setCategories(new Set(t.categories)),D(this.globals)}},this.template.label)])])}categoryView(e){return i("li",{},[i("div",".title",i("span",{dir:this.globals.textMap.dir},e)),i("button",{ariaLabel:this.globals.localize.key("categories.remove"),className:"clear",type:"button",onclick:()=>{this.setCategory(e,!1),D(this.globals)}})])}isEdited(){return H(this.categories,this.originals).size>0||H(this.originals,this.categories).size>0}setCategory(e,t){if(t?this.categories.add(e):this.categories.delete(e),this.domCategories){const i=0===this.categories.size;this.domCategories.classList.toggle("empty",i);const n=this.domCategoryMap.get(e);if(!n&&t){const t=this.categoryView(e);this.domCategoryMap.set(e,t),this.domCategories.appendChild(t)}else n&&!t&&(this.domCategoryMap.delete(e),n.remove())}}setCategories(e){for(const t of e)this.setCategory(t,!0);for(const t of H(this.categories,e))this.setCategory(t,!1)}encode(e,t){const i=this.template.key,n=window.mapsProtoDefinitions,a=n.FeedbackFieldKey,o=n.FeedbackDynamicFieldValueType,s=H(this.categories,this.originals),l=H(this.originals,this.categories);(s.size>0||l.size>0)&&e.push({formId:t,parentFieldId:this.globals.parentId,name:a[i],value:{fieldValueType:o.FIELD_TEXT_LIST,textListField:{original:Array.from(this.originals),added:Array.from(s),removed:Array.from(l)}}})}decode(e){const t=e?.value?.textListField;if(t){this.originals=new Set(t.original);const e=new Set(t.original);for(const i of t.added||[])e.add(i);for(const i of t.removed||[])e.delete(i);this.setCategories(e)}}dump(e){return`${e}${this.isEdited()?"*":""}Categories${this.optional?"?":""}[${[...this.categories].join(", ")}]`}}const H=(e,t)=>{const i=new Set(e);for(const n of e)t.has(n)&&i.delete(n);return i};class V{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional}view(){const{bridge:e,navigation:t}=this.globals;if(!t)return i("li",{},[]);const{single:n,showDetails:a}=this.template,{steps:o,focused:s}=t,l=o&&o[o.length-1],r=("arrival"===n&&l?[l]:n&&s?[s]:o||[]).map((t=>{const n="step"+(t.checked?" checked":"")+(a?" show-details":"");return i("li",{className:n,onclick:()=>{a||e({name:"chooseNavigationStep",id:t.stepId})}},[i("div",".summary",[i("div",".icon",[i("img",{src:t.icon})]),i("div",".text",[i("h3",{className:"step-title",dir:"auto"},[t.title]),i("p",{className:"step-subtitle",dir:"auto"},[t.subtitle])]),i("div",".check"+(t.checked?".checked":""),[])]),t.map&&a?i("img",{src:t.map,className:"screen"},[]):null])})).reverse(),d=n?r:r.slice(1);return i("li",".input-navigation.show-"+(n||"all"),[i("ul",{},d)])}isEdited(){return!1}encode(e,t){const{key:i,single:n}=this.template,a=this.globals.navigation?.focused,o=window.mapsProtoDefinitions,s=o.FeedbackDynamicFieldValueType,l=o.FeedbackFieldKey;if("focused"===n&&a&&this.globals.parentId){const{stepId:n,routeStepImageId:o}=a,r=a.directionsResponseIndex,d=a.routeIndex,p=this.globals.photoIds.values().next(),u=p.done?null:p.value,E=a.userPhotoId||u;e.push({formId:t,name:i?l[i]:void 0,value:{fieldValueType:s.FIELD_ROUTE_STEP,routeStepField:{directionsResponseWaypointIndex:r,routeLegIndex:d,stepId:n,routeStepImageId:o,userPhotoId:E}},fieldId:this.globals.parentId})}}dump(e){return`${e}NavigationStep${this.optional?"?":""}`}decode(e){const t=e.value?.routeStepField;t&&t.userPhotoId&&this.globals.photoIds.add(t.userPhotoId)}}const W={width:102,height:62,knobRadius:27,knobStretch:7,onOffset:44,offOffset:4,labelStrokeWidth:2,stretchMinX:-.75,stretchMaxX:1.75};let G=0;class ${constructor(e){this.globals=e,this._rtl="rtl"===e.textMap.dir,this._value=!1,this._onchange=e=>{}}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateView())}get element(){return this._elements?.main}set onchange(e){this._onchange=e}view(){if(this._elements)return this._elements;const{width:e,height:t,knobRadius:n,onOffset:o}=W,{labelStrokeWidth:s}=W,l=.375*n-s/2,r=a("rect",{class:"pill",width:e,height:t,rx:t/2,ry:t/2}),d=a("rect",{class:"knob",height:2*n,width:2*n,rx:n,ry:n,y:t/2-n}),p=a("rect",{class:"label label-on",x:o/2,y:t/2-l,width:s,height:2*l}),u=a("circle",{class:"label label-off",r:l,cx:e-.4*t,cy:t/2,style:`stroke-width: ${s}px`}),E=i("input",{type:"checkbox",hidden:!0,id:"switch-"+G++});E.addEventListener("change",this);const h=this.globals.useAccessibilityLabels?".a11y-labels":"",c=i("div",`.switch${h}`,[a("svg",{viewBox:`0 0 ${e} ${t}`},[r,p,u,d]),E]);return c.addEventListener("pointerdown",this),this._elements={main:c,checkbox:E,knob:d},this._updateView(),this._elements}wrapperView(e){if(this._elementsWrapper)return this._elementsWrapper.wrapper;const{checkbox:t,main:n}=this.view(),a=i("label",{htmlFor:t.id,role:"checkbox",ariaChecked:this._value?"true":"false"},e),o=i("div",".switch-label",[a,n]);return this._elementsWrapper={label:a,wrapper:o},this._elementsWrapper.wrapper}handleEvent(e){if(!this._elements)return;const{stretchMinX:t,stretchMaxX:i}=W,{main:n,checkbox:a}=this._elements;switch(e.type){case"change":this._setValue(a.checked),this._updateView();break;case"pointerdown":e.preventDefault(),window.addEventListener("pointermove",this),window.addEventListener("pointerup",this),window.addEventListener("pointercancel",this),this._gesture={on:this.value,stretch:!0,moved:!1,rect:n.getBoundingClientRect()},this._updateView();break;case"pointermove":{if(!this._gesture)break;e.preventDefault();const n=(this._rtl?this._gesture.rect.right-e.pageX:e.pageX-this._gesture.rect.left)/this._gesture.rect.width;(this._gesture.stretch&&(n<t||n>i)||!this._gesture.stretch&&n>=t&&n<=i)&&(this._gesture.stretch=!this._gesture.stretch,this._updateView());const a=n>=(this._gesture.on?.5:1);a!==this._gesture.on&&(this._gesture.on=a,this._gesture.moved=!0,this._updateView());break}case"pointerup":if(!this._gesture)break;this._gesture.on!==this.value?this._setValue(this._gesture.on):this._gesture.moved||this._setValue(!this.value);case"pointercancel":window.removeEventListener("pointermove",this),window.removeEventListener("pointerup",this),window.removeEventListener("pointercancel",this),delete this._gesture,this._updateView()}}_setValue(e){e!==this.value&&(this._value=e,this._onchange(this))}_updateView(){if(!this._elements)return;const{main:e,checkbox:t,knob:i}=this._elements,n=this._elementsWrapper?.label,{knobRadius:a,knobStretch:o,onOffset:s,offOffset:l}=W,r=this._gesture?.on??this.value,d=this._gesture?.stretch?o:0,p=2*(a+d),u=r?s-2*d:l;e.classList.toggle("on",r),e.classList.toggle("off",!r),e.classList.toggle("stretch",!!this._gesture?.stretch),t.checked=r,i.setAttribute("width",p.toString()),i.setAttribute("x",u.toString()),n?.setAttribute("aria-checked",this._value.toString())}}class z{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.amenities=t.amenities.map((t=>{const i=t.original,n=!!i&&!!e.place?.[i],a=t.type,o=new $(e);return o.value=n,o.onchange=()=>{this.setValue(a,o.value,!1)},{type:a,label:t.label,input:o,edited:!1,value:n}}))}view(e){const t=this.globals.localize;return i("li",".input-amenity.checks",i("ul",{},this.amenities.map((e=>i("li",".toggle",e.input.wrapperView(t.key(e.label)))))))}setValue(e,t,i=!0){const n=this.amenities.find((t=>t.type===e));n&&(n.edited=!n.edited,n.value=t,i&&(n.input.value=t),D(this.globals))}isEdited(){return this.amenities.some((e=>e.edited))}encode(e,t){const i=window.mapsProtoDefinitions,n=i.FeedbackFieldKey,a=i.FeedbackDynamicFieldValueType,o=i.AmenityType,s=[],l=[];for(const e of this.amenities)e.edited&&e.value&&s.push(o[e.type]),e.edited&&!e.value&&l.push(o[e.type]);(s.length>0||l.length>0)&&e.push({formId:t,parentFieldId:this.globals.parentId,name:n[this.template.key],value:{fieldValueType:a.FIELD_AMENITIES,amenitiesField:{addedAmenities:s,removedAmenities:l}}})}decode(e){const t=window.mapsProtoDefinitions.AmenityType,i=new Set(e.value?.amenitiesField?.addedAmenities),n=new Set(e.value?.amenitiesField?.removedAmenities);for(const e of this.amenities){const a=i.has(t[e.type]),o=n.has(t[e.type]);(a||o)&&this.setValue(e.type,a&&!o)}}dump(e){return`${e}${this.isEdited()?"*":""}Amenities${this.optional?"?":""}[${this.amenities.map((e=>e.type+"="+e.value)).join(", ")}]`}}class j{constructor(e,t){const i=t.original,n=(i?e.place?.[i]:null)??[];this.globals=e,this.template=t,this.optional=!!t.optional,this.original=new Map(n.map((e=>[e.id,e]))),this.value=new Map(this.original),this.domPlaceList=null,this.domPlaces=new Map}view(e){const{bridge:t,localize:n}=this.globals;this.domPlaceList=i("ul",".input-place-list.empty",[]);for(const e of this.value.values())this.updatePlace(e,!0);return i("li",".input-place",[this.domPlaceList,i("div",".add",[n.h("button",{className:"input-place-add",type:"button",onclick:async()=>{const e=await t({name:"getPoi"});this.updatePlace(e,!0)}},"place.add")])])}placeSummaryView(e){const t=e.subtitle??e.formattedAddress?.join(", ")??"",n=e.title||e.icon||t?e.title:i("a",{href:Z+e.id},e.id);return i("li",".input-place-summary",[i("img",{src:e.icon,ariaHidden:!0},[]),i("div",{},[i("div",{className:"title",dir:"auto"},[n]),i("div",{className:"subtitle",dir:"auto"},[t])]),i("button",{ariaLabel:this.globals.localize.key("place.remove"),className:"clear",onclick:()=>{this.updatePlace(e,!1)}},[])])}updatePlace(e,t){t?this.value.set(e.id,e):this.value.delete(e.id);const i=this.domPlaces.get(e.id);if(!t&&i&&(i.remove(),this.domPlaces.delete(e.id)),t&&this.domPlaceList){const t=this.placeSummaryView(e);this.domPlaceList.appendChild(t),this.domPlaces.set(e.id,t)}if(this.domPlaceList){const e=0===this.domPlaceList.children.length;this.domPlaceList.classList.toggle("empty",e)}D(this.globals)}isEdited(){if(this.value.size!==this.original.size)return!0;for(const e of this.value.keys())if(!this.original.has(e))return!0;return!1}encode(e,t){const{template:{key:i}}=this,n=window.mapsProtoDefinitions,a=n.FeedbackFieldKey,o=n.FeedbackDynamicFieldValueType,s=q(this.value,this.original),l=q(this.original,this.value);(s.size>0||l.size>0)&&e.push({formId:t,parentFieldId:this.globals.parentId,name:a[i],value:{fieldValueType:o.FIELD_TEXT_LIST,textListField:{original:Array.from(this.original.keys()),added:Array.from(s.keys()),removed:Array.from(l.keys())}}})}decode(e){const t=e.value?.textListField;for(const e of t?.original??[])this.updatePlace(X(e),!0);for(const e of t?.removed??[])this.updatePlace(X(e),!1);for(const e of t?.added??[])this.updatePlace(X(e),!0)}dump(e){const t=this.optional?"?":"";return`${e}${this.isEdited()?"*":""}Place${t}(${this.value.size})`}}const q=(e,t)=>{const i=new Map;for(const[n,a]of e)t.has(n)||i.set(n,a);return i},X=e=>({id:e,title:"",icon:"",formattedAddress:[]}),Z="https://maps.apple.com/place?auid=",J="EVERYDAY",Q=86400,ee=e=>0===e.length,te=e=>1===e.length&&0===e[0].from&&e[0].to===Q,ie=e=>(e||[]).map((e=>({...e}))),ne=(e,t)=>!!e&&!!t&&(e===t||e.length===t.length&&e.every(((i,n)=>((e,t)=>!(!e||!t)&&e.from===t.from&&e.to===t.to)(e[n],t[n])))),ae=(e,t)=>{const i=[];for(const n of t.days.filter((e=>e!==J))){const t=e[n];i.length>0&&ne(t,i[i.length-1].hours)?i[i.length-1].days.push(n):i.push({days:[n],hours:ie(t)})}return i},oe=(e,t=!1)=>{const i={};for(const e of F)i[e]=[];if(1!==e.length||7!==e[0].days.length||t)for(const t of e)for(const e of t.days)i[e]=ie(t.hours);else i.EVERYDAY=ie(e[0].hours);return i},se=(e,t)=>{const i=e.concat(t).filter((({from:e,to:t})=>e!==t)).map((({from:e,to:t})=>({from:e,to:t<e?t+Q:t})));i.sort(((e,t)=>e.from-t.from||e.to-t.to));const n=i.reduce(((e,t)=>{const i=e[e.length-1];return i&&t.from<=i.to?i.to=Math.max(i.to,t.to):e.push(t),e}),[]);return n.reduce(((e,{from:t,to:i})=>e+i-t),0)>=Q?[{from:0,to:Q}]:n.map((({from:e,to:t})=>({from:e,to:t>Q?t-Q:t})))},le=(e,t,i)=>{const n=oe(e,!0);for(const e of t)for(const t of e.days)n[t]=[];for(const e of t)for(const t of e.days)n[t]=se(n[t]??[],e.hours);return ae(n,i)},re=e=>e.filter((({days:e,hours:t})=>e.length>0&&t.length>0)).map((({days:e,hours:t})=>`${(e=>1===e.length?e[0]:`${e[0]}-${e[e.length-1]}`)(e)}: ${(e=>e.map((({from:e,to:t})=>`${e}-${t}`)).join(", "))(t)}`)).join("; "),de=e=>0===e.length||1===e.length&&e[0].hours.length<=1;class pe{constructor(e){this.globals=e,this._days=[],this._onchange=e=>{}}get value(){if(!this._dayButtons)return[this._days];const e=[];let t=-1/0;return this._dayButtons.forEach((({button:i,day:n},a)=>{i.classList.contains("toggled")&&(a-t==1?e[e.length-1].push(n):e.push([n]),t=a)})),e}set value(e){this._days=e.flat()}set onchange(e){this._onchange=e}view(){const{localize:e}=this.globals;return this._dayButtons=e.days.map((t=>{const n=i("button",{className:"day-button",type:"button",onclick:()=>{n.classList.toggle("toggled"),this._onchange(this)}},e.weekDayInitial(t));return this._days.indexOf(t)>=0&&n.classList.add("toggled"),{button:n,day:t}})),i("div",{},this._dayButtons.map((({button:e})=>e)))}}let ue=0;class Ee{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.dayButtons=new pe(e),this.dayButtons.value=t.days,this.dayButtons.onchange=()=>{D(this.globals)},this.switchOpen24Hours=new $(e),this.switchOpen24Hours.value=te([{from:t.from,to:t.to}]),this.original=[t.from,t.to],this.edited=[t.from,t.to],this.originalString=this.toString()}view(){const{localize:e}=this.globals;this.timeInputs=["hours.opens","hours.closes"].map(((t,n)=>{const a="time-"+ue++,o=i("input",{ariaLabel:e.key(t),type:window.rapDebugDateFallback?"text":"time",dir:"auto",id:a});return"time"===o.type?(o.valueAsNumber=1e3*this.original[n],o.oninput=()=>{const e=o.valueAsNumber;isNaN(e)?(o.valueAsNumber=1e3*this.original[n],this.edited[n]=this.original[n]):this.edited[n]=e/1e3,D(this.globals)}):(o.setAttribute("type","text"),o.classList.toggle("ampm",e.hour12),o.value=e.hour(this.original[n]),o.onfocus=()=>{o.select()},o.onpointerup=e=>{e.preventDefault()},o.onchange=()=>{const t=function(e,t){const i=e.match(/(\d\d?)(?:\s*[:.]\s*(\d\d))?/);if(i){const n=!!e.match(new RegExp(`a\\.?m|${t.timeInfo.am}`,"i")),a=!!e.match(new RegExp(`p\\.?m|${t.timeInfo.pm}`,"i"));if(n&&a)return NaN;let o=n||a,s=parseInt(i[1],10),l=0;12===s&&n?(s=0,o=!1):s<12&&a&&(l=12);const r=parseInt(i[2]||"0",10);if((o&&s>0&&s<=12||!o&&s<24)&&r<60)return 60*(60*(s+l)+r)}return NaN}(o.value,e);this.edited[n]=isNaN(t)?this.original[n]:t,o.value=e.hour(this.edited[n]),D(this.globals)}),o}));const t=i("li",".hour-map",[e.h("label",{htmlFor:this.timeInputs[0].id},"hours.hours"),i("span",{},[this.timeInputs[0],e.h("label",{htmlFor:this.timeInputs[1].id},"—"),this.timeInputs[1]])]),n=()=>{if(t.classList.toggle("hidden",this.switchOpen24Hours.value),!this.switchOpen24Hours.value&&te([{from:this.edited[0],to:this.edited[1]}])){let e={from:36e3,to:64800};this.setEditedValue(0,e.from),this.setEditedValue(1,e.to)}D(this.globals)};return this.switchOpen24Hours.onchange=n,n(),i("li",".hour-maps",i("ul",{},[i("li",".day-buttons",this.dayButtons.view()),i("li",".toggle",this.switchOpen24Hours.wrapperView(e.key("hours.open24hours"))),t]))}setEditedValue(e,t){this.edited[e]=t;const i=this.timeInputs?.[e];i&&(i.valueAsNumber=1e3*t)}isEdited(){return this.toString()!==this.originalString}toString(){const e=this.dayButtons.value.flat();return e.length>0?`${e.join(", ")}: ${this.edited.join("-")}${this.switchOpen24Hours.value?"!":""}`:""}getEditedData(){const[e,t]=this.switchOpen24Hours.value?[0,Q]:this.edited;return{days:this.dayButtons.value,from:e,to:t}}encode(){}decode(){}dump(e){const t=this.isEdited()?"*":"",i=""===t?` (${this.originalString})`:"";return`${e}${t}HourMap${this.optional?"?":""}=${this.toString()}${i}`}}function he(e){if(!(e instanceof Ee))throw new Error("Component is not of type HourRange");return e}class ce{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.parentHours=null,this.addGroupView=null,this.summary=_e(t.summary??e.modalData?.summary);const i=!!this.template?.summary;this.hoursGroups=this.summary.map((e=>e.hours.map((t=>this.createHourGroup([e.days],t,i))))).flat(),0===this.hoursGroups.length&&this.addHourGroup([]),this.addGroup=new Oe(e,{inputs:[{type:"button",label:"hours.add",action:()=>{this.addHours()}}]},!1),this.originalString=this.toString()}createHourGroup(e,t,i=!1){let n=[{type:"hourRange",days:e,from:t.from,to:t.to}];i||n.push({type:"button",label:"hours.remove",destructive:!0,action:()=>this.removeHourGroup(a)});const a=new Oe(this.globals,{inputs:n},!1);return a}async addHours(){const e=this.hoursGroups[this.hoursGroups.length-1]?.children[0],t=e?he(e).dayButtons.value:[];if(this.template?.summary){const e=await this.globals.bridge({name:"showModalHours",url:"index.html",title:this.globals.localize.key("hours.add"),modalData:{summary:[]}});e?.summary&&this.updateHours(e.summary)}else this.addHourGroup(t)}updateHours(e){const{localize:t}=this.globals;this.summary=le(this.getModalData().summary,e,t),this.parentHours?.summaryWasUpdated(this)}setSummary(e){this.summary=_e(e);for(const e of this.hoursGroups)e.getView()?.remove();const t=!!this.template?.summary;this.hoursGroups=this.summary.map((e=>e.hours.map((i=>this.createHourGroup([e.days],i,t))))).flat();const i=this.addGroupView?.parentElement;if(i)for(const e of this.hoursGroups)i.insertBefore(e.view(),i.firstChild)}addHourGroup(e){const t=this.createHourGroup(e,{from:36e3,to:64800});this.hoursGroups.push(t),this.addGroupView&&this.addGroupView.parentElement?.insertBefore(t.view(),this.addGroupView),D(this.globals)}removeHourGroup(e){const t=this.hoursGroups.findIndex((t=>t===e));t>=0&&(e.getView()?.remove(),this.hoursGroups.splice(t,1),D(this.globals))}view(e,t){for(const e of this.hoursGroups)t.push(e.view());return this.addGroupView=this.addGroup.view(),this.addGroupView.classList.add("add-hours"),t.push(this.addGroupView),null}isEdited(){return this.originalString!==this.toString()}toString(){return this.hoursGroups.map((e=>he(e.children[0]).toString())).join("; ")}getHourMaps(){const e=[];for(const t of this.hoursGroups){const i=t.children[0];i instanceof Ee&&e.push(i.getEditedData())}return e}getModalData(){return{summary:this.getHourMaps().flatMap((e=>e.days.map((t=>({days:t,hours:[{from:e.from,to:e.to}]})))))}}encode(){}decode(){}dump(e){return`${e}${this.isEdited()?"*":""}DayHours<${this.toString()}>`}}const _e=e=>e&&0!==e.length?e:[{days:[],hours:[{from:36e3,to:64800}]}];class me{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.parentHours=null,this.summary=t.summary,this.originalString=re(this.summary),this.addGroup=new Oe(e,{inputs:[{type:"button",label:"hours.add",action:()=>{this.addHours()}}]},!1)}view(e,t){const n=this.addGroup.view();return n.classList.add("add-hours"),t.push(n),this.element=i("li",".input-days",i("ul",{})),this.updateView(),this.element}updateView(){const e=this.globals.localize,t=t=>{const n=t.hours.map((({from:t,to:i})=>ge(t,i,e))),a=i("div",{className:"input-days-name",role:"button"},e.dayRange(t.days)),o=e.h("div",{className:"input-days-hours"},n?.length?n:"hours.closed");return[i("div",".input-days-row",[i("input",{type:"button",onclick:()=>this.editHours(t)}),i("div",".input-days-details",[a,o]),i("div",{className:"chevron",ariaHidden:!0},"")]),o]},n=this.element?.querySelector("ul");for(let e=n?.lastChild;e;){const t=e;e=t.previousSibling,t.remove()}for(const e of this.summary){const[a]=t(e);n?.appendChild(i("li",{},i("label",{},a)))}}isEdited(){return re(this.summary)!==this.originalString}async editHours(e){const t=this.summary.filter((t=>t===e||ne(e.hours,t.hours))),i=t.length>1?{days:t.map((e=>e.days)).flat(),hours:e.hours}:e,n=await this.globals.bridge({name:"showModalHours",url:"index.html",title:this.globals.localize.key("hours.modaltitle"),modalData:{summary:[i]}});n?.summary&&this.updateHours(n.summary,t)}async addHours(){const e=await this.globals.bridge({name:"showModalHours",url:"index.html",title:this.globals.localize.key("hours.add"),modalData:{summary:[]}});e?.summary&&this.updateHours(e.summary,[])}updateHours(e,t){const i=le(this.summary.filter((e=>t.indexOf(e)<0)),e,this.globals.localize);this.setSummary(i),this.parentHours?.summaryWasUpdated(this)}setSummary(e){this.summary=e,this.updateView()}encode(e,t){this.isEdited()&&this.forceEncode(e,t)}forceEncode(e,t){const i=window.mapsProtoDefinitions,n=i.FeedbackFieldKey,a=i.FeedbackBusinessHours.FeedbackHoursType,o=i.FeedbackDynamicFieldValueType,s=i.DayOfWeek,l=(e=>{const t=new Map,i=(e,i,n)=>{t.has(e)||t.set(e,new Map);const a=t.get(e);a?.has(i)||a?.set(i,[]),a?.get(i)?.push(n)};for(const t of F)for(const{from:n,to:a}of e[t]||[])a<n?(i(n,Q,t),i(0,a,O[t])):i(n,a,t);return Array.from(t.entries()).flatMap((([e,t])=>Array.from(t.entries()).map((([t,i])=>({days:i,timeRange:{from:e,to:t}})))))})(oe(this.summary));e.push({formId:t,parentFieldId:this.globals.parentId,name:n[this.template.key],value:{fieldValueType:o.FIELD_HOURS,hoursField:l.map((({days:e,timeRange:t})=>({hoursType:a.FEEDBACK_HOURS_NORMAL,weeklyHours:{day:e.map((e=>s[e])),timeRange:[t]}})))}})}decode(){}dump(e){const t=this.isEdited()?"*":"",i=re(this.summary);return`${e}${t}Days${this.optional?"?":""}<${i}>`}}const ge=(e,t,n)=>i("span",{},n.key(0===e&&t===Q?"hours.open24hours":"hours.fromto",{replace:{from:n.hour(e),to:n.hour(t)}}));class Ie{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional;const i=(e=>{const t=F.filter((e=>e!==J)),i={};for(const e of F)i[e]=[];for(const{days:n,timeRange:a}of e)for(const e of n)if(e===J)for(const e of t)i[e]?.push({...a});else i[e]?.push({...a});for(const e of F)i[e]?.sort(((e,t)=>e.from-t.from));for(const e of t){const t=i[e];if(t&&!ee(t)&&!te(t)){const n=t[t.length-1];if(n&&n.to===Q){const t=i[O[e]],a=t&&!ee(t)&&!te(t)&&0===t[0]?.from;t&&a&&(n.to=t[0].to,t.splice(0,1))}}}if(!i.EVERYDAY||0===i.EVERYDAY?.length){const e=i[t[0]],n=t.every((t=>ne(e,i[t])));e&&n&&(i.EVERYDAY=e.slice())}return i})(e.place?.businessHoursNormal??[]);let n=ae(i,e.localize);0===n.length&&(n=[{days:[],hours:[{from:36e3,to:64800}]}]);const a=de(n);this.daysGroup=new Oe(e,{inputs:[{type:"days",key:t.key,summary:n}]},a),this.days=function(e){if(!(e instanceof me))throw new Error("Component is not of type Days");return e}(this.daysGroup.children[0]),this.days.parentHours=this,this.dayHoursGroup=new Oe(e,{inputs:[{type:"dayHours",summary:n}]},!a),this.dayHours=function(e){if(!(e instanceof ce))throw new Error("Component is not of type DayHours");return e}(this.dayHoursGroup.children[0]),this.dayHours.parentHours=this}summaryWasUpdated(e){const t=e.summary;this.dayHours.setSummary(t),this.days.setSummary(t);const i=de(t);Ae([{group:this.daysGroup,isVisible:!i},{group:this.dayHoursGroup,isVisible:i}])}view(e,t){return t.push(this.daysGroup.view()),t.push(this.dayHoursGroup.view()),null}visibleGroup(){return this.daysGroup.isVisible()?this.daysGroup:this.dayHoursGroup}isEdited(){return this.visibleGroup().isEdited()}encode(e){this.daysGroup.encode(e)}decode(){}dump(e){return`${e}${this.isEdited()?"*":""}Hours${this.optional?"?":""}\n${this.visibleGroup().dump(e+"    ")}`}}class ye{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.label=e.localize.key(t.label)}view(){const e=this.template.destructive?".destructive":"",t=i("button",{type:"button",onclick:()=>{this.template.action()}},this.label);return i("li",`.button${e}`,t)}isEdited(){return!1}encode(){}decode(){}dump(e){return`${e}Button${this.optional?"?":""}<${this.label}>`}}class De{constructor(e,t){this.globals=e,this.template=t,this.optional=!1,this.element=null,this.options=(e.place?.transitInfo??[]).flatMap((e=>e.lines.map((t=>({domInput:null,system:e,line:t}))))),this.value=1===this.options.length?0:-1,this.children=be(e,t.next,-1===this.value)}view(e,t){for(const e of this.children)t.push(e.view());const n=i("li",".input-transit.checks",[i("ul",{},this.options.map(((t,n)=>{const a=i("input",{type:"radio",name:`${e}::${this.template.key}`,value:n.toString(),checked:this.value===n,onchange:()=>{this.setChosen(n,!0)}});return t.domInput=a,i("li",".check",[i("label",{},[a,i("span",".check-label",[i("img",{className:"transit-artwork",src:t.line.artworkURL}),i("span",{dir:"auto"},t.line.name)]),i("span",".check-glyph","✓")])])})))]);return this.element=n,n}setChosen(e,t){this.value=e;const i=e>-1?this.options[e]:null;i&&i.domInput&&(i.domInput.checked=!0);const n=e>=0,a=this.children.map((e=>({group:e,isVisible:n})));if(fe(a,this.element,t),i)for(const e of this.globals.didChooseTransitLine)e(i);D(this.globals)}isEdited(){return this.value>=0&&Le(this.getChildren())}isValid(){const e=this.getChildren();return this.optional||this.value>=0&&(0===e.length||e.every((e=>e.isValid())))}encode(e,t){const{template:{key:i},value:n}=this,a=window.mapsProtoDefinitions,o=a.FeedbackFieldKey,s=a.FeedbackDynamicFieldValueType,l=n>=0?this.options[n]:null;l&&e.push({formId:t,parentFieldId:this.globals.parentId,name:i?o[i]:void 0,value:{fieldValueType:s.FIELD_TRANSIT_LINE,transitLineField:{transitLineMuid:l.line.muid,transitLineName:l.line.name,transitSystemName:l.system.system}}});for(const t of this.getChildren())t.encode(e)}decode(e,t){const i=e.value?.transitLineField?.transitLineMuid,n=this.options.findIndex((e=>e.line.muid===i));n>=0&&this.setChosen(n,!1);for(const e of this.children)e.decode(t)}getChildren(e){return e||this.value>=0?this.children:[]}dump(e){const t=this.isEdited()?"*":"",i=this.getChildren().map((t=>t.dump(e+"    "))).join("\n"),n=i?"\n"+i:"",a=this.options.map((e=>e.line.muid)).join(","),o=`chosen:${this.value}, options:${a}`;return`${e}${t}Transit<${o}>${n}`}}class Te{constructor(e,t,i){this.globals=e,this.template=t,this.optional=!!t.optional,this.label=e.localize.key(i?.textLabel??t.label),this.domView=null,this.original=t.original??!1,this.initial=t.initial??t.original??!1,this.edited=this.initial;const n=new $(e);n.value=this.edited,n.onchange=()=>{this.setValue(n.value,!1)},this.input=n}view(e,t,n){if(this.domView)return this.domView;const a=this.input.wrapperView(this.label);return this.domView=i("li",".input-toggle.toggle",a),this.domView}getFocusable(){return this.input.view().checkbox}setValue(e,t=!0){this.edited=e,t&&(this.input.value=e),D(this.globals)}isEdited(){return this.template.editOriginal||this.edited!==this.original}encode(e,t){const i=window.mapsProtoDefinitions,n=i.FeedbackFieldKey,a=i.FeedbackDynamicFieldValueType,o=this.template.key,s=this.template.editOriginal,l=s?this.edited:this.original,r=s?void 0:this.edited;(s||l!==r)&&e.push({formId:t,parentFieldId:this.globals.parentId,name:o?n[o]:void 0,value:{fieldValueType:a.FIELD_BOOLEAN,booleanField:{original:l,edited:r}}})}decode(e){const t=this.template.editOriginal?e.value?.booleanField?.original:e.value?.booleanField?.edited;null!=t&&this.setValue(t)}dump(e){return`${e}${this.isEdited()?"*":""}Toggle${this.optional?"?":""}<${this.label}>="${this.edited}" ("${this.original}")`}}let Ne=0;const ve=["h2","input","button","[role=checkbox]","[role=button]",".card-legends"].join(",");class Oe{constructor(e,t,i,n=null){const{rootId:a,parentId:o,countryCode:s}=e,l=`${a}${o??""}[${Ne}]`;Ne+=1,this.globals=e,this.template=t,this.groupId=l,this.options=n,this.children=t.inputs.filter((e=>!e.countryDenyList?.includes(s))).map((t=>Fe(e,t,n))),this.optional=t.optional??this.options?.optional,this.element=null,this.transition=new A(!i,"group"+(t.hidden?" hidden":""),500)}view(){if(this.element)return this.element;const{template:e,options:t,children:n,groupId:a}=this,o=t?.title??e.title,s=this.globals.localize,l=this.globals.place?.entityName,r=this.globals.bridge,d=[],p=[],u=n.map((e=>{const i=e.view(a,d,t),n=e.legendView?.(a,d,t);if(n&&p.push(...n),window.rapDebug){const t="key"in e.template?e.template.key:"";i?.setAttribute("data-debug-key",t),i?.setAttribute("data-debug-form",this.groupId)}return i||[]})).flat();e.privacyLegend&&p.push(s.h("p","","legend.privacy",{replace:{LearnMoreLink:{key:"legend.privacy.link",wrap:e=>i("a",{href:"#",onclick:e=>{e.preventDefault(),r({name:"showPrivacy"})}},e)}}}));const E=o?i("h2",{},[s.h("span",{role:"text"},o,{transform:"uppercase",replace:{entityName:{text:l,wrap:e=>i("span",{dir:"auto"},e)}}})]):null,h=0===u.length&&0===p.length,c=i("div",{style:{transitionDuration:"500ms"}},[i("div",".card-group"+(h?".empty":""),[E,u.length?i("ul",".card",u):null,p.length?i("div",".card-legends",p):null]),...d]);return this.transition.setElement(c),this.element=c,this.element}getView(){return this.element}focus(){const e=this.element?.querySelector(ve),t=e;if(t){const e=t.tabIndex;t.tabIndex=e,t.focus()}}isEdited(){return this.children.some((e=>e.isEdited()))}isValid(){return this.optional||0===this.children.length||this.children.every((e=>"function"==typeof e.isValid?e.isValid():e.optional||e.isEdited()))}encode(e){for(const t of this.children){const i=t.template.countryEncodeDenyList;i&&i.includes(this.globals.countryCode)||t.encode(e,this.groupId)}}decode(e){const t=window.mapsProtoDefinitions.FeedbackFieldKey;for(const i of this.children){const n="key"in i.template?i.template.key:null;if(n){const a=t[n],o=e.findIndex((e=>e.formId===this.groupId&&e.name===a));o>-1&&(i.decode(e[o],e),e.splice(o,1))}}}isVisible(){return this.transition.visible}setVisible(e,t){if(!1!==t&&this.element){const t=e?"":`${this.element.offsetTop}px`;this.element.style.top=t}!0!==t&&this.transition.setVisible(e)}dump(e=""){const t=this.isEdited()?"*":"",i=this.optional?"?":"",n=this.children.map((t=>t.dump(e+"    "))).join("\n");return`${e}${t}Group${i}\n${n}`}}const Fe=(e,t,i)=>{switch(t.type){case"button":return new ye(e,t);case"calendar":return new M(e,t);case"categories":return new U(e,t);case"days":return new me(e,t);case"dayHours":return new ce(e,t);case"hourRange":return new Ee(e,t);case"hours":return new Ie(e,t);case"map":return new x(e,t);case"photos":return new P(e,t);case"radios":return new b(e,t);case"transit":return new De(e,t);case"tel":case"text":case"url":return new C(e,t,i);case"toggle":return new Te(e,t,i);case"navigationStep":return new V(e,t);case"amenity":return new z(e,t);case"place":return new j(e,t)}},Ae=e=>{for(const{group:t,isVisible:i}of e)t.setVisible(i,!0);for(const{group:t,isVisible:i}of e)t.setVisible(i,!1);const t=new Set(e.map((e=>e.group.globals)));for(const e of t)N(e)},be=(e,t,i)=>{const n=[];for(const a of o(t)){const t=I(e,a);if(t){const o="string"==typeof a?null:a;n.push(new Oe(e,t,!!i,o))}}return n},fe=async(e,t,i=!0)=>{Ae(e);const a=e.find((e=>e.isVisible)),o=a?.group.element??t;if(e.length>0&&i&&o){const e=document.getElementById("groups")?.offsetHeight,t=n(o).y;await((e,t,i)=>{const n=(i??document.body.scrollHeight)-window.innerHeight,a=Math.max(Math.min(e,n),0),o=window.scrollY,s=Math.abs(a-o),l=Math.min(s/.3,500);let r=null;return l<10?(window.scrollTo(window.scrollX,a),Promise.resolve()):new Promise((e=>{const t=i=>{r=r??i;const n=(i-r)/l,s=(d=Math.min(Math.max(n,0),1))*d/(d*d+(1-d)*(1-d));var d;const p=(a-o)*s+o;window.scrollTo(window.scrollX,p),n<1?window.requestAnimationFrame(t):e()};window.requestAnimationFrame(t)}))})(t,0,e),a?.group?.focus()}},Le=e=>0===e.length||e.some((e=>e.isEdited()))||e.every((e=>e.optional)),Ce={initial:["end","steps"],title:"navigation.title",groups:{end:{title:"navigation.arrival",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_UNKNOWN",single:"arrival"}]},steps:{title:"navigation.steps",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_UNKNOWN"}]}}},Se={inputs:[{type:"photos",key:"FEEDBACK_FIELD_KEY_PHOTOS",legend:"legend.description.2.photos-and-comments",optional:!0},{type:"text",label:"comment.placeholder",key:"FEEDBACK_FIELD_KEY_COMMENTS",isMultiline:!0,optional:!0}],privacyLegend:!0},Pe={inputs:[{type:"photos",key:"FEEDBACK_FIELD_KEY_PHOTOS",legend:"legend.description.2.photos"}],privacyLegend:!0},Ke={title:"comment.title",inputs:[{type:"text",label:"comment.placeholder",key:"FEEDBACK_FIELD_KEY_COMMENTS",isMultiline:!0}],privacyLegend:!0},we={inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"location.label",legendExpand:"location.label.expand"}]},xe={inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"location.entrypoint.label",legendExpand:"location.entrypoint.label.expand"}]},ke={title:"address.title",inputs:[{type:"text",label:"address.full",optional:!1,key:"FEEDBACK_FIELD_KEY_ADDRESS_FULL",isAddress:!0,original:"formattedAddress"}]},Be={title:"address.title",inputs:[{type:"text",label:"address.full",optional:!1,key:"FEEDBACK_FIELD_KEY_ADDRESS_FULL",isAddress:!0}]},Re={inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navdestination.entrance.driving",value:"FEEDBACK_FIELD_OPTION_ADDRESS_ENTRY_POINT_DRIVING",checked:"entranceDriving"},{label:"navdestination.entrance.walking",value:"FEEDBACK_FIELD_OPTION_ADDRESS_ENTRY_POINT_WALKING",checked:"entranceWalking"},{label:"navdestination.entrance.both",value:"FEEDBACK_FIELD_OPTION_ADDRESS_ENTRY_POINT_BOTH",checked:"entranceBoth"}]}]},Ye={title:"categories.title",inputs:[{type:"categories",label:"categories.add",key:"FEEDBACK_FIELD_KEY_POI_CATEGORY",original:"entityCategories"}]},Me={title:"hours.title",inputs:[{type:"hours",key:"FEEDBACK_FIELD_KEY_POI_HOURS"}]},Ue={title:"name.title",inputs:[{type:"text",label:"name.label",key:"FEEDBACK_FIELD_KEY_POI_NAME",original:"entityName"}]},He={title:"name.title",inputs:[{type:"text",label:"add.place.label.required",key:"FEEDBACK_FIELD_KEY_POI_NAME"}]},Ve={title:"street.private.label",inputs:[{type:"text",label:"street.private.label",key:"FEEDBACK_FIELD_KEY_STREET_NAME",original:"map-feature-name"}]},We={title:"add.street.label",inputs:[{type:"text",label:"add.street.label",key:"FEEDBACK_FIELD_KEY_STREET_NAME",original:"map-feature-name"}]},Ge={title:"add.neighborhood.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_NEIGHBORHOOD_NAME",label:"add.neighborhood.label"}]},$e={title:"add.transitstop.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_TRANSIT_POI_NAME",label:"add.transitstop.label"}]},ze={title:"add.bikewalkpath.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_BIKE_WALKING_PATH_NAME",label:"add.bikewalkpath.label"}]},je={title:"phone.title",inputs:[{type:"tel",label:"phone.label",key:"FEEDBACK_FIELD_KEY_POI_PHONE",original:"entityTelephone"}]},qe={title:"website.title",inputs:[{type:"url",label:"website.label",key:"FEEDBACK_FIELD_KEY_POI_WEBSITE",original:"entityURL"}]},Xe={inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"add.stopsign",value:"FEEDBACK_FIELD_OPTION_ADD_STOP_SIGN"},{label:"add.trafficlight",value:"FEEDBACK_FIELD_OPTION_ADD_TRAFFIC_LIGHT"},{label:"add.trafficcamera",value:"FEEDBACK_FIELD_OPTION_ADD_TRAFFIC_CAMERA"}]}]},Ze={inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"add.street",value:"FEEDBACK_FIELD_OPTION_ADD_STREET",next:["isNewDevelopment",{name:"extra",photosLegend:"add.street.comments",optional:!0}]},{label:"streetfeatures.surface",value:"FEEDBACK_FIELD_OPTION_ADD_STREET_SURFACE",next:["isNewDevelopment",{name:"extra",photosLegend:"streetfeatures.surface.photos.add",optional:!0}]},{label:"streetfeatures.lane",value:"FEEDBACK_FIELD_OPTION_ADD_STREET_LANE",next:["isNewDevelopment",{name:"extra",photosLegend:"streetfeatures.lane.photos",optional:!0}]},{label:"streetfeatures.crosswalk",value:"FEEDBACK_FIELD_OPTION_ADD_STREET_CROSSWALK",next:["isNewDevelopment",{name:"extra",photosLegend:"streetfeatures.crosswalk.photos.add",optional:!0}]},{label:"streetfeatures.median",value:"FEEDBACK_FIELD_OPTION_ADD_STREET_MEDIAN",next:["isNewDevelopment",{name:"extra",photosLegend:"streetfeatures.median.photos",optional:!0}]}]}]},Je={optional:!0,inputs:[{type:"toggle",key:"FEEDBACK_FIELD_KEY_IS_NEW_DEVELOPMENT",label:"add.development",editOriginal:!0,optional:!0,original:!1}]},Qe={inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"add.address",value:"FEEDBACK_FIELD_OPTION_ADD_ADDRESS",next:["addressInputNoPreFill","isNewDevelopment",{name:"photos",photosLegend:"add.address.comments",optional:!0}]},{label:"add.street",value:"FEEDBACK_FIELD_OPTION_ADD_STREET",next:[{name:"nameStreet",optional:!0},"isNewDevelopment",{name:"photos",photosLegend:"add.street.comments",optional:!0}]},{label:"add.trafficsign",value:"FEEDBACK_FIELD_OPTION_ADD_TRAFFIC_SIGN_LIGHT",next:["addTrafficSign",{name:"photos",photosLegend:"add.trafficsign.comments",optional:!0}]},{label:"add.place",value:"FEEDBACK_FIELD_OPTION_ADD_PLACE",next:["nameEmptyRequired",{name:"address",optional:!0},{name:"categories",optional:!0},{name:"hours",optional:!0},{name:"website",optional:!0},{name:"phone",optional:!0},{name:"photos",photosLegend:"add.place.comments",optional:!0}]},{label:"add.neighborhood",value:"FEEDBACK_FIELD_OPTION_ADD_NEIGHBORHOOD",next:[{name:"nameNeighborhood"},{name:"photos",photosLegend:"add.neighborhood.comments",optional:!0}]},{label:"add.transitstop",value:"FEEDBACK_FIELD_OPTION_ADD_TRANSIT_STOP",next:["nameTransitStop",{name:"photos",photosLegend:"add.transitstop.comments",optional:!0}]},{label:"add.bikewalkpath",value:"FEEDBACK_FIELD_OPTION_ADD_BIKE_WALK_PATH",next:[{name:"nameBikeWalkPath",optional:!0},{name:"photos",photosLegend:"add.bikewalkpath.comments",optional:!0}]},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_ADD_SOMETHING_ELSE",requireEditInNext:"all",next:"extra"}]}]},et={inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"add.address",value:"FEEDBACK_FIELD_OPTION_ADD_ADDRESS",next:["addressInputNoPreFill","isNewDevelopment",{name:"photos",photosLegend:"add.address.comments",optional:!0}]},{label:"add.trafficsign",value:"FEEDBACK_FIELD_OPTION_ADD_TRAFFIC_SIGN_LIGHT",next:["addTrafficSign",{name:"photos",photosLegend:"add.trafficsign.comments",optional:!0}]},{label:"add.place",value:"FEEDBACK_FIELD_OPTION_ADD_PLACE",next:["nameEmptyRequired",{name:"address",optional:!0},{name:"categories",optional:!0},{name:"hours",optional:!0},{name:"website",optional:!0},{name:"phone",optional:!0},{name:"photos",photosLegend:"add.place.comments",optional:!0}]},{label:"add.neighborhood",value:"FEEDBACK_FIELD_OPTION_ADD_NEIGHBORHOOD",next:[{name:"nameNeighborhood"},{name:"photos",photosLegend:"add.neighborhood.comments",optional:!0}]},{label:"add.transitstop",value:"FEEDBACK_FIELD_OPTION_ADD_TRANSIT_STOP",next:["nameTransitStop",{name:"photos",photosLegend:"add.transitstop.comments",optional:!0}]},{label:"add.bikewalkpath",value:"FEEDBACK_FIELD_OPTION_ADD_BIKE_WALK_PATH",next:[{name:"nameBikeWalkPath",optional:!0},{name:"photos",photosLegend:"add.bikewalkpath.comments.spr",optional:!0}]},{label:"add.streetfeatures",value:"FEEDBACK_FIELD_OPTION_ADD_STREET_FEATURES",next:"addStreetFeatures"},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_ADD_SOMETHING_ELSE",requireEditInNext:"all",next:"extra"}]}]},tt={title:"transit.line",inputs:[{type:"transit",key:"FEEDBACK_FIELD_KEY_TRANSIT_LINE",next:"transitLineIssue"}]},it={inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"transit.linename",value:"FEEDBACK_FIELD_OPTION_TRANSIT_LINE_NAME",next:["transitLineNameMissing",{name:"extra",photosLegend:"transit.linename.photos",optional:!0}]},{label:"transit.lineshape",value:"FEEDBACK_FIELD_OPTION_TRANSIT_LINE_SHAPE",next:{name:"extra",optional:!0}},{label:"transit.lineschedule",value:"FEEDBACK_FIELD_OPTION_TRANSIT_LINE_SCHEDULE",next:{name:"extra",photosLegend:"transit.lineschedule.photos",optional:!0}}]}]},nt={title:"transit.addtransitline.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_TRANSIT_POI_NAME",original:"transit-line-name",label:"transit.addtransitline.label"}]},at={initial:["type"],groups:{type:{inputs:[{type:"dayHours"}]}}},ot={navigationDriving:Ce,navigationWalking:Ce,navigationCycling:Ce,kitchenSink:{title:"Kitchen sink",initial:["radios","textEmpty","textFilled","textOverflow","textTelEmpty","textTelFilled","textUrl","textMultilineEmpty","textMultilineUnderflow","textMultilineExpanded","textMultilineOveflow","textAddress","photosEmpty","photos","photosOverflow","categoriesEmpty","categoriesOne","categoriesTwo","categoriesThree","map","hours","navigation","transit","toggle"],groups:{radios:{title:"Radios",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_UNKNOWN",options:[{label:"Option #1 of 2 (checked)",value:"FEEDBACK_FIELD_OPTION_CHOICE",checkedLiteral:!0},{label:"Option #2 of 2",value:"FEEDBACK_FIELD_OPTION_CHOICE"}]}]},textEmpty:{title:"Empty text input",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value"}]},textFilled:{title:"Filled text input",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:"entityName"}]},textOverflow:{title:"Overflowing text input",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:"structuredAddressThoroughfare"}]},textTelEmpty:{title:"Empty phone input",inputs:[{type:"tel",label:"Placeholder value",key:"FEEDBACK_FIELD_KEY_UNKNOWN"}]},textTelFilled:{title:"Filled phone input",inputs:[{type:"tel",label:"Placeholder value",key:"FEEDBACK_FIELD_KEY_UNKNOWN",original:"entityTelephone"}]},textUrl:{title:"Website",inputs:[{type:"url",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:"entityURL"}]},textMultilineEmpty:{title:"Multiline text, empty",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",isMultiline:!0}]},textMultilineUnderflow:{title:"Multiline text, underflow",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:"structuredAddressFullThoroughfare",isMultiline:!0}]},textMultilineExpanded:{title:"Multine line text, expanded",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:"structuredAddressUnit",isMultiline:!0}]},textMultilineOveflow:{title:"Multine line text, overflowing",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",isMultiline:!0,original:"structuredAddressPostCode"}]},textAddressEmpty:{title:"Address, empty",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",isAddress:!0}]},textAddress:{title:"Address",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",isAddress:!0,original:"formattedAddress"}]},photosEmpty:{title:"Photos (pick 0)",inputs:[{type:"photos",key:"FEEDBACK_FIELD_KEY_PHOTOS"}]},photos:{title:"Photos (pick 1)",inputs:[{type:"photos",key:"FEEDBACK_FIELD_KEY_PHOTOS"}]},photosOverflow:{title:"Photos (pick 42)",inputs:[{type:"photos",key:"FEEDBACK_FIELD_KEY_PHOTOS"}]},categoriesEmpty:{title:"Categories (empty)",inputs:[{type:"categories",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"categories.add"}]},categoriesOne:{title:"Categories",inputs:[{type:"categories",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"categories.add",originalLiteral:["3D Printing"]}]},categoriesTwo:{title:"Categories",inputs:[{type:"categories",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"categories.add",originalLiteral:["3D Printing","Lava field"]}]},categoriesThree:{title:"Categories",inputs:[{type:"categories",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"categories.add",originalLiteral:["3D Printing","Lava field","Zorbing"]}]},map:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"street.location",legendExpand:"street.location.expand",editOriginal:!0,nextShownIf:"hasFeatures",next:"mapChild"}]},mapChild:{title:"Map Child",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_UNKNOWN",options:[{label:"A",value:"FEEDBACK_FIELD_OPTION_CHOICE"},{label:"B",value:"FEEDBACK_FIELD_OPTION_CHOICE"},{label:"C",value:"FEEDBACK_FIELD_OPTION_CHOICE"}]}]},hours:{inputs:[{type:"hourRange",days:[],from:28800,to:50400},{type:"hourRange",days:[],from:54e3,to:7200},{type:"button",label:"hours.remove",destructive:!0,action:()=>{}}]},navigation:{title:"navigation.arrival",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0}]},dayHours:{inputs:[{type:"dayHours"}]},transit:{title:"transit.line",inputs:[{type:"transit",key:"FEEDBACK_FIELD_KEY_TRANSIT_LINE",next:"transitLineIssue"}]},toggle:{title:"add.development",inputs:[{type:"toggle",key:"FEEDBACK_FIELD_KEY_IS_NEW_DEVELOPMENT",label:"add.development"}]}},onload:e=>{const t=e.groups.reduce(((e,t)=>{if(t.children[0]instanceof P){const i=t.template.title?.match(/pick (\d+)/);if(i){const n=parseInt(i[1],10),a=t.element?.querySelector("button");if(n>0&&a)for(let t=0;t<n;++t)e.push(a)}}return e}),[]),i=()=>{const a=t.pop();return a?new Promise((t=>{e.didUpdateLayout.push((()=>{e.didUpdateLayout.pop(),t(null)}));const i=document.createEvent("Event");i.initEvent("click",!0,!0),a.dispatchEvent(i)})).then(i):(window.prompt=n,Promise.resolve())},n=window.prompt;return window.prompt=()=>"",i()}},...{address:{title:"issue.address",initial:["addressType"],groups:{addressType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"issue.location",value:"FEEDBACK_FIELD_OPTION_ADDRESS_LOCATION",next:["location",{name:"extra",photosLegend:"issue.location.photos",optional:!0}]},{label:"navdestination.entrance",value:"FEEDBACK_FIELD_OPTION_ADDRESS_ENTRY_POINT",next:["locationEntryPoint",{name:"entranceType",optional:!0},{name:"extra",photosLegend:"navdestination.entrance.photos",optional:!0}]},{label:"address.wrong",value:"FEEDBACK_FIELD_OPTION_ADDRESS_WRONG",next:[{name:"addressInput",title:""},{name:"extra",photosLegend:"address.wrong.photos",optional:!0}]}]}]},location:we,locationEntryPoint:xe,entranceType:Re,addressInput:ke,extra:Se}},addressAdd:{title:"issue.address.add",initial:["addressAddType","locationAdd","name",{name:"addressInput",optional:!0},{name:"categories",optional:!0},{name:"hours",optional:!0},{name:"website",optional:!0},{name:"phone",optional:!0},{name:"photos",photosLegend:"add.address.photos",optional:!0}],groups:{addressAddType:{hidden:!0,inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[],submit:{label:"add.place",value:"FEEDBACK_FIELD_OPTION_ADD_PLACE"}}]},locationAdd:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"add.location",legendExpand:"add.location.expand",optional:!0,editOriginal:!0}]},name:Ue,addressInput:ke,categories:Ye,hours:Me,website:qe,phone:je,photos:Pe}},addPinToMap:{title:"issue.add",initial:["addToMapPicker","addType"],groups:{addToMapPicker:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"add.location",legendExpand:"add.location.expand",optionalIf:"hasFeatures",editOriginal:!0}]},addType:Qe,addTrafficSign:Xe,nameEmptyRequired:He,nameStreet:We,address:ke,isNewDevelopment:Je,addressInputNoPreFill:Be,categories:Ye,hours:Me,website:qe,phone:je,nameNeighborhood:Ge,nameTransitStop:$e,nameBikeWalkPath:ze,extra:Se,photos:Pe}},addPinToMapSpr:{title:"issue.add",initial:["addToMapSprPicker","addTypeSpr"],groups:{addToMapSprPicker:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"add.location",legendExpand:"add.location.expand",optionalIf:"hasFeatures",editOriginal:!0}]},addTypeSpr:et,addStreetFeatures:Ze,addTrafficSign:Xe,nameEmptyRequired:He,address:ke,addressInputNoPreFill:Be,isNewDevelopment:Je,categories:Ye,hours:Me,website:qe,phone:je,nameNeighborhood:Ge,nameTransitStop:$e,nameBikeWalkPath:ze,extra:Se,photos:Pe}},addToMap:{title:"issue.add",initial:["addToMapPicker"],groups:{addToMapPicker:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"add.location",legendExpand:"add.location.expand",editOriginal:!0,next:"addType"}]},addType:Qe,addTrafficSign:Xe,nameEmptyRequired:He,nameStreet:We,address:ke,addressInputNoPreFill:Be,isNewDevelopment:Je,categories:Ye,hours:Me,website:qe,phone:je,nameNeighborhood:Ge,nameTransitStop:$e,nameBikeWalkPath:ze,extra:Se,photos:Pe}},addToMapSpr:{title:"issue.add",initial:["addToMapSprPicker"],groups:{addToMapSprPicker:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"add.location",legendExpand:"add.location.expand",editOriginal:!0,next:"addTypeSpr"}]},addTypeSpr:et,addStreetFeatures:Ze,addTrafficSign:Xe,nameEmptyRequired:He,address:ke,addressInputNoPreFill:Be,isNewDevelopment:Je,categories:Ye,hours:Me,website:qe,phone:je,nameNeighborhood:Ge,nameTransitStop:$e,nameBikeWalkPath:ze,extra:Se,photos:Pe}},businessPoiEnrichment:{title:"",initial:["businessPoiEnrichmentType"],groups:{businessPoiEnrichmentType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"businesspoienrichment.notrelevant",value:"FEEDBACK_FIELD_OPTION_BUSINESS_POI_ENRICHMENT_NOT_RELEVANT",next:[{title:"businesspoienrichment.comment",name:"comment",optional:!0}]},{label:"businesspoienrichment.inappropriate",value:"FEEDBACK_FIELD_OPTION_BUSINESS_POI_ENRICHMENT_INAPPROPRIATE",next:[{title:"businesspoienrichment.comment",name:"comment",optional:!0}]},{label:"businesspoienrichment.image",value:"FEEDBACK_FIELD_OPTION_BUSINESS_POI_ENRICHMENT_IMAGE_QUALITY",next:[{title:"businesspoienrichment.comment",name:"comment",optional:!0}]},{label:"businesspoienrichment.button",value:"FEEDBACK_FIELD_OPTION_BUSINESS_POI_ENRICHMENT_BUTTON",next:[{title:"businesspoienrichment.comment",name:"comment",optional:!0}]},{label:"businesspoienrichment.privacy",value:"FEEDBACK_FIELD_OPTION_BUSINESS_POI_ENRICHMENT_PRIVACY_CONCERN",next:[{title:"businesspoienrichment.comment",name:"comment",optional:!0}]},{label:"businesspoienrichment.legal",value:"FEEDBACK_FIELD_OPTION_BUSINESS_POI_ENRICHMENT_LEGAL_ISSUE",next:[{name:"businessPoiEnrichmentContact"},{title:"businesspoienrichment.comment",name:"comment",optional:!0}]},{label:"businesspoienrichment.somethingelse",value:"FEEDBACK_FIELD_OPTION_BUSINESS_POI_ENRICHMENT_SOMETHING_ELSE",next:[{title:"businesspoienrichment.comment",name:"comment",optional:!0}]}]}]},businessPoiEnrichmentContact:{title:"businesspoienrichment.contact",inputs:[{type:"text",label:"businesspoienrichment.contact",key:"FEEDBACK_FIELD_KEY_BUSINESS_POI_ENRICHMENT_LEGAL_CONTACT_INFO",initial:"userEmail"}]},comment:{inputs:[{type:"text",label:"comment.placeholder",legend:"legend.description.2.comments",key:"FEEDBACK_FIELD_KEY_COMMENTS",isMultiline:!0}],privacyLegend:!0}}},homeWorkSchool:{title:"issue.address",initial:["homeWorkSchoolType"],groups:{homeWorkSchoolType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"issue.location",value:"FEEDBACK_FIELD_OPTION_ADDRESS_LOCATION",next:["location",{name:"extra",photosLegend:"issue.location.photos",optional:!0}]},{label:"navdestination.entrance",value:"FEEDBACK_FIELD_OPTION_ADDRESS_ENTRY_POINT",next:["locationEntryPoint",{name:"entranceType",optional:!0},{name:"extra",photosLegend:"navdestination.entrance.photos",optional:!0}]}]}]},location:we,locationEntryPoint:xe,entranceType:Re,extra:Se}},locality:{title:"issue.place",initial:["localityType"],groups:{localityType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"issue.name",value:"FEEDBACK_FIELD_OPTION_LOCALITY_NAME",next:["localityName",{name:"extra",optional:!0}]},{label:"issue.location",value:"FEEDBACK_FIELD_OPTION_LOCALITY_PIN",next:["location",{name:"extra",optional:!0}]},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_LOCALITY_SOMETHING_ELSE",requireEditInNext:"all",next:"extra"}]}]},localityName:{title:"name.title",inputs:[{type:"text",label:"name.label",key:"FEEDBACK_FIELD_KEY_LOCALITY_NAME",original:"entityName"}]},location:we,extra:Se}},poi:{title:"issue.place",initial:["poiType"],groups:{poiType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"issue.name",value:"FEEDBACK_FIELD_OPTION_POI_NAME",next:[{name:"name"},{name:"extra",optional:!0}]},{label:"poi.location",value:"FEEDBACK_FIELD_OPTION_POI_ADDRESS",requireEditInNext:"allExceptLast",next:[{name:"location",optional:!0},{name:"address",optional:!0},{name:"extra",optional:!0}]},{label:"poi.phone",value:"FEEDBACK_FIELD_OPTION_POI_PHONE_OR_WEBSITE",requireEditInNext:"allExceptLast",next:[{name:"phone",optional:!0},{name:"website",optional:!0},{name:"extra",optional:!0}]},{label:"poi.hours",value:"FEEDBACK_FIELD_OPTION_POI_HOURS",next:[{name:"hours"},{name:"extra",optional:!0}]},{label:"poi.closed",value:"FEEDBACK_FIELD_OPTION_POI_CLOSED",next:[{name:"closed",optional:!0}]},{label:"poi.category",value:"FEEDBACK_FIELD_OPTION_POI_CATEGORY",next:[{name:"categories"},{name:"extra",optional:!0}]},{label:"poi.multiple",value:"FEEDBACK_FIELD_OPTION_POI_MULTIPLE",requireEditInNext:"all",next:[{name:"name",textLabel:"add.place.label",optional:!0},{name:"location",title:"location.title",optional:!0},{name:"address",optional:!0},{name:"phone",optional:!0},{name:"website",optional:!0},{name:"hours",optional:!0},{name:"closedTemporary",optional:!0},{name:"categories",optional:!0},{name:"containmentParent",optional:!0},{name:"containmentChild",optional:!0},{name:"applepay",optional:!0},{name:"extra",optional:!0}]}]}]},name:Ue,location:we,address:ke,phone:je,website:qe,hours:Me,closed:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",nextIfNoneChosen:{name:"extra",optional:!0},options:[{label:"poi.closed.permanently",value:"FEEDBACK_FIELD_OPTION_POI_CLOSED_PERMANENT",checked:"businessHoursPermanentClosure",next:{name:"extra",optional:!0}},{label:"poi.closed.temporary",value:"FEEDBACK_FIELD_OPTION_POI_CLOSED_TEMPORARY",checked:"businessHoursTemporaryClosureEnd",next:[{name:"reopening",optional:!0},{name:"extra",optional:!0}]},{label:"poi.closed.unsure",value:"FEEDBACK_FIELD_OPTION_POI_CLOSED_UNSURE",checked:"businessHoursTemporaryClosure",next:{name:"extra",optional:!0}}]}]},closedTemporary:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"poi.closed.temporary",value:"FEEDBACK_FIELD_OPTION_POI_CLOSED_TEMPORARY",checked:"businessHoursTemporaryClosureEnd",next:{name:"reopening",optional:!0}}]}]},reopening:{inputs:[{type:"calendar",label:"issue.reopening",key:"FEEDBACK_FIELD_KEY_POI_HOURS",original:"businessHoursTemporaryClosureEnd"}]},containmentParent:{title:"poi.containment.parent.title",inputs:[{type:"place",key:"FEEDBACK_FIELD_KEY_POI_CONTAINMENT_CHILD",original:"contains"}]},containmentChild:{title:"poi.containment.child.title",inputs:[{type:"place",key:"FEEDBACK_FIELD_KEY_POI_CONTAINMENT_PARENT",original:"containedIn"}]},applepay:{title:"poi.applepay.title",inputs:[{type:"amenity",key:"FEEDBACK_FIELD_KEY_POI_AMENITIES",amenities:[{type:"ACCEPTS_APPLE_PAY",label:"poi.applepay",original:"acceptsApplePay"}]}]},categories:Ye,extra:Se}},poiAdd:{title:"",initial:["addToMapType","nameInitial",{name:"addressLocation",optional:!0},{name:"commentInline",optional:!0},{name:"categories",optional:!0},{name:"hours",optional:!0},{name:"website",optional:!0},{name:"phone",optional:!0},{name:"photos",optional:!0}],groups:{addToMapType:{hidden:!0,inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[],submit:{label:"add.place",value:"FEEDBACK_FIELD_OPTION_ADD_PLACE"}}]},nameInitial:{title:"name.title",inputs:[{type:"text",label:"add.place.label.required",key:"FEEDBACK_FIELD_KEY_POI_NAME",initial:"entityName"}]},addressLocation:{title:"location.title",inputs:[{type:"text",label:"address.full",optional:!1,key:"FEEDBACK_FIELD_KEY_ADDRESS_FULL",isAddress:!0,original:"formattedAddress"}]},commentInline:{title:"comment.title",inputs:[{type:"text",label:"comment.placeholder",key:"FEEDBACK_FIELD_KEY_COMMENTS",isMultiline:!0}]},categories:Ye,photos:Pe,hours:Me,website:qe,phone:je}},poiFieldAddress:{title:"",focus:!0,initial:["poiFieldAddressType",{name:"address",title:""}],groups:{poiFieldAddressType:{hidden:!0,inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[],submit:{label:"poi.location",value:"FEEDBACK_FIELD_OPTION_POI_ADDRESS"}}]},address:ke}},poiFieldHours:{title:"",initial:["poiFieldHoursType",{name:"hours",title:""}],groups:{poiFieldHoursType:{hidden:!0,inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[],submit:{label:"poi.location",value:"FEEDBACK_FIELD_OPTION_POI_HOURS"}}]},hours:Me}},poiFieldPhone:{title:"",focus:!0,initial:["poiFieldPhoneType",{name:"phone",title:""}],groups:{poiFieldPhoneType:{hidden:!0,inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[],submit:{label:"poi.phone",value:"FEEDBACK_FIELD_OPTION_POI_PHONE_OR_WEBSITE"}}]},phone:je}},poiFieldWebsite:{title:"",focus:!0,initial:["poiFieldWebsiteType",{name:"website",title:""}],groups:{poiFieldWebsiteType:{hidden:!0,inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[],submit:{label:"poi.phone",value:"FEEDBACK_FIELD_OPTION_POI_PHONE_OR_WEBSITE"}}]},website:qe}},poiWrongAddress:{title:"",initial:["poiWrongAddressType"],groups:{poiWrongAddressType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"address.wrong",value:"FEEDBACK_FIELD_OPTION_POI_ADDRESS",next:[{name:"commentInlinePrivacy",optional:!0}]},{label:"address.correct",value:"FEEDBACK_FIELD_OPTION_POI_ADDRESS",next:["addressInput",{name:"commentInlinePrivacy",optional:!0}]}]}]},addressInput:ke,commentInlinePrivacy:Ke}},poiWrongHours:{title:"",initial:["poiWrongHoursType"],groups:{poiWrongHoursType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"hours.wrong",value:"FEEDBACK_FIELD_OPTION_POI_HOURS",next:[{name:"commentInlinePrivacy",optional:!0}]},{label:"hours.correct",value:"FEEDBACK_FIELD_OPTION_POI_HOURS",next:["hours",{name:"commentInlinePrivacy",optional:!0}]}]}]},hours:Me,commentInlinePrivacy:Ke}},poiWrongPhone:{title:"",initial:["poiWrongPhoneType"],groups:{poiWrongPhoneType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"phone.wrong",value:"FEEDBACK_FIELD_OPTION_POI_PHONE",next:[{name:"commentInlinePrivacy",optional:!0}]},{label:"phone.correct",value:"FEEDBACK_FIELD_OPTION_POI_PHONE",next:["phone",{name:"commentInlinePrivacy",optional:!0}]}]}]},phone:je,commentInlinePrivacy:Ke}},poiWrongWebsite:{title:"",initial:["poiWrongWebsiteType"],groups:{poiWrongWebsiteType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"website.wrong",value:"FEEDBACK_FIELD_OPTION_POI_WEBSITE",next:[{name:"commentInlinePrivacy",optional:!0}]},{label:"website.correct",value:"FEEDBACK_FIELD_OPTION_POI_WEBSITE",next:["website",{name:"commentInlinePrivacy",optional:!0}]}]}]},website:qe,commentInlinePrivacy:Ke}},street:{title:"issue.street",initial:["streetMapPicker"],groups:{streetMapPicker:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"street.location",legendExpand:"street.location.expand",editOriginal:!0,nextShownIf:"hasFeatures",next:"streetType"}]},streetType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"street.namewrong",value:"FEEDBACK_FIELD_OPTION_STREET_NAME_WRONG",next:["namePrivateStreet",{name:"extra",photosLegend:"street.name.comments",optional:!0}]},{label:"street.wrongway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY",next:["streetWrongWay",{name:"extra",optional:!0}]},{label:"street.private",value:"FEEDBACK_FIELD_OPTION_STREET_PRIVATE",next:[{name:"namePrivateStreet",optional:!0},{name:"extra",photosLegend:"street.private.comments",optional:!0}]},{label:"street.shapewrong",value:"FEEDBACK_FIELD_OPTION_STREET_SHAPE_WRONG",next:{name:"extra",optional:!0}},{label:"street.noentry",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY",next:"streetNoEntry"},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_STREET_SOMETHING_ELSE",requireEditInNext:"all",next:"extra"}]}]},namePrivateStreet:Ve,streetWrongWay:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"street.wrongway.oneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_ONE_WAY"},{label:"street.wrongway.notoneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_NOT_ONE_WAY"}]}]},streetNoEntry:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"street.noentry.blocked",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_BLOCKED",next:{name:"extra",photosLegend:"street.noentry.blocked.comments",optional:!0}},{label:"street.noentry.construction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_CONSTRUCTION",next:{name:"extra",photosLegend:"street.noentry.construction.comments",optional:!0}},{label:"street.noentry.turnnotallowed",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_TURN_NOT_ALLOWED",next:{name:"extra",photosLegend:"street.noentry.traffic.comments",optional:!0}},{label:"street.noentry.restriction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_RESTRICTION",next:{name:"extra",photosLegend:"street.noentry.traffic.comments",optional:!0}}]}]},extra:Se}},streetSpr:{title:"issue.street",initial:["streetSprMapPicker"],groups:{streetSprMapPicker:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"street.location.spr",legendExpand:"street.location.spr.expand",editOriginal:!0,nextShownIf:"hasFeatures",next:"streetSprType"}]},streetSprType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"street.namewrong",value:"FEEDBACK_FIELD_OPTION_STREET_NAME_WRONG",next:["namePrivateStreet",{name:"extra",photosLegend:"street.name.comments",optional:!0}]},{label:"street.wrongway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY",next:["streetWrongWay",{name:"extra",optional:!0}]},{label:"street.private",value:"FEEDBACK_FIELD_OPTION_STREET_PRIVATE",next:[{name:"namePrivateStreet",optional:!0},{name:"extra",photosLegend:"street.private.comments",optional:!0}]},{label:"street.noentry",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY",next:"streetNoEntry"},{label:"street.feature",value:"FEEDBACK_FIELD_OPTION_FEATURE_WRONG",next:"feature"},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_STREET_SOMETHING_ELSE",requireEditInNext:"all",next:"extra"}]}]},namePrivateStreet:Ve,streetWrongWay:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"street.wrongway.oneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_ONE_WAY"},{label:"street.wrongway.notoneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_NOT_ONE_WAY"}]}]},streetNoEntry:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"street.noentry.blocked",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_BLOCKED",next:{name:"extra",photosLegend:"street.noentry.blocked.comments",optional:!0}},{label:"street.noentry.construction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_CONSTRUCTION",next:{name:"extra",photosLegend:"street.noentry.construction.comments",optional:!0}},{label:"street.noentry.turnnotallowed",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_TURN_NOT_ALLOWED",next:{name:"extra",photosLegend:"street.noentry.traffic.comments",optional:!0}},{label:"street.noentry.restriction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_RESTRICTION",next:{name:"extra",photosLegend:"street.noentry.traffic.comments",optional:!0}}]}]},feature:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"street.shape",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_STREET",next:{name:"extra",optional:!0,photosLegend:"street.shape.photos"}},{label:"streetfeatures.surface",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_STREET_SURFACE",next:{name:"extra",optional:!0,photosLegend:"streetfeatures.surface.photos.report"}},{label:"streetfeatures.lane",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_LANE",next:{name:"extra",optional:!0,photosLegend:"streetfeatures.lane.photos"}},{label:"streetfeatures.crosswalk",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_CROSSWALK",next:{name:"extra",optional:!0,photosLegend:"streetfeatures.crosswalk.photos.report"}},{label:"streetfeatures.median",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_MEDIAN",next:{name:"extra",optional:!0,photosLegend:"streetfeatures.median.photos"}},{label:"streetfeatures.walkpath",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_WALK_PATH",next:{name:"extra",optional:!0,photosLegend:"streetfeatures.walkpath.photos"}}]}]},extra:Se}},navigationDrivingStep:{initial:["focused","navigationDrivingStepType"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},navigationDrivingStepType:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.driving.streetprivate",value:"FEEDBACK_FIELD_OPTION_STREET_PRIVATE",next:[{name:"streetNameDriving",optional:!0},{name:"extra",optional:!0}]},{label:"navigation.driving.wrongway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY",next:[{name:"navigationDrivingWrongWay"},{name:"extra",optional:!0}]},{label:"navigation.driving.noentry",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY",next:{name:"navigationDrivingNoEntry"}},{label:"navigation.driving.turnnotsafe",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_TURN_NOT_SAFE",scroll:!1,next:[{name:"extra",optional:!0}]},{label:"navigation.driving.laneguidance",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_LANE_GUIDANCE",next:[{name:"navigationDrivingLaneGuidance",optional:!0},{name:"extra",optional:!0}]},{label:"navigation.driving.streetnamewrong",value:"FEEDBACK_FIELD_OPTION_STREET_NAME_WRONG",next:[{name:"streetNameDriving"},{name:"extra",optional:!0}]},{label:"navigation.driving.lightsignwrong",value:"FEEDBACK_FIELD_OPTION_LIGHT_SIGN_WRONG",next:[{name:"navigationDrivingLightSignWrong"},{name:"extra",optional:!0}]},{label:"navigation.driving.else",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_SOMETHING_ELSE",requireEditInNext:"all",next:"extra"}]}]},streetNameDriving:{title:"navigation.driving.streetname",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_STREET_NAME",label:"navigation.driving.streetname",original:"structuredAddressThoroughfare"}]},navigationDrivingWrongWay:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.driving.wrongway.oneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_ONE_WAY"},{label:"navigation.driving.wrongway.notoneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_NOT_ONE_WAY"}]}]},navigationDrivingNoEntry:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.driving.blocked",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_BLOCKED",next:{name:"extra",optional:!0}},{label:"navigation.driving.construction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_CONSTRUCTION",next:{name:"extra",optional:!0}},{label:"navigation.driving.turnnotallowed",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_TURN_NOT_ALLOWED",next:{name:"extra",optional:!0}},{label:"navigation.driving.restriction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_RESTRICTION",next:{name:"extra",photosLegend:"navigation.driving.restriction.photos",optional:!0}}]}]},navigationDrivingLaneGuidance:{title:"navigation.driving.laneguidance.correctlane",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_LANE_GUIDANCE_CORRECT_LANE",label:"navigation.driving.laneguidance.correctlane"}]},navigationDrivingLightSignWrong:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.driving.trafficlighterror",value:"FEEDBACK_FIELD_OPTION_TRAFFIC_LIGHT_ERROR"},{label:"navigation.driving.trafficlightmissing",value:"FEEDBACK_FIELD_OPTION_TRAFFIC_LIGHT_MISSING"},{label:"navigation.driving.stopsignerror",value:"FEEDBACK_FIELD_OPTION_STOP_SIGN_ERROR"},{label:"navigation.driving.stopsignmissing",value:"FEEDBACK_FIELD_OPTION_STOP_SIGN_MISSING"}]}]},extra:Se}},navigationWalkingStep:{initial:["focused","navigationWalkingStepType"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},navigationWalkingStepType:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.walking.allowed",value:"FEEDBACK_FIELD_OPTION_WALK_STEP_WALKING_NOT_ALLOWED",next:{name:"photos",photosLegend:"street.noentry.traffic.comments",optional:!0}},{label:"navigation.walking.safe",value:"FEEDBACK_FIELD_OPTION_WALK_STEP_WALKING_NOT_SAFE",next:{name:"photos",optional:!0}},{label:"navigation.walking.private",value:"FEEDBACK_FIELD_OPTION_STREET_PRIVATE",next:[{name:"streetNameWalking",optional:!0},{name:"photos",optional:!0}]},{label:"navigation.walking.entry",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY",next:"entry"},{label:"navigation.walking.name",value:"FEEDBACK_FIELD_OPTION_STREET_NAME_WRONG",next:["streetNameWalking",{name:"photos",photosLegend:"navigation.walking.name.photos",optional:!0}]},{label:"navigation.walking.else",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_SOMETHING_ELSE",requireEditInNext:"all",next:"extra"}]}]},streetNameWalking:{title:"navigation.walking.streetname",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_STREET_NAME",label:"navigation.walking.streetname",original:"structuredAddressThoroughfare"}]},entry:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.walking.entry.blocked",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_BLOCKED",next:{name:"photos",photosLegend:"street.noentry.blocked.comments",optional:!0}},{label:"navigation.walking.entry.construction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_CONSTRUCTION",next:{name:"photos",photosLegend:"street.noentry.construction.comments",optional:!0}}]}]},photos:Pe,extra:Se}},navigationCyclingStep:{initial:["focused","navigationCyclingStepType"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},navigationCyclingStepType:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.cycling.bikingnotallowed",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_BIKING_NOT_ALLOWED",scroll:!1,next:{name:"privacy",optional:!0}},{label:"navigation.cycling.bikingnotsafe",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_BIKING_NOT_SAFE",scroll:!1,next:{name:"privacy",optional:!0}},{label:"navigation.cycling.elevationwarning",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_ELEVATION_WARNING",next:"elevationwarning"},{label:"navigation.cycling.dismount",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_DISMOUNT",next:"dismount"},{label:"navigation.cycling.wrongway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY",next:"navigationCyclingWrongWay"},{label:"navigation.cycling.noentry",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY",next:"navigationCyclingNoEntry"},{label:"navigation.cycling.laneguidance",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_LANE_GUIDANCE",next:{name:"navigationCyclingLaneGuidance",optional:!0}},{label:"navigation.cycling.streetnamewrong",value:"FEEDBACK_FIELD_OPTION_STREET_NAME_WRONG",next:"streetNameCycling"},{label:"navigation.driving.lightsignwrong",value:"FEEDBACK_FIELD_OPTION_LIGHT_SIGN_WRONG",next:"navigationCyclingLightSignWrong"},{label:"navigation.cycling.else",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_SOMETHING_ELSE",requireEditInNext:"all",next:"extra"}]}]},elevationwarning:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.elevationwarningadd",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_ELEVATION_WARNING_ADD"},{label:"navigation.cycling.elevationwarningremove",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_ELEVATION_WARNING_REMOVE"}]}],privacyLegend:!0},dismount:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.dismountadd",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_DISMOUNT_ADD"},{label:"navigation.cycling.dismountremove",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_DISMOUNT_REMOVE"}]}],privacyLegend:!0},navigationCyclingWrongWay:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.wrongway.oneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_ONE_WAY"},{label:"navigation.cycling.wrongway.notoneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_NOT_ONE_WAY"}]}],privacyLegend:!0},navigationCyclingNoEntry:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.noentry.blocked",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_BLOCKED",next:{name:"photos",photosLegend:"navigation.cycling.noentry.blocked.photos",optional:!0}},{label:"navigation.cycling.noentry.construction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_CONSTRUCTION",next:{name:"photos",photosLegend:"navigation.cycling.noentry.construction.photos",optional:!0}},{label:"navigation.cycling.noentry.turnnotallowed",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_TURN_NOT_ALLOWED",next:{name:"photos",photosLegend:"navigation.cycling.noentry.turnnotallowed.photos",optional:!0}},{label:"navigation.cycling.noentry.restriction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_RESTRICTION",next:{name:"extra",photosLegend:"navigation.cycling.noentry.restriction.photos",optional:!0}},{label:"street.private",value:"FEEDBACK_FIELD_OPTION_STREET_PRIVATE",next:{name:"photos",photosLegend:"street.private.comments",optional:!0}}]}]},navigationCyclingLaneGuidance:{title:"navigation.cycling.laneguidance.correctlane",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_LANE_GUIDANCE_CORRECT_LANE",label:"navigation.cycling.laneguidance.correctlane",optional:!0}],privacyLegend:!0},streetNameCycling:{title:"navigation.cycling.streetname",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_STREET_NAME",label:"navigation.cycling.streetname",original:"structuredAddressThoroughfare"}],privacyLegend:!0},navigationCyclingLightSignWrong:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.trafficlighterror",value:"FEEDBACK_FIELD_OPTION_TRAFFIC_LIGHT_ERROR"},{label:"navigation.cycling.trafficlightmissing",value:"FEEDBACK_FIELD_OPTION_TRAFFIC_LIGHT_MISSING"},{label:"navigation.cycling.stopsignerror",value:"FEEDBACK_FIELD_OPTION_STOP_SIGN_ERROR"},{label:"navigation.cycling.stopsignmissing",value:"FEEDBACK_FIELD_OPTION_STOP_SIGN_MISSING"}]}],privacyLegend:!0},photos:Pe,extra:Se,privacy:{inputs:[],privacyLegend:!0}}},navigationDrivingArrival:{initial:["focused","navigationDrivingArrivalType"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},navigationDrivingArrivalType:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.driving.arrival.destination",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_LOCATION_WRONG",next:["location",{name:"extra",photosLegend:"add.address.photos",optional:!0}]},{label:"navigation.driving.arrival.entrance",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE",next:["locationEntryPoint",{name:"drivingEntrance",optional:!0},{name:"extra",photosLegend:"navigation.driving.arrival.entrance.photos",optional:!0}]}]}]},drivingEntrance:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.driving.arrival.entrance.driving",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_DRIVING"},{label:"navigation.driving.arrival.entrance.walking",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_WALKING"},{label:"navigation.driving.arrival.entrance.both",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_BOTH"}]}]},location:we,locationEntryPoint:xe,extra:Se}},navigationWalkingArrival:{initial:["focused","navigationWalkingArrivalType"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},navigationWalkingArrivalType:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.walking.arrival.destination",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_LOCATION_WRONG",next:["location",{name:"photos",photosLegend:"add.address.photos",optional:!0}]},{label:"navigation.walking.arrival.entrance",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE",next:["locationEntryPoint",{name:"walkingEntrance",optional:!0},{name:"photos",photosLegend:"navigation.driving.arrival.entrance.photos",optional:!0}]}]}]},walkingEntrance:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.walking.arrival.entrance.driving",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_DRIVING"},{label:"navigation.walking.arrival.entrance.walking",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_WALKING"},{label:"navigation.walking.arrival.entrance.both",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_BOTH"}]}]},location:we,locationEntryPoint:xe,photos:Pe}},navigationCyclingArrival:{initial:["focused","navigationCyclingArrivalType"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},navigationCyclingArrivalType:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.cycling.arrival.destination",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_LOCATION_WRONG",next:["location",{name:"photos",photosLegend:"add.address.photos",optional:!0}]},{label:"navigation.cycling.arrival.entrance",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE",next:["locationEntryPoint",{name:"cyclingEntrance",optional:!0},{name:"photos",photosLegend:"navigation.driving.arrival.entrance.photos",optional:!0}]}]}]},cyclingEntrance:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.arrival.entrance.driving",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_DRIVING"},{label:"navigation.cycling.arrival.entrance.walking",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_WALKING"},{label:"navigation.cycling.arrival.entrance.both",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_BOTH"}]}]},location:we,locationEntryPoint:xe,photos:Pe}},transit:{title:"issue.place",initial:["transitType"],groups:{transitType:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"issue.name",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_NAME",next:["nameTransit",{name:"photos",photosLegend:"issue.name.photos",optional:!0}]},{label:"transit.poilocation",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_LOCATION",next:["location",{name:"photos",optional:!0}]},{label:"transit.poientrance",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_ENTRANCE",next:["transitEntrance",{name:"extra",photosLegend:"transit.poientrance.photos",optional:!0}]},{label:"transit.poiexit",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_EXIT",next:["exit",{name:"extra",photosLegend:"transit.poiexit.photos",optional:!0}]},{label:"transit.lineinfowrong",value:"FEEDBACK_FIELD_OPTION_TRANSIT_LINE_INFO_WRONG",next:"transitLineInformation"},{label:"transit.addtransitline",value:"FEEDBACK_FIELD_OPTION_ADD_TRANSIT_LINE",next:["addName",{name:"extra",photosLegend:"transit.addtransitline.photos",optional:!0}]},{label:"poi.closed.temporary",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_CLOSED_TEMPORARILY",next:[{name:"temporaryClosure",optional:!0},{name:"extra",photosLegend:"transit.closed.photos",optional:!0}]},{label:"poi.closed.permanently",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_CLOSED_PERMANENTLY",checked:"businessHoursPermanentClosure",next:{name:"extra",photosLegend:"transit.closed.photos",optional:!0}},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_SOMETHING_ELSE",requireEditInNext:"all",next:"extra"}]}]},extra:Se,photos:Pe,location:we,transitEntrance:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"location.entrypoint.label",legendExpand:"location.entrypoint.label.expand"}]},exit:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"transit.poiexit.label",legendExpand:"transit.poiexit.label.expand"}]},nameTransit:{title:"transit.name",inputs:[{type:"text",label:"transit.name",key:"FEEDBACK_FIELD_KEY_POI_NAME",original:"entityName"}]},transitLineInformation:tt,transitLineIssue:it,transitLineNameMissing:nt,addName:{title:"transit.addtransitline.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_TRANSIT_POI_NAME",label:"transit.addtransitline.label"}]},temporaryClosure:{inputs:[{type:"calendar",label:"issue.reopening",key:"FEEDBACK_FIELD_KEY_TRANSIT_POI_HOURS",original:"businessHoursTemporaryClosureEnd"}]}}},transitLine:{title:"issue.transit.line",initial:[{name:"transitLineInformation",title:""}],groups:{extra:Se,transitLineInformation:tt,transitLineIssue:it,transitLineNameMissing:nt}},demoIndex:{initial:[],groups:{}},demoModal:{initial:[],groups:{}}}},st=async(e=null)=>{const t=e?.customWindow??window,n=e?.customDocument??t.document,a=(e=>{const t=e?.customWindow??window;return async e=>{if(!t.webkit?.messageHandlers.rapBundle.postMessage)throw new Error(`Bridge (${e.name}): Missing Bridge`);try{return await t.webkit.messageHandlers.rapBundle.postMessage(e)}catch(t){const i=t instanceof Error?t.message:`(As String) ${t}`;throw new Error(`Bridge (${e.name}): ${i}`)}}})(e),s=await a({name:"context",supportedLocales:E});s.locale=e?.customLocale??s.locale;const l=e?.customStrings??t.rapDebugCustomStrings,r=await(async(e,t)=>{if(t)return{currentMap:t,defaultMap:t,locale:e.locale,dir:m(e.locale)};try{const t=e.locale,i=document.head.dataset.cacheBustingSuffix??"",n=`./locales/${t}/strings.json${i}`,a=`./locales/en-US/strings.json${i}`;if("en-US"!==t){const[e,i]=await Promise.all([fetch(n).then((e=>e.json())).catch((e=>({}))),fetch(a).then((e=>e.json())).catch((e=>({})))]);return{currentMap:e,defaultMap:i,locale:t,dir:m(t)}}const o=await(await fetch(n)).json();return{currentMap:o,defaultMap:o,locale:t,dir:"ltr"}}catch(e){return{currentMap:{},defaultMap:{},locale:"en-US",dir:"auto"}}})(s,l),d=e?.modalData??s.modalData,p=d?.summary?at:ot[s.type],h=e?.flow??p,_=!e?.flow&&s.type.startsWith("navigation"),D=e?.expandAll?Object.keys(h.groups):h.initial,O={bridge:a,version:"(unfetched)",rootId:s.type,userEmail:s.email,locale:s.locale,countryCode:(s.countryCode??"US").toUpperCase(),uiIdiom:s.uiIdiom??"phone",osVersion:s.osVersion??"0.0",useAccessibilityLabels:s.useAccessibilityLabels??!1,navigation:e?.navigation??s.navigation,place:e?.place??s.place,templates:h.groups,groupNames:D,groups:[],photoIds:new Set,textMap:r,localize:c(r,s),isValid:!1,didValidate:[],didSetMapPicker:[],didChooseTransitLine:[],didUpdateLayout:[],modalData:d},F=O.navigation?.focused;if(F&&_){const e=F.directionsResponseIndex??0,t=F.routeIndex??0,i=F.stepId??0;O.parentId=`[${e}.${t}.${i}]`}for(const e of o(D)){const t=I(O,e),i="string"==typeof e?null:e;if(t){const e=new Oe(O,t,!1,i);O.groups.push(e)}else console.error("Missing Root Group: "+e)}if(n&&(n.documentElement.dir=r.dir,n.documentElement.lang=r.locale,n.documentElement.rtl="rtl"===r.dir),t.addEventListener("orientationchange",(()=>{for(const e of O.didUpdateLayout)e()})),t.rapSetMapPickerValue=e=>{for(const t of O.didSetMapPicker)t(e)},t.rapGlobals=O,t.rapDump=()=>(console.log(O.groups.map((e=>e.dump())).join("\n")),y(O)),t.rapDebugCurrentStrings=O.textMap.currentMap,t.rapGetData=T.bind(null,O,null),!e?.noView){const t=O.groups.map((e=>e.view()));if(h.title||s.titleOverrideKey){const e=O.place?.entityName,n=O.localize.h("span",{role:"text"},s.titleOverrideKey??h.title,{replace:{entityName:{text:e,wrap:e=>i("span",{dir:"auto"},e)}}});t.unshift(i("h1",{},n))}const a=i("form",{id:"groups",className:"flow"+(e?.flow?" modal":"")},t);a.addEventListener("pointerdown",(()=>{}),{passive:!0}),n?.body.appendChild(a)}if(e?.noEncodeDecodeData||u((async()=>{const e=await(async e=>{await(async()=>{if(g)return;const e=document.head.dataset.cacheBustingSuffix??"";await import("./protobuf.js"+e),g=!0})();const t=window.mapsProtoDefinitions;try{const i=atob(e||""),n=new Uint8Array(i.length);for(let e=0;e<i.length;e+=1)n[e]=i.charCodeAt(e);return t.FeedbackDynamicForm.decode(n)}catch(e){}return null})(s.initialData),i=e?.formFields;if(i)for(const e of O.groups)e.decode(i);t.rapGetData=T.bind(null,O,e)})),!e?.noFetchVersion){const e=`./version.json${document.head.dataset.cacheBustingSuffix??""}`;u((async()=>{O.version="(unknown)";try{const t=await fetch(e);O.version=await t.json()}catch(e){}}))}return N(O),h.onload&&await h.onload(O),h.focus&&v(O)?.focus(),a({name:"pageShown",success:!0}),n&&n.body&&t?.ResizeObserver&&new t.ResizeObserver((()=>{const e=n.body.offsetHeight??0;a({name:"pageResized",pageHeight:e})})).observe(n.body),O};(async()=>{const e=await st();e.modalData?.summary&&(window.rapGetModalData=()=>e.groups[0]?.children[0]?.getModalData?.()??null)})()})();