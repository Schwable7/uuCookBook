(()=>{"use strict";const e=e=>{if("string"==typeof e){const t=Array.from(e.match(/[#.][^#.]*/g)||[]);(e={}).classList=[];for(const i of t)"."===i.charAt(0)?e.classList?.push(i.substr(1)):"#"===i.charAt(0)&&(e.id=i.substr(1))}return e||{}},t=(t,i,n=[])=>{const a=document.createElement(t);(i instanceof Array||i instanceof Element)&&(n=n||i,i=null),i=e(i);for(const e in i){const t=i[e];if(e.startsWith("on")&&t)a.addEventListener(e.slice(2),t);else if("style"===e&&i.style)Object.assign(a.style,i.style);else if("classList"===e&&i.classList)for(const e of i.classList)e&&a.classList.add(e);else if("dataset"===e&&i.dataset)for(const e in i.dataset)a.setAttribute("data-"+e,i.dataset[e]);else"className"===e&&t?a.className=String(t):"ariaLabel"===e&&t?a.setAttribute("aria-label",t):"ariaHidden"===e&&t?a.setAttribute("aria-hidden","true"):"htmlFor"===e&&t?a.setAttribute("for",t):e&&(t||""===t)&&a.setAttribute(e,String(t))}return(n instanceof Array?n:[n]).map((e=>"string"==typeof e?document.createTextNode(e):e)).forEach((e=>e?a.appendChild(e):null)),a},i=e=>{let t=e?{x:e.offsetLeft,y:e.offsetTop}:{x:0,y:0};for(;e&&e.offsetParent;)e=e.offsetParent instanceof HTMLElement?e.offsetParent:null,t.x+=e?e.offsetLeft:0,t.y+=e?e.offsetTop:0;return t},n=(e,t,i=[])=>{const n=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.entries(t).forEach((([e,t])=>{n.setAttribute(e,String(t))})),"string"==typeof i?n.textContent=i:i.forEach((e=>n.appendChild(e))),n},a=(e,t,i)=>{const n=(i??document.body.scrollHeight)-window.innerHeight,a=Math.max(Math.min(e,n),0),o=window.scrollY,s=Math.abs(a-o),l=Math.min(s/.3,t);let r=null;return l<10?(window.scrollTo(window.scrollX,a),Promise.resolve()):new Promise((e=>{const t=i=>{r=r??i;const n=(i-r)/l,s=(d=Math.min(Math.max(n,0),1))*d/(d*d+(1-d)*(1-d));var d;const p=(a-o)*s+o;window.scrollTo(window.scrollX,p),n<1?window.requestAnimationFrame(t):e()};window.requestAnimationFrame(t)}))},o=e=>Array.isArray(e)?e:null!=e?[e]:[],s=(e,t,i)=>Math.max(t??e,Math.min(i??e,e));let l=new Set,r=new Set,d=!1;function p(){d=!1;let e=new Set(l);l.clear();for(const t of e)"function"==typeof t?t():t.performScheduledUpdate();let t=new Set(r);r.clear();for(const e of t)"function"==typeof e?e():e.performScheduledDraw()}const u=e=>{r.add(e),d||(window.requestAnimationFrame(p),d=!0)},E=["ar-SA","ca-ES","cs-CZ","da-DK","de-DE","el-GR","en-AU","en-GB","en-US","es-ES","es-MX","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","ms-MY","nb-NO","nl-NL","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-HK","zh-TW"],h={"ar-SA":6,"ca-ES":1,"cs-CZ":1,"da-DK":1,"de-DE":1,"el-GR":1,"en-AU":1,"en-GB":1,"en-US":0,"en-ZA":0,"es-ES":1,"es-MX":1,"fi-FI":1,"fr-CA":0,"fr-FR":1,"he-IL":0,"hi-IN":0,"hr-HR":1,"hu-HU":1,"id-ID":1,"it-IT":1,"ja-JP":0,"ko-KR":0,"ms-MY":1,"nb-NO":1,"nl-NL":1,"pl-PL":1,"pt-BR":0,"pt-PT":1,"ro-RO":1,"ru-RU":1,"sk-SK":1,"sv-SE":1,"th-TH":0,"tr-TR":1,"uk-UA":1,"vi-VN":1,"zh-CN":1,"zh-HK":0,"zh-TW":0};function c(e){const t=new Date(Date.UTC(2001,0,1,9)),i=new Date(Date.UTC(2021,0,1,21)),n=(e,t)=>t.format(e).replace(/\p{Nd}+\p{P}\p{Nd}+/u,"").trim(),a=new Intl.DateTimeFormat(e,{hour:"numeric",minute:"numeric",timeZone:"UTC",hour12:!0}),o=a.format(t),s=o.match(/\p{P}(?=\p{Nd})/u),l=o.match(/0/),r=n(t,a);return{am:r,pm:n(i,a),separator:s?.[0]??":",before:0===o.indexOf(r),zero:l?"0":"٠"}}let _=null,m=!1;const g=()=>(_||(_=async e=>{let t;try{t=await window.webkit.messageHandlers.rapBundle.postMessage(e)}catch(t){throw new Error(`Bridge (${e.name}): ${t.message}.`)}return t}),_),I=(e,t)=>e.templates["string"==typeof t?t:t?.name??""]||null,D=e=>{const t=e.groups.some((e=>e.isEdited()));return{isEdited:t,isValid:t&&e.groups.every((e=>e.isValid()))}},y=e=>{const{isValid:t}=D(e);if(t!==!!e.isValid){e.isValid=t;for(const i of e.didValidate)i(t);g()({name:"setValid",isValid:t})}return t},N=(e,t)=>{const i=t?[...t.formFields]:[],n=window.mapsProtoDefinitions;for(const t of e.groups)t.encode(i);const a=n.FeedbackDynamicForm.create({version:e.version,formFields:i}),o=n.FeedbackDynamicForm.encode(a).finish();return btoa(String.fromCharCode(...o))},T=(e,t=!0)=>{const i=Array.isArray(e)?e:e.groups;for(const e of i){const i=t&&e.isVisible();for(const t of e.children)"getChildren"in t&&t.getChildren&&T(t.getChildren(!0),i),"setVisible"in t&&t.setVisible&&t.setVisible(i)}},v={EVERYDAY:"EVERYDAY",SUNDAY:"MONDAY",MONDAY:"TUESDAY",TUESDAY:"WEDNESDAY",WEDNESDAY:"THURSDAY",THURSDAY:"FRIDAY",FRIDAY:"SATURDAY",SATURDAY:"SUNDAY"},O=Object.values(v);class F{constructor(e,t,i,n){this.visible=e,this.className=t,this.duration=i,this.element=n??null,n&&this.setElement(n),this.timerId=void 0,this.state="done"}setElement(e){this.element&&this.element.removeEventListener("transitionEnd",this),this.element=e,e.className=this.getClass()}updateState(e,t){return this.visible=e??this.visible,this.state=t??this.state,this.getClass()}getClass(){const e=this.visible?"show":"hide";return`${this.className} ${e} ${this.state}`}setVisible(e){const t=this.element;if(t){if(e!==this.visible){t.className=this.updateState(e,"start"),u((()=>{"start"===this.state&&(t.className=this.updateState(e,"running"),t.addEventListener("transitionEnd",this))}));const i=this.duration+100;window.clearTimeout(this.timerId),this.timerId=window.setTimeout((()=>this.end()),i)}}else this.updateState(e,"done")}end(){this.element&&(this.element.removeEventListener("transitionEnd",this),this.element.className=this.updateState(null,"done"),window.clearTimeout(this.timerId),this.timerId=void 0)}handleEvent(e){e.target===this.element&&this.end()}}class A{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.value=-1,this.domList=null;const i="function"==typeof t.options?t.options(e.place):t.options;this.options=i.map(((t,i)=>{const n=[],a=t.checked?.(e.place);this.value=a?i:this.value;for(const i of o(t.next)){const t=I(e,i),o="string"==typeof i?null:i;if(t){const i=new ue(e,t,!a,o);n.push(i)}}return{option:t,groups:n,inputDom:null,itemDom:null}})),this.originalValue=this.value}view(e,i){const{globals:n}=this,a=this.globals.localize;for(const[e,o]of this.options.entries()){const{option:s,groups:l}=o;o.inputDom=t("input",{type:"checkbox",value:e.toString(),checked:-1===this.value?s.checked?.(n.place):e===this.value,onchange:()=>{this.setChosen(e)}},[]),o.itemDom=t("li",".check",[t("label",{},[o.inputDom,a.h("span",".check-label",s.label),t("span",".check-glyph","")])]),window.rapDebug&&o.itemDom.setAttribute("data-debug-value",s.value??""),i.push(...l.map((e=>e.view())))}return this.domList=t("ul",{},this.options.map((({itemDom:e})=>e))),t("li",".input-radios.checks",[this.domList])}async setChosen(e){if(this.value===e)e=-1;else{const e=this.options[this.value]?.inputDom;e&&(e.checked=!1)}this.value=e;const t=b(this.globals.groups);g()({name:"sendAnalyticsEvent",values:t}),he(this.options.flatMap((({groups:t},i)=>{const n=i===e;return t.map((e=>({group:e,isVisible:n})))})));const n=e>-1?this.options[e]:null,o=n?.groups[0]?.element,s=n?.option.scroll??!0;if(n?.inputDom&&(n.inputDom.checked=!0),y(this.globals),o&&s){const e=i(o).y,t=document.getElementById("groups")?.offsetHeight;await a(e,pe,t)}}isEdited(){if(this.value<0)return!1;const e=this.getChildren();return 0===e.length?this.value!==this.originalValue||!!this.template.submit:e.some((e=>e.isEdited()))||e.every((e=>e.optional))}isValid(){if(this.optional||this.template.submit)return!0;if(this.value<0)return!1;const e=this.getChildren();if(0===e.length)return this.value!==this.originalValue;let t=!0;if(this.options[this.value].option.requireEditInNext){let i=e.slice();i.length>1&&i.pop(),t=i.some((e=>e.isEdited()))}return t&&e.every((e=>e.isValid()))}encode(e,t){const{template:{key:i,submit:n},options:a,value:o}=this,s=this.globals.localize,l=window.mapsProtoDefinitions,r=l.FeedbackFieldKey,d=l.FeedbackFieldOptionKey,p=l.FeedbackDynamicFieldValueType;if(o>=0||n){const l=e=>({key:e.value?d[e.value]:void 0,localizedText:s.key(e.label??""),defaultText:s.key(e.label??"",{defaultLocale:!0})}),u=n?l(n):null,E=a.map((e=>l(e.option)));e.push({formId:t,parentFieldId:this.globals.parentId,name:i?r[i]:void 0,value:{fieldValueType:p.FIELD_SINGLE_SELECT,singleSelectField:{options:E,selected:u??E[o]}}})}for(const t of this.getChildren())t.encode(e)}decode(e,t){const i=e.value?.singleSelectField?.options,n=e.value?.singleSelectField?.selected;if(n&&i){const e=i.findIndex((e=>e.key===n.key&&e.localizedText===n.localizedText&&e.defaultText===n.defaultText));this.setChosen(e)}for(const e of this.options)for(const i of e.groups)i.decode(t)}getChildren(e){const{options:t,value:i}=this,n=i>-1?t[i]:null;return e?t.flatMap((e=>e.groups)):n&&n.groups||[]}dump(e){const t=this.globals.localize,i=this.options[this.value]?.option,n=this.isEdited()?"*":"",a=this.template.optional?"?":"",o=i?.label??"",s=this.getChildren().map((t=>t.dump(e+"    "))).join("\n");return`${e}${n}Radios${a}<${t.key(o)??o}>${s?"\n"+s:""}`}}const b=(e,t=[])=>{for(const i of e)for(const e of i.children)e instanceof A&&e.value>-1&&t.push(e.options[e.value]?.option.value??""),"function"==typeof e.getChildren&&b(e.getChildren(!1),t);return t};class f{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.label="",this.multilineRows=0,this.domInput=null,this.domClear=null,this.domHiddenInput=null,this.original="function"==typeof t.original?t.original(e.place)??"":"",this.edited=this.original,"map-feature-name"===this.template.original&&e.didSetMapPicker.push((e=>{if(e.featureName){const t=this.edited===this.original;this.original=e.featureName,t&&this.setValue(e.featureName)}})),"transit-line-name"===this.template.original&&e.didChooseTransitLine.push((e=>{if(e.line.name){const t=this.edited===this.original;this.original=e.line.name,t&&this.setValue(e.line.name)}}))}view(e,i,n){const a=this.template,o=this.globals.localize,{isMultiline:s,isAddress:l}=a,r=n?.textLabel??a.label,d=this.edited||this.original,p=s||l;this.label=o.key(r);const u=[],E=o.h(p?"textarea":"input",{type:a.type,value:d,dir:"tel"!==a.type?"auto":"ltr",className:l?"address":"",oninput:()=>{this.setValue(E.value,!1)}},[],{localizePlaceholder:r});return p&&(this.domHiddenInput=t("p",{className:`${E.className} hidden-textarea`,dir:"auto",ariaHidden:!0},d),u.push(this.domHiddenInput)),E.value=d,this.domInput=E,u.push(E),p||(this.domClear=t("button",{type:"button",className:"clear"+(d?" visible":""),onclick:()=>{const e=E.value===this.original;this.setValue(e?"":this.original),E.focus()}}),u.push(this.domClear)),l&&(E.classList.add("address"),u.push(t("button",{type:"button",className:"search",onclick:async()=>{const e=g(),t=await e({name:"getAddress"});t&&t.formattedAddress&&this.setValue(t.formattedAddress.join("\n"))}},[t("div",".search-glyph",[])]))),t("li",".input-text"+(p?".multiline"+(l?".address":""):""),u)}legendView(e,i,n){const a=this.template;if(!a.legend)return null;const o=this.globals.localize;return[t("p",{},o.key("legend.description",{replace:{description1:o.key(n?.photosLegend??"legend.description.1.generic"),description2:o.key(a.legend)}}))]}setValue(e,t=!0){this.edited=e,this.domInput&&t&&(this.domInput.value=e),this.domHiddenInput&&(this.domHiddenInput.textContent=e+"​"),this.domClear&&this.domClear.classList.toggle("visible",!!e),y(this.globals)}isEdited(){return/\S/.test(this.edited)&&this.edited!==this.original}encode(e,t){const{template:{key:i},original:n,edited:a}=this,o=window.mapsProtoDefinitions,s=o.FeedbackFieldKey,l=o.FeedbackDynamicFieldValueType;n!==a&&e.push({formId:t,parentFieldId:this.globals.parentId,name:i?s[i]:void 0,value:{fieldValueType:l.FIELD_TEXT,textField:{original:n,edited:a}}})}decode(e){const t=e.value?.textField;t&&"string"==typeof t.edited&&this.setValue(t.edited)}dump(e){return`${e}${this.isEdited()?"*":""}Text${this.optional?"?":""}<${this.label}>="${this.edited}" ("${this.original}")`}}class L{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional}view(e,i,n){const a=this.globals.localize,o=t("button",{className:"add",type:"button",onclick:async()=>{let e=[];const t=g();try{e=await t({name:"getPhotos"})}catch(e){}for(const t of e)s.append(this.imageView(t)),this.globals.photoIds.add(t.id);y(this.globals);for(const e of this.globals.didUpdateLayout)e()}},[a.h("div",{className:"label"},"photo.label")]),s=t("ul",".previews",[t("li",{},o)]),l=[s];return this.photoList=s,t("li",".input-photos",l)}legendView(e,i,n){const a=this.template;if(!a.legend)return null;const o=this.globals.localize;return[t("p",{},o.key("legend.description",{replace:{description1:o.key(n?.photosLegend??"legend.description.1.generic"),description2:o.key(a.legend)}}))]}imageView(e){const i=this.globals.localize,n=t("li",".photo",[t("img",{src:e.url}),i.h("button",{className:"clear",onclick:()=>{n.remove(),this.globals.photoIds.delete(e.id),g()({name:"removePhoto",id:e.id}),y(this.globals)}},[],{localizeAriaLabel:"photo.label.remove"})]);return n}isEdited(){return(this.photoList?.childElementCount??0)>1}encode(){}decode(){}dump(e){return`${e}${this.isEdited()?"*":""}Photos${this.optional?"?":""}(${this.photoList?this.photoList.childElementCount-1:0})`}}let C=0;const w={id:"",x:0,y:0,widthPadding:38,widthPercent:100,height:200,opacity:0};class K{constructor(e,t){const n=C.toString();C+=1,this.globals=e,this.template=t,this.optional=!!t.optional,this.optionalWithFeature=!!t.optionalWithFeature,this.id=n,this.original=null,this.value=null,this.viewState={...w,id:n},this.element=null,this.features=[],e.didSetMapPicker.push((e=>{e.id===this.id&&this.setValue(e)})),e.didUpdateLayout.push((()=>{const e=this.viewState;if(e.opacity>0&&this.element){const{x:t,y:n}=i(this.element);if(t!==e.x||n!==e.y){const i="updateMapPickerView",a={...e,x:t,y:n};g()({name:i,start:e,end:a,duration:0}),this.viewState=a}}}))}view(){if(this.element)return this.element;const e=t("li",{className:"map-host"},[t("div",{onclick:()=>{window.rapSetMapPickerValue(S(this.id))}})]);return this.element=e,e}legendView(){const e=this.template;return[this.globals.localize.h("p",{},e.legend)]}setValue(e){const t=null===this.original;this.value=t?null:e,this.original=t?e:this.original,this.element&&this.element.classList.add(t?"original":"edited"),y(this.globals)}isOptional(){return this.optional||this.optionalWithFeature&&!!this.original?.featureHandle?.length}isEdited(){return!!this.value}isValid(){return this.isOptional()||this.isEdited()}encode(e,t){const{key:i,editOriginal:n}=this.template,a=window.mapsProtoDefinitions,o=a.FeedbackFieldKey,s=a.FeedbackDynamicFieldValueType;if(!this.original&&!this.value)return;const l=n&&this.value||this.original,r=n?void 0:this.value;e.push({formId:t,parentFieldId:this.globals.parentId,name:i?o[i]:void 0,value:{fieldValueType:s.FIELD_COORDINATE,locationField:{original:l&&{lat:l.latitude,lng:l.longitude},edited:r&&{lat:r.latitude,lng:r.longitude},originalTile:l&&{featureHandle:l.featureHandle,featureName:l.featureName},editedTile:r&&{featureHandle:r.featureHandle,featureName:r.featureName}}}})}decode(e){const t=e.value?.locationField,i=t?.edited,n=t?.editedTile?.featureHandle;i&&this.setValue({id:this.id,latitude:i.lat,longitude:i.lat,featureHandle:n??[]})}setVisible(e){const{element:t,viewState:n}=this,a=e?1:0,o=g();if(a!==n.opacity&&t){const{x:e,y:s}=i(t),l={...n,x:e,y:s,opacity:a};o({name:"updateMapPickerView",start:n,end:l,duration:1e3}),this.viewState=l}}dump(e){const t=this.value?`"${this.value.latitude}, ${this.value.longitude}, ${this.value.featureName??"(no feature name)"}"`:"(no value)",i=this.original?`"${this.original.latitude}, ${this.original.longitude}, ${this.original.featureName??"(no feature name)"}"`:"(no original value)",n=this.globals.localize;return`${e}${this.isEdited()?"*":""}Map${(this.isOptional()?"?":"")+(this.optionalWithFeature?"!":"")}<${n.key(this.template.legend)}>=${t} (${i})`}}const S=e=>({id:e,latitude:170*Math.random()-85,longitude:360*Math.random()-180,featureName:`Avenue ${String.fromCharCode(65+26*Math.random())}`,featureId:["ID"+Math.random()],featureHandle:[{identifier:Math.round(100*Math.random()),featureIndex:Math.round(100*Math.random()),featureTileX:Math.round(100*Math.random()),featureTileY:Math.round(100*Math.random()),featureTileZ:Math.round(100*Math.random()),style:Math.round(100*Math.random()),type:Math.round(100*Math.random())}]});let P=0;const x=60*(new Date).getTimezoneOffset()*1e3,k=(new Date).setHours(0,0,0,0)-x;class R{constructor(e,t){const i=t.original?.(e.place),n="number"==typeof i?i:NaN;this.globals=e,this.template=t,this.optional=!!t.optional,this.min=t.allowPast?null:k,this.originalDate=s(n,this.min),this.date=this.originalDate}view(){const e=this.template.label,i=this.globals.localize,n="date-"+P++,a=i.h("input",{id:n,type:"date"},[],{localizePlaceholder:"calendar.placeholder"});return"date"===a.type?a.oninput=()=>{this.setDate(a.valueAsNumber)}:(a.setAttribute("type","text"),a.onchange=()=>{this.setDate(new Date(Date.parse(a.value)).setHours(0,0,0,0)-x)}),this.inputDom=a,this.updateDomValue(),t("li",".calendar",t("div",{},[i.h("label",{htmlFor:n},e),a]))}isEdited(){return!isNaN(this.date)&&this.date!==this.originalDate}setDate(e){this.date=s(e,this.min),this.updateDomValue(),y(this.globals)}updateDomValue(){this.inputDom&&("date"===this.inputDom.type?this.inputDom.valueAsNumber=isNaN(this.date)?k:this.date:this.inputDom.value=isNaN(this.date)?"":this.globals.localize.date(this.date))}encode(e,t){const i=window.mapsProtoDefinitions,n=i.FeedbackFieldKey,a=i.FeedbackBusinessHours.FeedbackHoursType,o=i.FeedbackDynamicFieldValueType;var s;isNaN(this.date)||this.date===this.originalDate||e.push({formId:t,parentFieldId:this.globals.parentId,name:n[this.template.key],value:{fieldValueType:o.FIELD_HOURS,hoursField:[{hoursType:a.FEEDBACK_HOURS_TEMPORARY_CLOSURE,end:(s=this.date,Math.round(s/1e3-978307200))}]}})}decode(e){for(const t of e.value?.hoursField??[]){const e=t.end??NaN;this.setDate("number"==typeof e?e:e.toNumber())}}dump(e){return`${e}${this.isEdited()?"*":""}Calendar${this.optional?"?":""}<${isNaN(this.date)?"":this.inputDom?.value}>`}}class B{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.originals=new Set(t.original?.(e.place)??[]),this.categories=new Set(this.originals),this.domCategoryMap=new Map}view(){const e=g(),i=this.globals.localize;this.domCategories=t("ul",".input-categories-list.empty",[]);for(const e of this.categories)this.setCategory(e,!0);return t("li",".input-categories",[this.domCategories,t("div",".add",[i.h("button",{type:"button",onclick:async()=>{const t=await e({name:"getCategories",categories:Array.from(this.categories)});this.setCategories(new Set(t.categories)),y(this.globals)}},this.template.label)])])}categoryView(e){return t("li",{},[t("div",".title",t("span",{dir:"auto"},e)),t("button",{className:"clear",type:"button",onclick:()=>{this.setCategory(e,!1),y(this.globals)}})])}isEdited(){return Y(this.categories,this.originals).size>0||Y(this.originals,this.categories).size>0}setCategory(e,t){if(t?this.categories.add(e):this.categories.delete(e),this.domCategories){const i=0===this.categories.size;this.domCategories.classList.toggle("empty",i);const n=this.domCategoryMap.get(e);if(!n&&t){const t=this.categoryView(e);this.domCategoryMap.set(e,t),this.domCategories.appendChild(t)}else n&&!t&&(this.domCategoryMap.delete(e),n.remove())}}setCategories(e){for(const t of e)this.setCategory(t,!0);for(const t of Y(this.categories,e))this.setCategory(t,!1)}encode(e,t){const i=this.template.key,n=window.mapsProtoDefinitions,a=n.FeedbackFieldKey,o=n.FeedbackDynamicFieldValueType,s=Y(this.categories,this.originals),l=Y(this.originals,this.categories);(s.size>0||l.size>0)&&e.push({formId:t,parentFieldId:this.globals.parentId,name:a[i],value:{fieldValueType:o.FIELD_TEXT_LIST,textListField:{original:Array.from(this.originals),added:Array.from(s),removed:Array.from(l)}}})}decode(e){const t=e?.value?.textListField;if(t){this.originals=new Set(t.original);const e=new Set(t.original);for(const i of t.added||[])e.add(i);for(const i of t.removed||[])e.delete(i);this.setCategories(e)}}dump(e){return`${e}${this.isEdited()?"*":""}Categories${this.optional?"?":""}[${[...this.categories].join(", ")}]`}}const Y=(e,t)=>{const i=new Set(e);for(const n of e)t.has(n)&&i.delete(n);return i};class M{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional}view(){const e=this.globals.navigation;if(!e)return t("li",{},[]);const{single:i,showDetails:n}=this.template,{steps:a,focused:o}=e,s=a&&a[a.length-1],l=("arrival"===i&&s?[s]:i&&o?[o]:a||[]).map((e=>{const i="step"+(e.checked?" checked":"")+(n?" show-details":"");return t("li",{className:i,onclick:()=>{n||g()({name:"chooseNavigationStep",id:e.stepId})}},[t("div",".summary",[t("div",".icon",[t("img",{src:e.icon})]),t("div",".text",[t("h3",{className:"step-title",dir:"auto"},[e.title]),t("p",{className:"step-subtitle",dir:"auto"},[e.subtitle])]),t("div",".check"+(e.checked?".checked":""),[])]),e.map&&n?t("img",{src:e.map,className:"screen"},[]):null])})).reverse(),r=i?l:l.slice(1);return t("li",".input-navigation.show-"+(i||"all"),[t("ul",{},r)])}isEdited(){return!1}encode(e,t){const{key:i,single:n}=this.template,a=this.globals.navigation?.focused,o=window.mapsProtoDefinitions,s=o.FeedbackDynamicFieldValueType,l=o.FeedbackFieldKey;if("focused"===n&&a&&this.globals.parentId){const{stepId:n,routeStepImageId:o}=a,r=a.directionsResponseIndex,d=a.routeIndex,p=this.globals.photoIds.values().next(),u=p.done?null:p.value,E=a.userPhotoId||u;e.push({formId:t,name:i?l[i]:void 0,value:{fieldValueType:s.FIELD_ROUTE_STEP,routeStepField:{directionsResponseWaypointIndex:r,routeLegIndex:d,stepId:n,routeStepImageId:o,userPhotoId:E}},fieldId:this.globals.parentId})}}dump(e){return`${e}NavigationStep${this.optional?"?":""}`}decode(e){const t=e.value?.routeStepField;t&&t.userPhotoId&&this.globals.photoIds.add(t.userPhotoId)}}const U={width:102,height:62,knobRadius:27,knobStretch:7,onOffset:44,offOffset:4,stretchMinX:-.75,stretchMaxX:1.75};let V=0;class G{constructor(e){const{width:i,height:a,knobRadius:o}=U,s=n("rect",{class:"pill",width:i,height:a,rx:a/2,ry:a/2});this._knob=n("rect",{class:"knob",height:2*o,width:2*o,rx:o,ry:o,y:a/2-o}),this._checkbox=t("input",{type:"checkbox",hidden:!0,id:"switch-"+V++}),this._checkbox.addEventListener("change",this),this._element=t("div",".switch",[n("svg",{viewBox:`0 0 ${i} ${a}`},[s,this._knob]),this._checkbox]),this._element.addEventListener("pointerdown",this),this._rtl="rtl"===e.textMap.dir,this._value=!1,this._updateView(),this._onchange=e=>{}}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateView())}get element(){return this._element}set onchange(e){this._onchange=e}wrapperView(e){return t("div",".switch-label",[t("label",{htmlFor:this._checkbox.id},e),this._element])}handleEvent(e){const{stretchMinX:t,stretchMaxX:i}=U;switch(e.type){case"change":this._setValue(this._checkbox.checked),this._updateView();break;case"pointerdown":e.preventDefault(),window.addEventListener("pointermove",this),window.addEventListener("pointerup",this),window.addEventListener("pointercancel",this),this._gesture={on:this.value,stretch:!0,moved:!1,rect:this._element.getBoundingClientRect()},this._updateView();break;case"pointermove":{if(!this._gesture)break;e.preventDefault();const n=(this._rtl?this._gesture.rect.right-e.pageX:e.pageX-this._gesture.rect.left)/this._gesture.rect.width;(this._gesture.stretch&&(n<t||n>i)||!this._gesture.stretch&&n>=t&&n<=i)&&(this._gesture.stretch=!this._gesture.stretch,this._updateView());const a=n>=(this._gesture.on?.5:1);a!==this._gesture.on&&(this._gesture.on=a,this._gesture.moved=!0,this._updateView());break}case"pointerup":if(!this._gesture)break;this._gesture.on!==this.value?this._setValue(this._gesture.on):this._gesture.moved||this._setValue(!this.value);case"pointercancel":window.removeEventListener("pointermove",this),window.removeEventListener("pointerup",this),window.removeEventListener("pointercancel",this),delete this._gesture,this._updateView()}}_setValue(e){e!==this.value&&(this._value=e,this._onchange(this))}_updateView(){const{knobRadius:e,knobStretch:t,onOffset:i,offOffset:n}=U,a=this._gesture?.on??this.value,o=this._gesture?.stretch?t:0,s=2*(e+o),l=a?i-2*o:n;this._element.classList.toggle("on",a),this._element.classList.toggle("off",!a),this._checkbox.checked=a,this._knob.setAttribute("width",s.toString()),this._knob.setAttribute("x",l.toString())}}class H{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.amenities=t.amenities.map((t=>{const i=t.type,n=t.original?.(e.place)??!1,a=new G(e);return a.value=n,a.onchange=()=>{this.setValue(i,a.value,!1)},{type:i,label:t.label,input:a,edited:!1,value:n}}))}view(e){const i=this.globals.localize;return t("li",".checks",t("ul",{},this.amenities.map((e=>t("li",".toggle",e.input.wrapperView(i.key(e.label)))))))}setValue(e,t,i=!0){const n=this.amenities.find((t=>t.type===e));n&&(n.edited=!n.edited,n.value=t,i&&(n.input.value=t),y(this.globals))}isEdited(){return this.amenities.some((e=>e.edited))}encode(e,t){const i=window.mapsProtoDefinitions,n=i.FeedbackFieldKey,a=i.FeedbackDynamicFieldValueType,o=i.AmenityType,s=[],l=[];for(const e of this.amenities)e.edited&&e.value&&s.push(o[e.type]),e.edited&&!e.value&&l.push(o[e.type]);(s.length>0||l.length>0)&&e.push({formId:t,parentFieldId:this.globals.parentId,name:n[this.template.key],value:{fieldValueType:a.FIELD_AMENITIES,amenitiesField:{addedAmenities:s,removedAmenities:l}}})}decode(e){const t=window.mapsProtoDefinitions.AmenityType,i=new Set(e.value?.amenitiesField?.addedAmenities),n=new Set(e.value?.amenitiesField?.removedAmenities);for(const e of this.amenities){const a=i.has(t[e.type]),o=n.has(t[e.type]);(a||o)&&this.setValue(e.type,a&&!o)}}dump(e){return`${e}${this.isEdited()?"*":""}Amenities${this.optional?"?":""}[${this.amenities.map((e=>e.type+"="+e.value)).join(", ")}]`}}class W{constructor(e,t){const i=t.original?.(e.place)??[];this.globals=e,this.template=t,this.optional=!!t.optional,this.original=new Map(i.map((e=>[e.id,e]))),this.value=new Map(this.original),this.domPlaceList=null,this.domPlaces=new Map}view(e){const i=this.globals.localize;this.domPlaceList=t("ul",".input-place-list.empty",[]);for(const e of this.value.values())this.updatePlace(e,!0);return t("li",".input-place",[this.domPlaceList,t("div",".add",[i.h("button",{className:"input-place-add",type:"button",onclick:async()=>{const e=g(),t=await e({name:"getPoi"});this.updatePlace(t,!0)}},"place.add")])])}placeSummaryView(e){const i=this.globals.localize,n=e.subtitle??e.formattedAddress?.join(", ")??"";return t("li",".input-place-summary",[t("img",{src:e.icon},[]),t("div",{},[t("div",{className:"title",dir:"auto"},[e.title]),t("div",".subtitle",[t("div",{dir:"auto"},[n]),i.h("button",{onclick:()=>{g()({name:"showPoi",id:e.id})},type:"button"},"place.view")])]),t("button",{className:"clear",onclick:()=>{this.updatePlace(e,!1)}},[])])}updatePlace(e,t){t?this.value.set(e.id,e):this.value.delete(e.id);const i=this.domPlaces.get(e.id);if(!t&&i&&(i.remove(),this.domPlaces.delete(e.id)),t&&this.domPlaceList){const t=this.placeSummaryView(e);this.domPlaceList.appendChild(t),this.domPlaces.set(e.id,t)}if(this.domPlaceList){const e=0===this.domPlaceList.children.length;this.domPlaceList.classList.toggle("empty",e)}y(this.globals)}isEdited(){if(this.value.size!==this.original.size)return!0;for(const e of this.value.keys())if(!this.original.has(e))return!0;return!1}encode(e,t){const{template:{key:i}}=this,n=window.mapsProtoDefinitions,a=n.FeedbackFieldKey,o=n.FeedbackDynamicFieldValueType,s=$(this.value,this.original),l=$(this.original,this.value);(s.size>0||l.size>0)&&e.push({formId:t,parentFieldId:this.globals.parentId,name:a[i],value:{fieldValueType:o.FIELD_TEXT_LIST,textListField:{original:Array.from(this.original.keys()),added:Array.from(s.keys()),removed:Array.from(l.keys())}}})}decode(e){}dump(e){const t=this.optional?"?":"";return`${e}${this.isEdited()?"*":""}Place${t}(${this.value.size})`}}const $=(e,t)=>{const i=new Map;for(const[n,a]of e)t.has(n)||i.set(n,a);return i},z="EVERYDAY",j=86400,q=e=>0===e.length,X=e=>1===e.length&&0===e[0].from&&e[0].to===j,Z=e=>(e||[]).map((e=>({...e}))),J=(e,t)=>!(!e||!t)&&(e===t||e.every(((i,n)=>((e,t)=>!(!e||!t)&&e.from===t.from&&e.to===t.to)(e[n],t[n]))));class Q{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.edited=!1,this.calendar={},this.original={};for(const e of O)t.everyday===(e===z)&&(this.calendar[e]=Z(this.template.calendar[e]),this.original[e]=Z(this.template.calendar[e]));this.hoursDivsByDay={}}view(e,i){const n=this.globals.localize,a=e=>{const i=this.calendar[e]?.map((({from:e,to:t})=>te(e,t,n))),a=n.h("div",{className:"hours"},i?.length?i:"hours.closed");return[t("div",".day-hours",[t("input",{type:"button",onclick:()=>this.discloseDay(e)}),t("div",{className:"day"},n.weekDay(e)),a,t("div",".chevron",">")]),a]},o=(this.template.everyday?[z]:n.days).map((e=>{const[i,n]=a(e);return this.hoursDivsByDay[e]=n,t("li",{},t("label",{},i))}));return t("li",".disclosure",t("ul",{},o))}isEdited(){return this.edited}discloseDay(e){g()({name:"showModalHours",url:"modals/hours.html",title:this.globals.localize.weekDay(e),modalData:{hours:{day:e,hours:this.calendar[e]||[]}}}).then((t=>{this.updateDay(e,t)}))}updateDay(e,t){if(!t)return;const{localize:i}=this.globals,n=this.hoursDivsByDay[e];for(;n?.firstChild;)n.firstChild.remove();if(t.closed)this.calendar[e]=[],n?.appendChild(i.h("span",{},"hours.closed"));else{t.open24Hours?this.calendar[e]=[{from:0,to:j}]:this.calendar[e]=t.hours;for(const{from:t,to:a}of this.calendar[e]||[])n?.appendChild(te(t,a,i))}this.edited=!0,y(this.globals)}encode(e,t){var i,n;i=this.calendar,n=this.original,i&&n&&O.every((e=>i[e]===n[e]||J(i[e],n[e])))||this.forceEncode(e,t)}forceEncode(e,t){const i=window.mapsProtoDefinitions,n=i.FeedbackFieldKey,a=i.FeedbackBusinessHours.FeedbackHoursType,o=i.FeedbackDynamicFieldValueType,s=i.DayOfWeek,l=(e=>{const t=new Map,i=(e,i,n)=>{t.has(e)||t.set(e,new Map);const a=t.get(e);a?.has(i)||a?.set(i,[]),a?.get(i)?.push(n)};for(const t of O)for(const{from:n,to:a}of e[t]||[])a<n?(i(n,j,t),i(0,a,v[t])):i(n,a,t);return Array.from(t.entries()).flatMap((([e,t])=>Array.from(t.entries()).map((([t,i])=>({days:i,timeRange:{from:e,to:t}})))))})(this.calendar);e.push({formId:t,parentFieldId:this.globals.parentId,name:n[this.template.key],value:{fieldValueType:o.FIELD_HOURS,hoursField:l.map((({days:e,timeRange:t})=>({hoursType:a.FEEDBACK_HOURS_NORMAL,weeklyHours:{day:e.map((e=>s[e])),timeRange:[t]}})))}})}decode(){}dump(e){const t=this.isEdited()?"*":"",i=(this.template.everyday?[z]:this.globals.localize.days).map((e=>`[${this.calendar[e]?.map((({from:e,to:t})=>[e,t].join("-"))).join(", ")??""}]`)).join(", ");return`${e}${t}Days${this.optional?"?":""}<${i}>`}}function ee(e){if(!(e instanceof Q))throw new Error("Component is not of type Days");return e}const te=(e,i,n)=>t("span",{},n.key(0===e&&i===j?"hours.open24hours":"hours.fromto",{replace:{from:n.hour(e),to:n.hour(i)}}));class ie{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional;const i=(e=>{const t=O.filter((e=>e!==z)),i={};for(const e of O)i[e]=[];for(const{days:n,timeRange:a}of e)for(const e of n)if(e===z)for(const e of t)i[e]?.push({...a});else i[e]?.push({...a});for(const e of O)i[e]?.sort(((e,t)=>e.from-t.from));for(const e of t){const t=i[e];if(t&&!q(t)&&!X(t)){const n=t[t.length-1];if(n&&n.to===j){const t=i[v[e]],a=t&&!q(t)&&!X(t)&&0===t[0]?.from;t&&a&&(n.to=t[0].to,t.splice(0,1))}}}if(!i.EVERYDAY||0===i.EVERYDAY?.length){const e=i[t[0]],n=t.every((t=>J(e,i[t])));e&&n&&(i.EVERYDAY=e.slice())}return i})(e.place?.businessHoursNormal??[]),n=i.EVERYDAY;this.isOpenEveryday=!!(n&&n.length>0),this.wasOpenEveryday=this.isOpenEveryday,this.everyday=new ue(e,{inputs:[{type:"days",key:t.key,everyday:!0,calendar:i}]},!this.isOpenEveryday),this.weekdays=new ue(e,{inputs:[{type:"days",key:t.key,everyday:!1,calendar:i}]},this.isOpenEveryday)}days(){return this.isOpenEveryday?this.everyday:this.weekdays}view(e,i){const n=this.globals.localize,a=new G(this.globals);return a.value=this.isOpenEveryday,a.onchange=()=>{this._toggleOpenEveryday()},i.push(this.everyday.view()),i.push(this.weekdays.view()),t("li",".toggles",[t("ul",{},[t("li",".everyday.toggle",a.wrapperView(n.key("hours.samehours")))])])}isEdited(){return this.wasOpenEveryday!==this.isOpenEveryday||this.days().isEdited()}encode(e){this.days().encode(e)}decode(){}dump(e){return`${e}${this.isEdited()?"*":""}Hours${this.optional?"?":""}<${this.isOpenEveryday?"everyday":"weekdays"}>\n${this.days().dump(e+"    ")}`}_toggleOpenEveryday(){this.isOpenEveryday=!this.isOpenEveryday;const e=ee(this.everyday.children[0]);if(this.isOpenEveryday)0===e.calendar.EVERYDAY?.length&&e.updateDay(z,{closed:!1,hours:[{from:36e3,to:64800}],open24Hours:!1});else{const t=ee(this.weekdays.children[0]),i=this.globals.localize.days;if(i.every((e=>0===t.calendar[e]?.length))){const n=e.calendar.EVERYDAY??[],a={closed:q(n),hours:n,open24Hours:X(n)};for(const e of i)t.updateDay(e,a)}}he([{group:this.everyday,isVisible:this.isOpenEveryday},{group:this.weekdays,isVisible:!this.isOpenEveryday}]),y(this.globals)}}let ne=0;class ae{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.original=[t.from,t.to],this.edited=[t.from,t.to]}view(){const{localize:e}=this.globals,{from:i,to:n}=this.template;return this.inputs=[["hours.opens",i],["hours.closes",n]].map((([i,n],a)=>{const o="time-"+ne++,s=t("input",{type:"time",dir:"auto",id:o});return"time"===s.type?(s.valueAsNumber=1e3*this.original[a],s.oninput=()=>{const e=s.valueAsNumber;isNaN(e)?(s.valueAsNumber=1e3*this.original[a],this.edited[a]=this.original[a]):this.edited[a]=e/1e3,y(this.globals)}):(s.setAttribute("type","text"),s.value=e.hour(this.original[a]),s.onfocus=()=>{s.select()},s.onpointerup=e=>{e.preventDefault()},s.onchange=()=>{const t=function(e,t){const i=e.match(/(\d\d?)(?:\s*[:.]\s*(\d\d))?/);if(i){const n=!!e.match(new RegExp(`a\\.?m|${t.timeInfo.am}`,"i")),a=!!e.match(new RegExp(`p\\.?m|${t.timeInfo.pm}`,"i"));if(n&&a)return NaN;let o=n||a,s=parseInt(i[1],10),l=0;12===s&&n?(s=0,o=!1):s<12&&a&&(l=12);const r=parseInt(i[2]||"0",10);if((o&&s>0&&s<=12||!o&&s<24)&&r<60)return 60*(60*(s+l)+r)}return NaN}(s.value,e);this.edited[a]=isNaN(t)?this.original[a]:t,s.value=e.hour(this.edited[a]),y(this.globals)}),t("li",".hour-map",t("div",{},[e.h("label",{htmlFor:o},"number"==typeof i?"":i),s]))})),t("li",".hour-maps",t("ul",{},this.inputs))}isEdited(){return this.edited[0]!==this.original[0]||this.edited[1]!==this.original[1]}toString(){return this.edited.join("-")}getEditedData(){return{from:this.edited[0],to:this.edited[1]}}encode(){}decode(){}dump(e){const t=this.isEdited()?"*":"",i=""===t?` (${this.original.join("-")})`:"";return`${e}${t}HourMap${this.optional?"?":""}=${this.edited.join("-")}${i}`}}class oe{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional;const i=e.modalData?.hours?.hours??[];this.isClosed=q(i),this.isOpen24Hours=X(i),this.switchControls={},this.switchModels=[{label:"hours.open24hours",on:this.isOpen24Hours,onchange:e=>{this.isOpen24Hours=!this.isOpen24Hours,this.isOpen24Hours&&(this.isClosed=!1,this.switchControls["hours.closed"]&&(this.switchControls["hours.closed"].value=!1)),this.updateGroupsVisibility(),y(this.globals)}},{label:"hours.closed",on:this.isClosed,onchange:e=>{this.isClosed=!this.isClosed,this.isClosed&&(this.isOpen24Hours=!1,this.switchControls["hours.open24hours"]&&(this.switchControls["hours.open24hours"].value=!1)),this.updateGroupsVisibility(),y(this.globals)}}],this.hoursGroups=i.map(((e,t)=>this.createHourGroup(e,t))),this.hoursGroupsByIndex=[],this.addGroup=new ue(e,{inputs:[{type:"button",label:"hours.add",action:()=>{this.addHourGroup()}}]},this.isClosed||this.isOpen24Hours),this.originalString=this.toString()}createHourGroup(e,t){return new ue(this.globals,{inputs:[{type:"hourRange",from:e.from,to:e.to},{type:"button",label:"hours.remove",destructive:!0,action:()=>this.removeHourGroupAtIndex(t)}]},this.isClosed||this.isOpen24Hours)}addHourGroup(){const e=this.hoursGroupsByIndex.length,t=this.createHourGroup({from:36e3,to:64800},e);this.hoursGroups.push(t);const i=t.view();this.hoursGroupsByIndex.push({group:t,view:i}),this.addGroupView?.parentElement?.insertBefore(i,this.addGroupView),y(this.globals)}removeHourGroupAtIndex(e){const t=this.hoursGroupsByIndex[e];t&&(this.hoursGroupsByIndex[e]=null,this.hoursGroups.splice(this.hoursGroups.indexOf(t.group),1),t.view.remove(),y(this.globals))}view(e,i){const{localize:n}=this.globals;for(const e of this.hoursGroups){const t=e.view();this.hoursGroupsByIndex.push({group:e,view:t}),i.push(t)}this.addGroupView=this.addGroup.view(),i.push(this.addGroupView);const a=this.switchModels.map((({label:e,on:i,onchange:a})=>{const o=new G(this.globals);return o.value=i,o.onchange=a,this.switchControls[e]=o,t("li",".toggle",o.wrapperView(n.key(e)))}));return t("li",".toggles",[t("ul",{},a)])}updateGroupsVisibility(){const e=!this.isOpen24Hours&&!this.isClosed;if(e)if(0===this.hoursGroups.length)this.addHourGroup();else if(X(se(this.getHourMaps()))){for(let[e,t]of this.hoursGroupsByIndex.entries())null!==t&&(t.view.remove(),this.hoursGroupsByIndex[e]=null);this.hoursGroups=[],this.addHourGroup()}he(this.hoursGroups.map((t=>({group:t,isVisible:e}))).concat({group:this.addGroup,isVisible:e}))}isEdited(){return this.originalString!==this.toString()}toString(){const e=this.getModalData();return e.open24Hours?"open 24 hours":e.closed?"closed":e.hours.map((({from:e,to:t})=>`${e}-${t}`)).join(", ")}getHourMaps(){const e=[];for(const t of this.hoursGroups){const i=t.children[0];i instanceof ae&&e.push(i.getEditedData())}return e}getModalData(){const e=se(this.getHourMaps()),t=this.isOpen24Hours||X(e);return{closed:!this.isOpen24Hours&&(this.isClosed||q(e)),open24Hours:t,hours:e.map((e=>({...e})))}}encode(){}decode(){}dump(e){return`${e}${this.isEdited()?"*":""}DayHours<${this.toString()}>`}}function se(e){const t=e.filter((({from:e,to:t})=>e!==t)).map((({from:e,to:t})=>({from:e,to:t<e?t+j:t})));t.sort(((e,t)=>e.from-t.from||e.to-t.to));const i=t.reduce(((e,t)=>{const i=e[e.length-1];return i&&t.from<=i.to?i.to=Math.max(i.to,t.to):e.push(t),e}),[]);return i.reduce(((e,{from:t,to:i})=>e+i-t),0)>=j?[{from:0,to:j}]:i.map((({from:e,to:t})=>({from:e,to:t>j?t-j:t})))}class le{constructor(e,t){this.globals=e,this.template=t,this.optional=!!t.optional,this.label=e.localize.key(t.label)}view(){const e=this.template.destructive?".destructive":"",i=t("button",{type:"button",onclick:()=>{this.template.action()}},this.label);return t("li",`.button${e}`,i)}isEdited(){return!1}encode(){}decode(){}dump(e){return`${e}Button${this.optional?"?":""}<${this.label}>`}}class re{constructor(e,t){this.globals=e,this.template=t,this.optional=!1,this.options=(e.place?.transitInfo??[]).flatMap((e=>e.lines.map((t=>({domInput:null,system:e,line:t}))))),this.value=1===this.options.length?0:-1;const i=-1!==this.value;this.children=[];for(const n of o(t.next)){const t=I(e,n);if(t){const a="string"==typeof n?null:n;this.children.push(new ue(e,t,!i,a))}}}view(e,i){for(const e of this.children)i.push(e.view());return t("li",".checks",[t("ul",{},this.options.map(((i,n)=>{const a=t("input",{type:"radio",name:`${e}::${this.template.key}`,value:n.toString(),checked:this.value===n,onchange:()=>{this.setChosen(n,!0)}});return i.domInput=a,t("li",".check",[t("label",{},[a,t("span",".check-label",[t("img",{className:"transit-artwork",src:i.line.artworkURL}),i.line.name]),t("span",".check-glyph","✓")])])})))])}setChosen(e,t){this.value=e;const n=e>=0;he(this.children.map((e=>({group:e,isVisible:n}))));const o=e>-1?this.options[e]:null,s=this.children[0]?.element;if(o&&o.domInput&&(o.domInput.checked=!0),o&&t&&s&&a(i(s).y,pe),o)for(const e of this.globals.didChooseTransitLine)e(o);y(this.globals)}isEdited(){return!(this.value<0)&&this.getChildren().some((e=>e.isEdited()))}isValid(){return!(this.value<0)&&this.getChildren().every((e=>e.isValid()))}encode(e,t){const{template:{key:i},value:n}=this,a=window.mapsProtoDefinitions,o=a.FeedbackFieldKey,s=a.FeedbackDynamicFieldValueType,l=n>=0?this.options[n]:null;l&&e.push({formId:t,parentFieldId:this.globals.parentId,name:i?o[i]:void 0,value:{fieldValueType:s.FIELD_TRANSIT_LINE,transitLineField:{transitLineMuid:l.line.muid,transitLineName:l.line.name,transitSystemName:l.system.system}}});for(const t of this.getChildren())t.encode(e)}decode(e,t){const i=e.value?.transitLineField?.transitLineMuid,n=this.options.findIndex((e=>e.line.muid===i));n>=0&&this.setChosen(n,!1);for(const e of this.children)e.decode(t)}getChildren(e){return e||this.value>=0?this.children:[]}dump(e){const t=this.isEdited()?"*":"",i=this.getChildren().map((t=>t.dump(e+"    "))).join("\n"),n=i?"\n"+i:"",a=this.options.map((e=>e.line.muid)).join(","),o=`chosen:${this.value}, options:${a}`;return`${e}${t}Transit<${o}>${n}`}}let de=0;const pe=500;class ue{constructor(e,t,i,n=null){const{rootId:a,parentId:o,countryCode:s}=e,l=`${a}${o??""}[${de}]`;de+=1,this.globals=e,this.template=t,this.groupId=l,this.options=n,this.children=t.inputs.filter((e=>!e.countryDenyList?.includes(s))).map((t=>Ee(e,t))),this.optional=this.options?.optional,this.element=null,this.transition=new F(!i,"group"+(t.hidden?" hidden":""),pe)}view(){if(this.element)return this.element;const{template:e,options:i,children:n,groupId:a}=this,o=i?.title??e.title,s=this.globals.localize,l=this.globals.place?.entityName,r=[],d=[],p=n.map((e=>{const t=e.view(a,r,i);if("function"==typeof e.legendView){const t=e.legendView(a,r,i);t&&d.push(...t)}if(window.rapDebug){const i="key"in e.template?e.template.key:"";t.setAttribute("data-debug-key",i),t.setAttribute("data-debug-form",this.groupId)}return t}));let u={replace:{entityName:()=>t("span",{dir:"auto"},l)}};e.privacyLegend&&d.push(s.h("p","","legend.privacy",{replace:{LearnMoreLink:()=>s.h("a",{href:"#",onclick:e=>{e.preventDefault(),g()({name:"showPrivacy"})}},"legend.privacy.link")}}));const E=t("div",{style:{transitionDuration:pe+"ms"}},[t("div",".card-group",[o?s.h("h2",{},o,u):null,p.length?t("ul",".card",p.flat()):null,d.length?t("div",".card-legends",d):null]),...r]);return this.transition.setElement(E),this.element=E,this.element}isEdited(){return this.children.some((e=>e.isEdited()))}isValid(){return this.optional||0===this.children.length||this.children.every((e=>"function"==typeof e.isValid?e.isValid():e.optional||e.isEdited()))}encode(e){for(const t of this.children){const i=t.template.countryEncodeDenyList;i&&i.includes(this.globals.countryCode)||t.encode(e,this.groupId)}}decode(e){const t=window.mapsProtoDefinitions.FeedbackFieldKey;for(const i of this.children){const n="key"in i.template?i.template.key:null;if(n){const a=t[n],o=e.findIndex((e=>e.formId===this.groupId&&e.name===a));o>-1&&(i.decode(e[o],e),e.splice(o,1))}}}isVisible(){return this.transition.visible}setVisible(e,t){if(!1!==t&&this.element){const t=e?"":`${this.element.offsetTop}px`;this.element.style.top=t}!0!==t&&this.transition.setVisible(e)}dump(e=""){const t=this.isEdited()?"*":"",i=this.optional?"?":"",n=this.children.map((t=>t.dump(e+"    "))).join("\n");return`${e}${t}Group${i}\n${n}`}}const Ee=(e,t)=>{switch(t.type){case"button":return new le(e,t);case"calendar":return new R(e,t);case"categories":return new B(e,t);case"days":return new Q(e,t);case"dayHours":return new oe(e,t);case"hourRange":return new ae(e,t);case"hours":return new ie(e,t);case"map":return new K(e,t);case"photos":return new L(e,t);case"radios":return new A(e,t);case"transit":return new re(e,t);case"tel":case"text":return new f(e,t);case"navigationStep":return new M(e,t);case"amenity":return new H(e,t);case"place":return new W(e,t);case"url":return new f(e,t)}},he=e=>{for(const{group:t,isVisible:i}of e)t.setVisible(i,!0);for(const{group:t,isVisible:i}of e)t.setVisible(i,!1);const t=new Set(e.map((e=>e.group.globals)));for(const e of t)T(e)},ce={initial:["end","steps"],title:"navigation.title",groups:{end:{title:"navigation.arrival",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_UNKNOWN",single:"arrival"}]},steps:{title:"navigation.steps",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_UNKNOWN"}]}}},_e={inputs:[{type:"photos",legend:"legend.description.2.photos-and-comments",optional:!0},{type:"text",label:"comment.placeholder",key:"FEEDBACK_FIELD_KEY_COMMENTS",isMultiline:!0,optional:!0}],privacyLegend:!0},me={inputs:[{type:"photos",legend:"legend.description.2.photos"}],privacyLegend:!0},ge={inputs:[],privacyLegend:!0},Ie={inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"location.label"}]},De={inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"location.entrypoint.label"}]},ye={title:"address.title",inputs:[{type:"text",label:"address.full",optional:!1,key:"FEEDBACK_FIELD_KEY_ADDRESS_FULL",isAddress:!0,original:e=>e?.formattedAddress?.join("\n")??""}]},Ne={inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navdestination.entrance.driving",value:"FEEDBACK_FIELD_OPTION_ADDRESS_ENTRY_POINT_DRIVING",checked:e=>"driving"===e?.entranceType},{label:"navdestination.entrance.walking",value:"FEEDBACK_FIELD_OPTION_ADDRESS_ENTRY_POINT_WALKING",checked:e=>"walking"===e?.entranceType},{label:"navdestination.entrance.both",value:"FEEDBACK_FIELD_OPTION_ADDRESS_ENTRY_POINT_BOTH",checked:e=>"both"===e?.entranceType}]}]},Te={title:"categories.title",inputs:[{type:"categories",label:"categories.add",key:"FEEDBACK_FIELD_KEY_POI_CATEGORY",original:e=>e?.entityCategories}]},ve={title:"hours.title",inputs:[{type:"hours",key:"FEEDBACK_FIELD_KEY_POI_HOURS"}]},Oe={title:"name.title",inputs:[{type:"text",label:"name.label",key:"FEEDBACK_FIELD_KEY_POI_NAME",original:e=>e?.entityName}]},Fe={title:"phone.title",inputs:[{type:"tel",label:"phone.label",key:"FEEDBACK_FIELD_KEY_POI_PHONE",original:e=>e?.entityTelephone}]},Ae={title:"website.title",inputs:[{type:"url",label:"website.label",key:"FEEDBACK_FIELD_KEY_POI_WEBSITE",original:e=>e?.entityURL}]},be={title:"transit.line",inputs:[{type:"transit",key:"FEEDBACK_FIELD_KEY_TRANSIT_LINE",next:"transitLineIssue"}]},fe={inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"transit.linename",value:"FEEDBACK_FIELD_OPTION_TRANSIT_LINE_NAME",next:["transitLineNameMissing",{name:"extra",photosLegend:"transit.linename.photos",optional:!0}]},{label:"transit.lineshape",value:"FEEDBACK_FIELD_OPTION_TRANSIT_LINE_SHAPE",next:{name:"extra",optional:!0}},{label:"transit.lineschedule",value:"FEEDBACK_FIELD_OPTION_TRANSIT_LINE_SCHEDULE",next:{name:"extra",photosLegend:"transit.lineschedule.photos",optional:!0}}]}]},Le={title:"transit.addtransitline.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_TRANSIT_POI_NAME",original:"transit-line-name",label:"transit.addtransitline.label"}]},Ce={initial:["type"],groups:{type:{inputs:[{type:"dayHours"}]}}},we={navigationDriving:ce,navigationWalking:ce,navigationCycling:ce,kitchenSink:{title:"Kitchen sink",initial:["radios","textEmpty","textFilled","textOverflow","textTel","textUrl","textMultilineEmpty","textMultilineUnderflow","textMultilineExpanded","textMultilineOveflow","textAddress","photosEmpty","photos","photosOverflow","categoriesEmpty","categoriesOne","categoriesTwo","categoriesThree"],groups:{radios:{title:"Radios",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_UNKNOWN",options:[{label:"Option #1 of 2 (checked)",value:"FEEDBACK_FIELD_OPTION_CHOICE",checked:()=>!0},{label:"Option #2 of 2",value:"FEEDBACK_FIELD_OPTION_CHOICE"}]}]},textEmpty:{title:"Empty text input",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value"}]},textFilled:{title:"Filled text input",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:()=>"Text value"}]},textOverflow:{title:"Overflowing text input",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:()=>"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}]},textTel:{title:"Phone number",inputs:[{type:"tel",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:()=>"+1 (311) 555-2368"}]},textUrl:{title:"Website",inputs:[{type:"url",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:()=>"http://www.apple.com/"}]},textMultilineEmpty:{title:"Multiline text, empty",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",isMultiline:!0}]},textMultilineUnderflow:{title:"Multiline text, underflow",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:()=>"First line of text\nSecond line of text",isMultiline:!0}]},textMultilineExpanded:{title:"Multine line text, expanded",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",original:()=>"First line of text\nSecond line of text\nThird line of text\nFourth line of text\nFifth line of text\nSixth line of text\nSeventh line of text",isMultiline:!0}]},textMultilineOveflow:{title:"Multine line text, overflowing",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",isMultiline:!0,original:()=>"Lorem\nipsum\ndolor\nsit\namet,\nconsectetur\nadipiscing\nelit,\nsed\ndo\neiusmod\ntempor\nincididunt\nut\nlabore\net\ndolore\nmagna\naliqua.\nUt\nenim\nad\nminim\nveniam,\nquis\nnostrud\nexercitation\nullamco\nlaboris\nnisi\nut\naliquip\nex\nea\ncommodo\nconsequat.\nDuis\naute\nirure\ndolor\nin\nreprehenderit\nin\nvoluptate\nvelit\nesse\ncillum\ndolore\neu\nfugiat\nnulla\npariatur.\nExcepteur\nsint\noccaecat\ncupidatat\nnon\nproident,\nsunt\nin\nculpa\nqui\nofficia\ndeserunt\nmollit\nanim\nid\nest\nlaborum."}]},textAddressEmpty:{title:"Address, empty",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",isAddress:!0}]},textAddress:{title:"Address",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"Placeholder value",isAddress:!0,original:()=>"1 Infinite Loop\nCupertino, CA 95014-2083\nUnited States"}]},photosEmpty:{title:"Photos (pick 0)",inputs:[{type:"photos"}]},photos:{title:"Photos (pick 1)",inputs:[{type:"photos"}]},photosOverflow:{title:"Photos (pick 42)",inputs:[{type:"photos"}]},categoriesEmpty:{title:"Categories (empty)",inputs:[{type:"categories",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"categories.add"}]},categoriesOne:{title:"Categories",inputs:[{type:"categories",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"categories.add",original:()=>["3D Printing"]}]},categoriesTwo:{title:"Categories",inputs:[{type:"categories",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"categories.add",original:()=>["3D Printing","Lava field"]}]},categoriesThree:{title:"Categories",inputs:[{type:"categories",key:"FEEDBACK_FIELD_KEY_UNKNOWN",label:"categories.add",original:()=>["3D Printing","Lava field","Zorbing"]}]}},onload:e=>{const t=e.groups.reduce(((e,t)=>{if(t.children[0]instanceof L){const i=t.template.title?.match(/pick (\d+)/);if(i){const n=parseInt(i[1],10),a=t.element?.querySelector("button");if(n>0&&a)for(let t=0;t<n;++t)e.push(a)}}return e}),[]),i=()=>{const a=t.pop();return a?new Promise((t=>{e.didUpdateLayout.push((()=>{e.didUpdateLayout.pop(),t()}));const i=document.createEvent("Event");i.initEvent("click",!0,!0),a.dispatchEvent(i)})).then(i):(window.prompt=n,Promise.resolve())},n=window.prompt;return window.prompt=()=>"",i()}},...{address:{title:"issue.address",initial:["type"],groups:{type:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"issue.location",value:"FEEDBACK_FIELD_OPTION_ADDRESS_LOCATION",next:["location",{name:"extra",photosLegend:"issue.location.photos",optional:!0}]},{label:"navdestination.entrance",value:"FEEDBACK_FIELD_OPTION_ADDRESS_ENTRY_POINT",next:["locationEntryPoint",{name:"entranceType",optional:!0},{name:"extra",photosLegend:"navdestination.entrance.photos",optional:!0}]},{label:"address.wrong",value:"FEEDBACK_FIELD_OPTION_ADDRESS_WRONG",next:[{name:"addressInput",title:""},{name:"extra",photosLegend:"address.wrong.photos",optional:!0}]}]}]},location:Ie,locationEntryPoint:De,entranceType:Ne,addressInput:ye,extra:_e}},addressAdd:{title:"issue.address.add",initial:["type","locationAdd","name","addressInput",{name:"categories",optional:!0},{name:"hours",optional:!0},{name:"website",optional:!0},{name:"phone",optional:!0},{name:"photos",photosLegend:"add.address.photos",optional:!0}],groups:{type:{hidden:!0,inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[],submit:{label:"add.place",value:"FEEDBACK_FIELD_OPTION_ADD_PLACE"}}]},locationAdd:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"add.location",optional:!0}]},name:Oe,addressInput:ye,categories:Te,hours:ve,website:Ae,phone:Fe,photos:me}},addToMap:{title:"issue.add",initial:["map","type"],groups:{map:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"add.location",optionalWithFeature:!0,editOriginal:!0}]},type:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"add.address",value:"FEEDBACK_FIELD_OPTION_ADD_ADDRESS",next:["address",{name:"photos",photosLegend:"add.address.comments",optional:!0}]},{label:"add.street",value:"FEEDBACK_FIELD_OPTION_ADD_STREET",next:[{name:"street",optional:!0},{name:"photos",photosLegend:"add.street.comments",optional:!0}]},{label:"add.trafficsign",value:"FEEDBACK_FIELD_OPTION_ADD_TRAFFIC_SIGN_LIGHT",next:["trafficsign",{name:"photos",photosLegend:"add.trafficsign.comments",optional:!0}]},{label:"add.place",value:"FEEDBACK_FIELD_OPTION_ADD_PLACE",next:["name","address",{name:"categories",optional:!0},{name:"hours",optional:!0},{name:"website",optional:!0},{name:"phone",optional:!0},{name:"photos",photosLegend:"add.place.comments",optional:!0}]},{label:"add.neighborhood",value:"FEEDBACK_FIELD_OPTION_ADD_NEIGHBORHOOD",next:[{name:"neighborhood",optional:!0},{name:"photos",photosLegend:"add.neighborhood.comments",optional:!0}]},{label:"add.transitstop",value:"FEEDBACK_FIELD_OPTION_ADD_TRANSIT_STOP",next:["transitstop",{name:"photos",photosLegend:"add.transitstop.comments",optional:!0}]},{label:"add.bikewalkpath",value:"FEEDBACK_FIELD_OPTION_ADD_BIKE_WALK_PATH",next:[{name:"bikewalkpath",optional:!0},{name:"photos",photosLegend:"add.bikewalkpath.comments",optional:!0}]},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_ADD_SOMETHING_ELSE",requireEditInNext:!0,next:"extra"}]}]},street:{title:"add.street.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_STREET_NAME",original:"map-feature-name",label:"add.street.label"}]},trafficsign:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"add.stopsign",value:"FEEDBACK_FIELD_OPTION_ADD_STOP_SIGN"},{label:"add.trafficlight",value:"FEEDBACK_FIELD_OPTION_ADD_TRAFFIC_LIGHT"},{label:"add.trafficcamera",value:"FEEDBACK_FIELD_OPTION_ADD_TRAFFIC_CAMERA"}]}]},name:{title:"name.title",inputs:[{type:"text",label:"add.place.label.required",key:"FEEDBACK_FIELD_KEY_POI_NAME"}]},address:ye,categories:Te,hours:ve,website:Ae,phone:Fe,neighborhood:{title:"add.neighborhood.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_NEIGHBORHOOD_NAME",label:"add.neighborhood.label"}]},transitstop:{title:"add.transitstop.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_TRANSIT_POI_NAME",label:"add.transitstop.label"}]},bikewalkpath:{title:"add.bikewalkpath.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_BIKE_WALKING_PATH_NAME",label:"add.bikewalkpath.label"}]},extra:_e,photos:me}},addToMapSpr:{title:"issue.add",initial:["map","type"],groups:{map:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"add.location",optionalWithFeature:!0,editOriginal:!0}]},type:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"add.address",value:"FEEDBACK_FIELD_OPTION_ADD_ADDRESS",next:["address",{name:"photos",photosLegend:"add.address.comments",optional:!0}]},{label:"add.trafficsign",value:"FEEDBACK_FIELD_OPTION_ADD_TRAFFIC_SIGN_LIGHT",next:["trafficsign",{name:"photos",photosLegend:"add.trafficsign.comments",optional:!0}]},{label:"add.place",value:"FEEDBACK_FIELD_OPTION_ADD_PLACE",next:["name","address",{name:"categories",optional:!0},{name:"hours",optional:!0},{name:"website",optional:!0},{name:"phone",optional:!0},{name:"photos",photosLegend:"add.place.comments",optional:!0}]},{label:"add.neighborhood",value:"FEEDBACK_FIELD_OPTION_ADD_NEIGHBORHOOD",next:[{name:"neighborhood",optional:!0},{name:"photos",photosLegend:"add.neighborhood.comments",optional:!0}]},{label:"add.transitstop",value:"FEEDBACK_FIELD_OPTION_ADD_TRANSIT_STOP",next:["transitstop",{name:"photos",photosLegend:"add.transitstop.comments",optional:!0}]},{label:"add.bikewalkpath",value:"FEEDBACK_FIELD_OPTION_ADD_BIKE_WALK_PATH",next:[{name:"bikewalkpath",optional:!0},{name:"photos",photosLegend:"add.bikewalkpath.comments.spr",optional:!0}]},{label:"add.streetfeatures",value:"FEEDBACK_FIELD_OPTION_ADD_STREET_FEATURES",next:"street"},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_ADD_SOMETHING_ELSE",requireEditInNext:!0,next:"extra"}]}]},street:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"add.street",value:"FEEDBACK_FIELD_OPTION_ADD_STREET",next:[{name:"extra",photosLegend:"add.street.comments",optional:!0}]},{label:"streetfeatures.surface",value:"FEEDBACK_FIELD_OPTION_ADD_STREET_SURFACE",next:[{name:"extra",photosLegend:"streetfeatures.surface.photos.add",optional:!0}]},{label:"streetfeatures.lane",value:"FEEDBACK_FIELD_OPTION_ADD_STREET_LANE",next:[{name:"extra",photosLegend:"streetfeatures.lane.photos",optional:!0}]},{label:"streetfeatures.crosswalk",value:"FEEDBACK_FIELD_OPTION_ADD_STREET_CROSSWALK",next:[{name:"extra",photosLegend:"streetfeatures.crosswalk.photos.add",optional:!0}]},{label:"streetfeatures.median",value:"FEEDBACK_FIELD_OPTION_ADD_STREET_MEDIAN",next:[{name:"extra",photosLegend:"streetfeatures.median.photos",optional:!0}]}]}]},trafficsign:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"add.stopsign",value:"FEEDBACK_FIELD_OPTION_ADD_STOP_SIGN"},{label:"add.trafficlight",value:"FEEDBACK_FIELD_OPTION_ADD_TRAFFIC_LIGHT"},{label:"add.trafficcamera",value:"FEEDBACK_FIELD_OPTION_ADD_TRAFFIC_CAMERA"}]}]},name:{title:"name.title",inputs:[{type:"text",label:"add.place.label.required",key:"FEEDBACK_FIELD_KEY_POI_NAME"}]},address:ye,categories:Te,hours:ve,website:Ae,phone:Fe,neighborhood:{title:"add.neighborhood.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_NEIGHBORHOOD_NAME",label:"add.neighborhood.label"}]},transitstop:{title:"add.transitstop.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_TRANSIT_POI_NAME",label:"add.transitstop.label"}]},bikewalkpath:{title:"add.bikewalkpath.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_BIKE_WALKING_PATH_NAME",label:"add.bikewalkpath.label"}]},extra:_e,photos:me}},homeWorkSchool:{title:"issue.address",initial:["type"],groups:{type:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"issue.location",value:"FEEDBACK_FIELD_OPTION_ADDRESS_LOCATION",next:["location",{name:"extra",photosLegend:"issue.location.photos",optional:!0}]},{label:"navdestination.entrance",value:"FEEDBACK_FIELD_OPTION_ADDRESS_ENTRY_POINT",next:["locationEntryPoint",{name:"entranceType",optional:!0},{name:"extra",photosLegend:"navdestination.entrance.photos",optional:!0}]}]}]},location:Ie,locationEntryPoint:De,entranceType:Ne,extra:_e}},locality:{title:"issue.place",initial:["type"],groups:{type:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"issue.name",value:"FEEDBACK_FIELD_OPTION_LOCALITY_NAME",next:["localityName",{name:"extra",optional:!0}]},{label:"issue.location",value:"FEEDBACK_FIELD_OPTION_LOCALITY_PIN",next:["location",{name:"extra",optional:!0}]},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_LOCALITY_SOMETHING_ELSE",requireEditInNext:!0,next:"extra"}]}]},localityName:{title:"name.title",inputs:[{type:"text",label:"name.label",key:"FEEDBACK_FIELD_KEY_LOCALITY_NAME",original:e=>e?.entityName}]},location:Ie,extra:_e}},poi:{title:"issue.place",initial:["type"],groups:{type:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"issue.name",value:"FEEDBACK_FIELD_OPTION_POI_NAME",next:[{name:"name"},{name:"extra",optional:!0}]},{label:"poi.location",value:"FEEDBACK_FIELD_OPTION_POI_ADDRESS",requireEditInNext:!0,next:[{name:"location",optional:!0},{name:"address",optional:!0},{name:"extra",optional:!0}]},{label:"poi.phone",value:"FEEDBACK_FIELD_OPTION_POI_PHONE_OR_WEBSITE",requireEditInNext:!0,next:[{name:"phone",optional:!0},{name:"website",optional:!0},{name:"extra",optional:!0}]},{label:"poi.hours",value:"FEEDBACK_FIELD_OPTION_POI_HOURS",next:[{name:"hours"},{name:"extra",optional:!0}]},{label:"poi.closed",value:"FEEDBACK_FIELD_OPTION_POI_CLOSED",next:[{name:"closed",optional:!0},{name:"extra",optional:!0}]},{label:"poi.category",value:"FEEDBACK_FIELD_OPTION_POI_CATEGORY",next:[{name:"categories"},{name:"extra",optional:!0}]},{label:"poi.multiple",value:"FEEDBACK_FIELD_OPTION_POI_MULTIPLE",requireEditInNext:!0,next:[{name:"name",textLabel:"add.place.label",optional:!0},{name:"location",title:"location.title",optional:!0},{name:"address",optional:!0},{name:"phone",optional:!0},{name:"website",optional:!0},{name:"hours",optional:!0},{name:"closedTemporary",optional:!0},{name:"categories",optional:!0},{name:"containmentParent",optional:!0},{name:"containmentChild",optional:!0},{name:"applepay",optional:!0},{name:"extra",optional:!0}]}]}]},name:Oe,location:Ie,address:ye,phone:Fe,website:Ae,hours:ve,closed:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"poi.closed.permanently",value:"FEEDBACK_FIELD_OPTION_POI_CLOSED_PERMANENT",checked:e=>!!e?.businessHoursPermanentClosure},{label:"poi.closed.temporary",value:"FEEDBACK_FIELD_OPTION_POI_CLOSED_TEMPORARY",checked:e=>!!e?.businessHoursTemporaryClosureEnd,next:{name:"reopening",optional:!0}}]}]},closedTemporary:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"poi.closed.temporary",value:"FEEDBACK_FIELD_OPTION_POI_CLOSED_TEMPORARY",checked:e=>!!e?.businessHoursTemporaryClosureEnd,next:{name:"reopening",optional:!0}}]}]},reopening:{inputs:[{type:"calendar",label:"issue.reopening",key:"FEEDBACK_FIELD_KEY_POI_HOURS",original:e=>e?.businessHoursTemporaryClosureEnd}]},containmentParent:{title:"poi.containment.parent.title",inputs:[{type:"place",key:"FEEDBACK_FIELD_KEY_POI_CONTAINMENT_CHILD",original:e=>e?.contains}]},containmentChild:{title:"poi.containment.child.title",inputs:[{type:"place",key:"FEEDBACK_FIELD_KEY_POI_CONTAINMENT_PARENT",original:e=>e?.containedIn}]},applepay:{title:"poi.applepay.title",inputs:[{type:"amenity",key:"FEEDBACK_FIELD_KEY_POI_AMENITIES",amenities:[{type:"ACCEPTS_APPLE_PAY",label:"poi.applepay",original:e=>e?.acceptsApplePay}]}]},categories:Te,extra:_e}},street:{title:"issue.street",initial:["map","type"],groups:{map:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"street.location",editOriginal:!0}]},type:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"street.namewrong",value:"FEEDBACK_FIELD_OPTION_STREET_NAME_WRONG",next:["name",{name:"photos",photosLegend:"street.name.comments",optional:!0}]},{label:"street.missing",value:"FEEDBACK_FIELD_OPTION_STREET_MISSING",next:[{name:"missing",optional:!0},{name:"photos",photosLegend:"street.name.comments",optional:!0}]},{label:"street.wrongway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY",next:["wrongway",{name:"photos",optional:!0}]},{label:"street.private",value:"FEEDBACK_FIELD_OPTION_STREET_PRIVATE",next:[{name:"name",optional:!0},{name:"photos",photosLegend:"street.private.comments",optional:!0}]},{label:"street.shapewrong",value:"FEEDBACK_FIELD_OPTION_STREET_SHAPE_WRONG",next:{name:"photos",optional:!0}},{label:"street.noentry",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY",next:"noentry"},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_STREET_SOMETHING_ELSE",requireEditInNext:!0,next:"extra"}]}]},name:{title:"street.private.label",inputs:[{type:"text",label:"street.private.label",key:"FEEDBACK_FIELD_KEY_STREET_NAME",original:"map-feature-name"}]},missing:{title:"street.private.label",inputs:[{type:"text",label:"street.private.label",key:"FEEDBACK_FIELD_KEY_STREET_NAME",optional:!0}]},wrongway:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"street.wrongway.oneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_ONE_WAY"},{label:"street.wrongway.notoneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_NOT_ONE_WAY"}]}]},noentry:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"street.noentry.blocked",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_BLOCKED",next:{name:"photos",photosLegend:"street.noentry.blocked.comments",optional:!0}},{label:"street.noentry.construction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_CONSTRUCTION",next:{name:"photos",photosLegend:"street.noentry.construction.comments",optional:!0}},{label:"street.noentry.turnnotallowed",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_TURN_NOT_ALLOWED",next:{name:"photos",photosLegend:"street.noentry.traffic.comments",optional:!0}},{label:"street.noentry.restriction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_RESTRICTION",next:{name:"extra",photosLegend:"street.noentry.traffic.comments",optional:!0}}]}]},extra:_e,photos:me}},streetSpr:{title:"issue.street",initial:["map","type"],groups:{map:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"street.location.spr",editOriginal:!0}]},type:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"street.namewrong",value:"FEEDBACK_FIELD_OPTION_STREET_NAME_WRONG",next:["name",{name:"photos",photosLegend:"street.name.comments",optional:!0}]},{label:"street.missing",value:"FEEDBACK_FIELD_OPTION_STREET_MISSING",next:[{name:"missing",optional:!0},{name:"photos",photosLegend:"street.name.comments",optional:!0}]},{label:"street.wrongway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY",next:["wrongway",{name:"photos",optional:!0}]},{label:"street.private",value:"FEEDBACK_FIELD_OPTION_STREET_PRIVATE",next:[{name:"name",optional:!0},{name:"photos",photosLegend:"street.private.comments",optional:!0}]},{label:"street.noentry",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY",next:"noentry"},{label:"street.feature",value:"FEEDBACK_FIELD_OPTION_FEATURE_WRONG",next:"feature"},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_STREET_SOMETHING_ELSE",requireEditInNext:!0,next:"extra"}]}]},name:{title:"street.private.label",inputs:[{type:"text",label:"street.private.label",key:"FEEDBACK_FIELD_KEY_STREET_NAME",original:"map-feature-name"}]},missing:{title:"street.private.label",inputs:[{type:"text",label:"street.private.label",key:"FEEDBACK_FIELD_KEY_STREET_NAME",optional:!0}]},wrongway:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"street.wrongway.oneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_ONE_WAY"},{label:"street.wrongway.notoneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_NOT_ONE_WAY"}]}]},noentry:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"street.noentry.blocked",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_BLOCKED",next:{name:"photos",photosLegend:"street.noentry.blocked.comments",optional:!0}},{label:"street.noentry.construction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_CONSTRUCTION",next:{name:"photos",photosLegend:"street.noentry.construction.comments",optional:!0}},{label:"street.noentry.turnnotallowed",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_TURN_NOT_ALLOWED",next:{name:"photos",photosLegend:"street.noentry.traffic.comments",optional:!0}},{label:"street.noentry.restriction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_RESTRICTION",next:{name:"extra",photosLegend:"street.noentry.traffic.comments",optional:!0}}]}]},feature:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"street.shape",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_STREET",next:{name:"extra",optional:!0,photosLegend:"street.shape.photos"}},{label:"streetfeatures.surface",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_STREET_SURFACE",next:{name:"extra",optional:!0,photosLegend:"streetfeatures.surface.photos.report"}},{label:"streetfeatures.lane",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_LANE",next:{name:"extra",optional:!0,photosLegend:"streetfeatures.lane.photos"}},{label:"streetfeatures.crosswalk",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_CROSSWALK",next:{name:"extra",optional:!0,photosLegend:"streetfeatures.crosswalk.photos.report"}},{label:"streetfeatures.median",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_MEDIAN",next:{name:"extra",optional:!0,photosLegend:"streetfeatures.median.photos"}},{label:"streetfeatures.walkpath",value:"FEEDBACK_FIELD_OPTION_FEATURE_SHAPE_WRONG_WALK_PATH",next:{name:"extra",optional:!0,photosLegend:"streetfeatures.walkpath.photos"}}]}]},extra:_e,photos:me}},navigationDrivingStep:{initial:["focused","detail"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},detail:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.driving.streetprivate",value:"FEEDBACK_FIELD_OPTION_STREET_PRIVATE",next:{name:"streetname",optional:!0}},{label:"navigation.driving.wrongway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY",next:{name:"wrongway"}},{label:"navigation.driving.noentry",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY",next:{name:"noentry"}},{label:"navigation.driving.turnnotsafe",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_TURN_NOT_SAFE",scroll:!1,next:{name:"privacy",optional:!0}},{label:"navigation.driving.laneguidance",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_LANE_GUIDANCE",next:{name:"laneguidance",optional:!0}},{label:"navigation.driving.streetnamewrong",value:"FEEDBACK_FIELD_OPTION_STREET_NAME_WRONG",next:{name:"streetname"}},{label:"navigation.driving.lightsignwrong",value:"FEEDBACK_FIELD_OPTION_LIGHT_SIGN_WRONG",next:{name:"lightsignwrong"}},{label:"navigation.driving.else",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_SOMETHING_ELSE",requireEditInNext:!0,next:"extra"}]}]},streetname:{title:"navigation.driving.streetname",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_STREET_NAME",label:"navigation.driving.streetname",original:e=>e?.structuredAddressThoroughfare}],privacyLegend:!0},wrongway:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.driving.wrongway.oneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_ONE_WAY"},{label:"navigation.driving.wrongway.notoneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_NOT_ONE_WAY"}]}],privacyLegend:!0},noentry:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.driving.blocked",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_BLOCKED",next:{name:"photos",optional:!0}},{label:"navigation.driving.construction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_CONSTRUCTION",next:{name:"photos",optional:!0}},{label:"navigation.driving.turnnotallowed",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_TURN_NOT_ALLOWED",next:{name:"photos",optional:!0}},{label:"navigation.driving.restriction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_RESTRICTION",next:{name:"extra",photosLegend:"navigation.driving.restriction.photos",optional:!0}}]}]},laneguidance:{title:"navigation.driving.laneguidance.correctlane",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_LANE_GUIDANCE_CORRECT_LANE",label:"navigation.driving.laneguidance.correctlane"}],privacyLegend:!0},lightsignwrong:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.driving.trafficlighterror",value:"FEEDBACK_FIELD_OPTION_TRAFFIC_LIGHT_ERROR"},{label:"navigation.driving.trafficlightmissing",value:"FEEDBACK_FIELD_OPTION_TRAFFIC_LIGHT_MISSING"},{label:"navigation.driving.stopsignerror",value:"FEEDBACK_FIELD_OPTION_STOP_SIGN_ERROR"},{label:"navigation.driving.stopsignmissing",value:"FEEDBACK_FIELD_OPTION_STOP_SIGN_MISSING"}]}],privacyLegend:!0},extra:_e,photos:me,privacy:ge}},navigationWalkingStep:{initial:["focused","detail"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},detail:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.walking.allowed",value:"FEEDBACK_FIELD_OPTION_WALK_STEP_WALKING_NOT_ALLOWED",next:{name:"photos",photosLegend:"street.noentry.traffic.comments",optional:!0}},{label:"navigation.walking.safe",value:"FEEDBACK_FIELD_OPTION_WALK_STEP_WALKING_NOT_SAFE",next:{name:"photos",optional:!0}},{label:"navigation.walking.private",value:"FEEDBACK_FIELD_OPTION_STREET_PRIVATE",next:[{name:"streetname",optional:!0},{name:"photos",optional:!0}]},{label:"navigation.walking.entry",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY",next:"entry"},{label:"navigation.walking.name",value:"FEEDBACK_FIELD_OPTION_STREET_NAME_WRONG",next:["streetname",{name:"photos",photosLegend:"navigation.walking.name.photos",optional:!0}]},{label:"navigation.walking.else",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_SOMETHING_ELSE",requireEditInNext:!0,next:"extra"}]}]},streetname:{title:"navigation.walking.streetname",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_STREET_NAME",label:"navigation.walking.streetname",original:e=>e?.structuredAddressThoroughfare}]},entry:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.walking.entry.blocked",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_BLOCKED",next:{name:"photos",photosLegend:"street.noentry.blocked.comments",optional:!0}},{label:"navigation.walking.entry.construction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_CONSTRUCTION",next:{name:"photos",photosLegend:"street.noentry.construction.comments",optional:!0}}]}]},photos:me,extra:_e}},navigationCyclingStep:{initial:["focused","detail"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},detail:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.cycling.bikingnotallowed",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_BIKING_NOT_ALLOWED",scroll:!1,next:{name:"privacy",optional:!0}},{label:"navigation.cycling.bikingnotsafe",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_BIKING_NOT_SAFE",scroll:!1,next:{name:"privacy",optional:!0}},{label:"navigation.cycling.elevationwarning",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_ELEVATION_WARNING",next:"elevationwarning"},{label:"navigation.cycling.dismount",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_DISMOUNT",next:"dismount"},{label:"navigation.cycling.wrongway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY",next:"wrongway"},{label:"navigation.cycling.noentry",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY",next:"noentry"},{label:"navigation.cycling.laneguidance",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_LANE_GUIDANCE",next:{name:"laneguidance",optional:!0}},{label:"navigation.cycling.streetnamewrong",value:"FEEDBACK_FIELD_OPTION_STREET_NAME_WRONG",next:"streetname"},{label:"navigation.driving.lightsignwrong",value:"FEEDBACK_FIELD_OPTION_LIGHT_SIGN_WRONG",next:"lightsignwrong"},{label:"navigation.cycling.else",value:"FEEDBACK_FIELD_OPTION_ROUTE_STEP_SOMETHING_ELSE",requireEditInNext:!0,next:"extra"}]}]},elevationwarning:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.elevationwarningadd",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_ELEVATION_WARNING_ADD"},{label:"navigation.cycling.elevationwarningremove",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_ELEVATION_WARNING_REMOVE"}]}],privacyLegend:!0},dismount:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.dismountadd",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_DISMOUNT_ADD"},{label:"navigation.cycling.dismountremove",value:"FEEDBACK_FIELD_OPTION_CYCLING_STEP_DISMOUNT_REMOVE"}]}],privacyLegend:!0},wrongway:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.wrongway.oneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_ONE_WAY"},{label:"navigation.cycling.wrongway.notoneway",value:"FEEDBACK_FIELD_OPTION_STREET_WRONG_WAY_NOT_ONE_WAY"}]}],privacyLegend:!0},noentry:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.noentry.blocked",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_BLOCKED",next:{name:"photos",photosLegend:"navigation.cycling.noentry.blocked.photos",optional:!0}},{label:"navigation.cycling.noentry.construction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_CONSTRUCTION",next:{name:"photos",photosLegend:"navigation.cycling.noentry.construction.photos",optional:!0}},{label:"navigation.cycling.noentry.turnnotallowed",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_TURN_NOT_ALLOWED",next:{name:"photos",photosLegend:"navigation.cycling.noentry.turnnotallowed.photos",optional:!0}},{label:"navigation.cycling.noentry.restriction",value:"FEEDBACK_FIELD_OPTION_STREET_NO_ENTRY_RESTRICTION",next:{name:"extra",photosLegend:"navigation.cycling.noentry.restriction.photos",optional:!0}},{label:"street.private",value:"FEEDBACK_FIELD_OPTION_STREET_PRIVATE",next:{name:"photos",photosLegend:"street.private.comments",optional:!0}}]}]},laneguidance:{title:"navigation.cycling.laneguidance.correctlane",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_LANE_GUIDANCE_CORRECT_LANE",label:"navigation.cycling.laneguidance.correctlane",optional:!0}],privacyLegend:!0},streetname:{title:"navigation.cycling.streetname",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_STREET_NAME",label:"navigation.cycling.streetname",original:e=>e?.structuredAddressThoroughfare}],privacyLegend:!0},lightsignwrong:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.trafficlighterror",value:"FEEDBACK_FIELD_OPTION_TRAFFIC_LIGHT_ERROR"},{label:"navigation.cycling.trafficlightmissing",value:"FEEDBACK_FIELD_OPTION_TRAFFIC_LIGHT_MISSING"},{label:"navigation.cycling.stopsignerror",value:"FEEDBACK_FIELD_OPTION_STOP_SIGN_ERROR"},{label:"navigation.cycling.stopsignmissing",value:"FEEDBACK_FIELD_OPTION_STOP_SIGN_MISSING"}]}],privacyLegend:!0},photos:me,extra:_e,privacy:ge}},navigationDrivingArrival:{initial:["focused","detail"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},detail:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.driving.arrival.destination",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_LOCATION_WRONG",next:["location",{name:"photos",photosLegend:"add.address.photos",optional:!0}]},{label:"navigation.driving.arrival.entrance",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE",next:["locationEntryPoint",{name:"entrance",optional:!0},{name:"photos",photosLegend:"navigation.driving.arrival.entrance.photos",optional:!0}]}]}]},entrance:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.driving.arrival.entrance.driving",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_DRIVING"},{label:"navigation.driving.arrival.entrance.walking",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_WALKING"},{label:"navigation.driving.arrival.entrance.both",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_BOTH"}]}]},location:Ie,locationEntryPoint:De,photos:me}},navigationWalkingArrival:{initial:["focused","detail"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},detail:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.walking.arrival.destination",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_LOCATION_WRONG",next:["location",{name:"photos",photosLegend:"add.address.photos",optional:!0}]},{label:"navigation.walking.arrival.entrance",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE",next:["locationEntryPoint",{name:"entrance",optional:!0},{name:"photos",photosLegend:"navigation.driving.arrival.entrance.photos",optional:!0}]}]}]},entrance:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.walking.arrival.entrance.driving",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_DRIVING"},{label:"navigation.walking.arrival.entrance.walking",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_WALKING"},{label:"navigation.walking.arrival.entrance.both",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_BOTH"}]}]},location:Ie,locationEntryPoint:De,photos:me}},navigationCyclingArrival:{initial:["focused","detail"],title:"navigation.step.title",groups:{focused:{title:"",inputs:[{type:"navigationStep",key:"FEEDBACK_FIELD_KEY_ROUTE_STEP",single:"focused",showDetails:!0,optional:!0}]},detail:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"navigation.cycling.arrival.destination",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_LOCATION_WRONG",next:["location",{name:"photos",photosLegend:"add.address.photos",optional:!0}]},{label:"navigation.cycling.arrival.entrance",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE",next:["locationEntryPoint",{name:"entrance",optional:!0},{name:"photos",photosLegend:"navigation.driving.arrival.entrance.photos",optional:!0}]}]}]},entrance:{title:"",inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_OPTIONS_MENU",options:[{label:"navigation.cycling.arrival.entrance.driving",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_DRIVING"},{label:"navigation.cycling.arrival.entrance.walking",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_WALKING"},{label:"navigation.cycling.arrival.entrance.both",value:"FEEDBACK_FIELD_OPTION_NAV_DESTINATION_ENTRANCE_BOTH"}]}]},location:Ie,locationEntryPoint:De,photos:me}},transit:{title:"issue.place",initial:["type"],groups:{type:{inputs:[{type:"radios",key:"FEEDBACK_FIELD_KEY_ISSUE_TYPE",options:[{label:"issue.name",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_NAME",next:["name",{name:"photos",photosLegend:"issue.name.photos",optional:!0}]},{label:"transit.poilocation",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_LOCATION",next:["location",{name:"photos",optional:!0}]},{label:"transit.poientrance",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_ENTRANCE",next:["entrance",{name:"extra",photosLegend:"transit.poientrance.photos",optional:!0}]},{label:"transit.poiexit",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_EXIT",next:["exit",{name:"extra",photosLegend:"transit.poiexit.photos",optional:!0}]},{label:"transit.lineinfowrong",value:"FEEDBACK_FIELD_OPTION_TRANSIT_LINE_INFO_WRONG",next:"transitLineInformation"},{label:"transit.addtransitline",value:"FEEDBACK_FIELD_OPTION_ADD_TRANSIT_LINE",next:["addName",{name:"extra",photosLegend:"transit.addtransitline.photos",optional:!0}]},{label:"poi.closed.temporary",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_CLOSED_TEMPORARILY",next:[{name:"temporaryClosure",optional:!0},{name:"extra",photosLegend:"transit.closed.photos",optional:!0}]},{label:"poi.closed.permanently",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_CLOSED_PERMANENTLY",checked:e=>!!e?.businessHoursPermanentClosure,next:{name:"extra",photosLegend:"transit.closed.photos",optional:!0}},{label:"issue.somethingelse",value:"FEEDBACK_FIELD_OPTION_TRANSIT_POI_SOMETHING_ELSE",requireEditInNext:!0,next:"extra"}]}]},extra:_e,photos:me,location:Ie,entrance:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"location.entrypoint.label"}]},exit:{inputs:[{type:"map",key:"FEEDBACK_FIELD_KEY_LOCATION",legend:"transit.poiexit.label"}]},name:{title:"transit.name",inputs:[{type:"text",label:"transit.name",key:"FEEDBACK_FIELD_KEY_POI_NAME",original:e=>e?.entityName}]},transitLineInformation:be,transitLineIssue:fe,transitLineNameMissing:Le,addName:{title:"transit.addtransitline.label",inputs:[{type:"text",key:"FEEDBACK_FIELD_KEY_TRANSIT_POI_NAME",label:"transit.addtransitline.label"}]},temporaryClosure:{inputs:[{type:"calendar",label:"issue.reopening",key:"FEEDBACK_FIELD_KEY_TRANSIT_POI_HOURS",original:e=>e?.businessHoursTemporaryClosureEnd}]}}},transitLine:{title:"issue.transit.line",initial:[{name:"transitLineInformation",title:""}],groups:{extra:_e,transitLineInformation:be,transitLineIssue:fe,transitLineNameMissing:Le}}}},Ke=async(i=null)=>{const n=g(),a=await n({name:"context",supportedLocales:E});i?.customLocale&&(a.locale=i?.customLocale);const s=await(async e=>{if(window.rapDebugCustomStrings){const e=window.rapDebugCustomStrings;return{currentMap:e,defaultMap:e,locale:"en-US",dir:"auto"}}try{const i=document.head.dataset.rapSrcPrefix||"./",n=`${i}locales/${e.locale}/strings.json${document.head.dataset.cacheBustingSuffix??""}`,a=`${i}locales/en-US/strings.json${document.head.dataset.cacheBustingSuffix??""}`;if("en-US"!==e.locale){let[i,o]=await Promise.all([fetch(n).then((e=>e.json())).catch((e=>({}))),fetch(a).then((e=>e.json())).catch((e=>({})))]);return{currentMap:i,defaultMap:o,locale:e.locale,dir:(t=e.locale,["ar-SA","he-IL"].includes(t)?"rtl":"ltr")}}let o=await(await fetch(n)).json();return{currentMap:o,defaultMap:o,locale:"en-US",dir:"ltr"}}catch(e){return{currentMap:{},defaultMap:{},locale:"en-US",dir:"auto"}}var t})(a),l=a.useHour12,r=((i,n,a)=>{const o=(e,t)=>{const{currentMap:i,defaultMap:a}=n;let o=(t?.defaultLocale?a:i)[e]??a[e]??e;const s=t?.replace;if(s)for(let[e,t]of Object.entries(s))o=o.replaceAll("{{"+e+"}}",t);return o},s=(e,t,i,n)=>{window.rapDebug&&(n[`debug-${i}Key`]=e,n[`debug-${i}Value`]=t)},l=a?.useHour12??function(){const e=new Date(Date.UTC(2001,0,1,0,0,75600));return new Intl.DateTimeFormat(i,{hour:"numeric",timeZone:"UTC"}).format(e).indexOf("9")>=0}(),r=new Intl.DateTimeFormat(i,{hour:"numeric",minute:"numeric",timeZone:"UTC",hour12:l}),d={EVERYDAY:"hours.everyday",SUNDAY:"hours.sunday",MONDAY:"hours.monday",TUESDAY:"hours.tuesday",WEDNESDAY:"hours.wednesday",THURSDAY:"hours.thursday",FRIDAY:"hours.friday",SATURDAY:"hours.saturday"},p=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],u=p.length,E=h[i]??0,_=[];for(var m=0;m<u;++m)_.push(p[(m+E)%u]);return{key:o,h:(i,a,l=[],r)=>{if((a=e(a)).dataset=a.dataset||{},r&&r.localizePlaceholder){const e=r.localizePlaceholder;a.placeholder=o(e,r),s(e,a.placeholder,"placeholder",a.dataset)}if(r&&r.localizeAriaLabel){const e=r.localizeAriaLabel;a.ariaLabel=o(e,r),s(e,a.ariaLabel,"ariaLabel",a.dataset)}if("string"==typeof l){const e=l,t=o(e,{defaultLocale:r?.defaultLocale});if(r?.replace){l=[];const e=t.matchAll(/{{.+?}}/g);let i=0;for(const n of e){if(void 0===n.index)continue;0!==n.index&&l.push(t.substr(i,n.index));let e=n[0].substr(2,n[0].length-4);const a=r.replace[e];"string"==typeof a?l.push(a):l.push(a()),i=n.index+n[0].length}i!==t.length&&l.push(t.substr(i,t.length))}else l=t;a.dir=n.dir,window.rapDebug&&(a.dataset["debug-textKey"]=e,a.dataset["debug-textValue"]=t||"")}return t(i,a,l)},hour:(e,t=!1)=>{const i=new Date(Date.UTC(2001,0,1,0,0,e)),n=r.format(i);if(t){const e=n.match(/\p{Nd}+\p{P}\p{Nd}+/u);if(e)return e[0]}return n},weekDay:e=>o(d[e]),number:e=>e.toLocaleString(i),date:e=>new Intl.DateTimeFormat(i).format(e),days:_,hour12:l,timeInfo:c(i)}})(a.locale,s,{useHour12:l}),d=i?.flow??we[a.type],p=!i?.flow&&a.type.startsWith("navigation"),_=i?.expandAll?Object.keys(d.groups):d.initial,y=i?.customDocument??document,v={version:"(unfetched)",rootId:a.type,locale:a.locale,countryCode:(a.countryCode??"US").toUpperCase(),useAccessibilityLabels:a.useAccessibilityLabels??!1,navigation:a.navigation,place:i?.place??a.place,templates:d.groups,groupNames:_,groups:[],photoIds:new Set,textMap:s,localize:r,isValid:!1,didValidate:[],didSetMapPicker:[],didChooseTransitLine:[],didUpdateLayout:[],modalData:i?.modalData??a.modalData},O=a.navigation?.focused;if(O&&p){const e=O.directionsResponseIndex??0,t=O.routeIndex??0,i=O.stepId??0;v.parentId=`[${e}.${t}.${i}]`}for(const e of o(_)){const t=I(v,e),i="string"==typeof e?null:e;t?v.groups.push(new ue(v,t,!1,i)):console.error("Missing Root Group: "+e)}const F=v.groups.map((e=>e.view()));y.documentElement.dir=s.dir,y.documentElement.lang=s.locale,y.documentElement.rtl="rtl"===s.dir;const A=a.place?.entityName,b=d.title?r.h("h1",{},d.title,{replace:{entityName:()=>t("span",{dir:"auto"},A)}}):null,f=t("form",{id:"groups",className:"flow"+(i?.flow?" modal":"")},[b,...F]);return f.addEventListener("pointerdown",(()=>{}),{passive:!0}),window.addEventListener("orientationchange",(()=>{for(const e of v.didUpdateLayout)e()})),window.rapSetMapPickerValue=e=>{for(const t of v.didSetMapPicker)t(e)},window.rapGlobals=v,window.rapDump=()=>(console.log(v.groups.map((e=>e.dump())).join("\n")),D(v)),window.rapDebugCurrentStrings=v.textMap.currentMap,window.rapGetData=()=>"",u((async()=>{const e=await(async e=>{await(async()=>{if(m)return;const e=document.head.dataset.cacheBustingSuffix??"";await import("./protobuf.js"+e),m=!0})();const t=window.mapsProtoDefinitions;try{const i=atob(e||""),n=new Uint8Array(i.length);for(let e=0;e<i.length;e+=1)n[e]=i.charCodeAt(e);return t.FeedbackDynamicForm.decode(n)}catch(e){}return null})(a.initialData),t=e?.formFields;if(t)for(const e of v.groups)e.decode(t);window.rapGetData=N.bind(null,v,e)})),u((async()=>{const e=document.head.dataset.rapSrcPrefix||"./",t=await fetch(`${e}version.json`).then((e=>e.json())).catch((e=>{}));v.version=t})),y.body.appendChild(f),T(v),d.onload&&await d.onload(v),n({name:"pageShown",success:!0}),v};(async()=>{let e=null;switch(window.location.pathname.substr(window.location.pathname.lastIndexOf("/"))){case"/hours.html":e=Ce}if(e){const t=await Ke({flow:e});window.rapGetModalData=()=>t.groups[0]?.children[0]?.getModalData?.()??null}else Ke()})()})();